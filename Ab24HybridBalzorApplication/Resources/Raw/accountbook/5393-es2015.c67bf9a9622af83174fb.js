"use strict";(self.webpackChunkaccoubtbook=self.webpackChunkaccoubtbook||[]).push([[5393],{65393:function(e,t,i){i.r(t),i.d(t,{TransactionsModule:function(){return Kn}});var n=i(38583),r=i(64762),o=i(78980),a=i(42005),l=i(58679),s=i(84659),c=i(18454),d=i(66203),u=i(34450),g=i(18374),h=i(75075),p=i(39478),f=i(84306),m=i(27541),Z=i(32364),T=i(24498),A=i(82316),v=i(3428),x=i(33018),I=i(89525),L=i(92859),w=i(44667),b=i(12868),C=i(89401),q=i(37919),S=i(91113),M=i(25575),y=i(48429),N=i(43647),D=i(3679),_=i(6642),U=i(66496),k=i(85895),J=i(10743),V=i(87520),R=i(21974),Q=i(65452),F=i(82929),E=i(3001),H=i(53321),O=i(44633),P=i(14868);const G=["toled"],B=["ChallanModal"],Y=["BillModal"],j=["BillModalMobile"],K=["SearchModal"],z=["purled"],W=["taxLedger"],X=["LedgerHistoryModal"],ee=["fbill"],te=["ionInfinitescroll"],ie=["ionvscroll"],ne=["ImageModal"],re=["myInqImportedDataViewModal"];function oe(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"a"),x._uU(1),x.qZA(),x.TgZ(2,"a",126),x.TgZ(3,"i",127),x.NdJ("click",function(){const t=x.CHM(e).item;return x.oxw(2).OpenLedgerHistoryPopUp(t.UIDN)}),x.qZA(),x.qZA()}if(2&e){const e=t.item;x.xp6(1),x.Oqu(e.LN)}}function ae(e,t){if(1&e&&(x.TgZ(0,"small",128),x._uU(1),x.qZA()),2&e){const e=x.oxw(2);x.xp6(1),x.AsE(" Loaded ",e.siteService.result.length," of ",e.siteService.totalItems," ")}}function le(e,t){if(1&e&&(x.TgZ(0,"small",128),x._uU(1),x.qZA()),2&e){const e=x.oxw(2);x.xp6(1),x.AsE(" Loaded ",e.inventoryService.result.length," of ",e.inventoryService.totalItems," ")}}function se(e,t){if(1&e&&(x.TgZ(0,"small",128),x._uU(1),x.qZA()),2&e){const e=x.oxw(2);x.xp6(1),x.AsE(" Loaded ",e.taskService.result.length," of ",e.taskService.totalItems," ")}}function ce(e,t){if(1&e&&(x.TgZ(0,"small",128),x._uU(1),x.qZA()),2&e){const e=x.oxw(2);x.xp6(1),x.AsE(" Loaded ",e.subtaskService.result.length," of ",e.subtaskService.totalItems," ")}}function de(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",102),x.TgZ(1,"ul",103),x.TgZ(2,"li",104),x.TgZ(3,"button",105),x.NdJ("click",function(){return x.CHM(e),x.oxw().goback()}),x._UZ(4,"i",106),x.qZA(),x.qZA(),x.TgZ(5,"li",107),x.TgZ(6,"ng-select",108,109),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw().searchLedger=t}),x.YNc(8,oe,4,1,"ng-template",59),x.qZA(),x.qZA(),x.TgZ(9,"li",110),x.TgZ(10,"button",111),x.NdJ("click",function(){return x.CHM(e),x.oxw().FilterData()}),x._UZ(11,"span",112),x.TgZ(12,"span",113),x._uU(13,"Search"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(14,"li",107),x.TgZ(15,"div",114),x.NdJ("isOpenChange",function(t){return x.CHM(e),x.oxw().change(t)}),x.TgZ(16,"button",115),x._UZ(17,"span",116),x.TgZ(18,"span",113),x._uU(19,"Filter"),x.qZA(),x.qZA(),x.TgZ(20,"div",117),x.NdJ("click",function(e){return e.stopPropagation()}),x.TgZ(21,"form",45,118),x.NdJ("ngSubmit",function(){return x.CHM(e),x.oxw().FilterData()}),x.TgZ(23,"div",119),x.TgZ(24,"div",120),x.TgZ(25,"label",55),x._uU(26,"Site"),x.qZA(),x.TgZ(27,"ng-select",60),x.NdJ("scrollToEnd",function(){return x.CHM(e),x.oxw().siteService.ScrollDown()})("ngModelChange",function(t){return x.CHM(e),x.oxw().siteService.singleresult=t}),x.YNc(28,ae,2,2,"ng-template",58),x.qZA(),x.qZA(),x.TgZ(29,"div",120),x.TgZ(30,"label",61),x._uU(31,"Inventory"),x.qZA(),x.TgZ(32,"ng-select",62),x.NdJ("scrollToEnd",function(){return x.CHM(e),x.oxw().inventoryService.ScrollDown()})("ngModelChange",function(t){return x.CHM(e),x.oxw().inventoryService.singleresult=t}),x.YNc(33,le,2,2,"ng-template",58),x.qZA(),x.qZA(),x.TgZ(34,"div",120),x.TgZ(35,"label",63),x._uU(36,"Task"),x.qZA(),x.TgZ(37,"ng-select",64),x.NdJ("scrollToEnd",function(){return x.CHM(e),x.oxw().taskService.ScrollDown()})("ngModelChange",function(t){return x.CHM(e),x.oxw().taskService.singleresult=t}),x.YNc(38,se,2,2,"ng-template",58),x.qZA(),x.qZA(),x.TgZ(39,"div",120),x.TgZ(40,"label",65),x._uU(41,"Sub Task"),x.qZA(),x.TgZ(42,"ng-select",66),x.NdJ("scrollToEnd",function(){return x.CHM(e),x.oxw().subtaskService.ScrollDown()})("ngModelChange",function(t){return x.CHM(e),x.oxw().subtaskService.singleresult=t}),x.YNc(43,ce,2,2,"ng-template",58),x.qZA(),x.qZA(),x.TgZ(44,"div",121),x.TgZ(45,"label",67),x._uU(46,"Challan No"),x.qZA(),x.TgZ(47,"input",68,69),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw().challanfilterNo=t}),x.qZA(),x.qZA(),x.qZA(),x.TgZ(49,"div",122),x.TgZ(50,"button",123),x.NdJ("click",function(t){x.CHM(e);const i=x.oxw();return i.clearfilterandloadnewdata(),i.toggleDropdown(t)}),x._uU(51," Clear Filter "),x.qZA(),x.TgZ(52,"button",124),x.NdJ("click",function(t){return x.CHM(e),x.oxw().toggleDropdown(t)}),x._UZ(53,"i",125),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw();x.xp6(6),x.Q6J("virtualScroll",!0)("items",e.ChallanLedger)("ngModel",e.searchLedger)("loading",e.ledgerService.loading),x.xp6(9),x.Q6J("isOpen",e.status.isOpen),x.xp6(5),x.ekj("show",e.status.isOpen),x.xp6(7),x.Q6J("virtualScroll",!0)("items",e.siteService.result)("ngModel",e.siteService.singleresult)("loading",e.siteService.loading),x.xp6(5),x.Q6J("virtualScroll",!0)("items",e.inventoryService.result)("ngModel",e.inventoryService.singleresult)("loading",e.inventoryService.loading),x.xp6(5),x.Q6J("virtualScroll",!0)("items",e.taskService.result)("ngModel",e.taskService.singleresult)("loading",e.taskService.loading),x.xp6(5),x.Q6J("virtualScroll",!0)("items",e.subtaskService.result)("ngModel",e.subtaskService.singleresult)("loading",e.subtaskService.loading),x.xp6(5),x.Q6J("ngModel",e.challanfilterNo)}}function ue(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",129),x.TgZ(1,"ul",103),x.TgZ(2,"li",130),x.TgZ(3,"ion-icon",131),x.NdJ("click",function(){return x.CHM(e),x.oxw().goback()}),x.qZA(),x.qZA(),x.TgZ(4,"li",130),x.TgZ(5,"ion-icon",132),x.NdJ("click",function(){return x.CHM(e),x.oxw().advSearchM()}),x.qZA(),x.qZA(),x.TgZ(6,"li",133),x.TgZ(7,"div",134),x.TgZ(8,"strong"),x._uU(9,"Challan List"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(10,"li",135),x.TgZ(11,"ion-icon",136),x.NdJ("click",function(t){return x.CHM(e),x.oxw().sortPopover(t)}),x.qZA(),x.qZA(),x.qZA(),x.qZA()}}function ge(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",142),x.TgZ(1,"div",143),x.TgZ(2,"div",144),x.TgZ(3,"strong"),x._uU(4,"Challan List"),x.qZA(),x.qZA(),x.TgZ(5,"div",145),x.TgZ(6,"label",146),x.TgZ(7,"input",52),x.NdJ("change",function(){return x.CHM(e),x.oxw(2).FilterData()})("ngModelChange",function(t){return x.CHM(e),x.oxw(2).isChallanPending=t}),x.qZA(),x._UZ(8,"span",53),x.qZA(),x.TgZ(9,"span",147),x._uU(10,"Pending Challan"),x.qZA(),x.qZA(),x.TgZ(11,"div",148),x.TgZ(12,"div",149),x._uU(13),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(2);x.xp6(7),x.Q6J("ngModel",e.isChallanPending),x.xp6(6),x.Oqu(e.challanService.currentShowing)}}function he(e,t){if(1&e&&(x.TgZ(0,"span",181),x._uU(1),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(1),x.hij("voucher no :",e.ChlnVNo,"")}}function pe(e,t){if(1&e&&(x.TgZ(0,"span",181),x._uU(1),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(1),x.hij("amount : ",e.VAmount,"")}}function fe(e,t){if(1&e&&(x.TgZ(0,"a",183),x.NdJ("click",function(e){return e.stopPropagation()}),x._uU(1),x.qZA()),2&e){const e=t.index;x.s9C("href",t.$implicit.src,x.LSH),x.xp6(1),x.hij("Challan-",e+1," ")}}function me(e,t){if(1&e&&(x.TgZ(0,"div"),x.YNc(1,fe,2,2,"a",182),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(1),x.Q6J("ngForOf",e.UpI)}}function Ze(e,t){1&e&&(x.TgZ(0,"span",184),x._uU(1,"Billed"),x.qZA())}function Te(e,t){1&e&&(x.TgZ(0,"span",185),x._uU(1,"Bill Pending"),x.qZA())}function Ae(e,t){if(1&e&&(x.TgZ(0,"tr"),x.TgZ(1,"td"),x._uU(2),x.qZA(),x.TgZ(3,"td"),x._uU(4),x.qZA(),x.TgZ(5,"td"),x._uU(6),x.qZA(),x.TgZ(7,"td"),x._uU(8),x.qZA(),x.TgZ(9,"td"),x._uU(10),x.qZA(),x.TgZ(11,"td"),x._uU(12),x.qZA(),x.TgZ(13,"td"),x._uU(14),x.ALo(15,"indianCurrency"),x.qZA(),x.qZA()),2&e){const e=t.$implicit;x.xp6(2),x.Oqu(e.InvNm),x.xp6(2),x.Oqu(e.InvHei),x.xp6(2),x.Oqu(e.InvWid),x.xp6(2),x.Oqu(e.InvLen),x.xp6(2),x.Oqu(e.InvQty),x.xp6(2),x.Oqu(e.InvRt),x.xp6(2),x.Oqu(x.lcZ(15,7,e.TtlAmt))}}function ve(e,t){if(1&e&&(x.TgZ(0,"table",186),x.TgZ(1,"tr"),x.TgZ(2,"th"),x._uU(3,"Inventory Name"),x.qZA(),x.TgZ(4,"th"),x._uU(5,"Height"),x.qZA(),x.TgZ(6,"th"),x._uU(7,"Width"),x.qZA(),x.TgZ(8,"th"),x._uU(9,"Length"),x.qZA(),x.TgZ(10,"th"),x._uU(11,"QTY"),x.qZA(),x.TgZ(12,"th"),x._uU(13,"Rate"),x.qZA(),x.TgZ(14,"th"),x._uU(15,"Amount"),x.qZA(),x.qZA(),x.YNc(16,Ae,16,9,"tr",187),x.qZA()),2&e){const e=x.oxw(),t=e.index,i=e.$implicit,n=x.oxw(3);x.Q6J("hidden",!n.showNestedTable[t]),x.xp6(16),x.Q6J("ngForOf",i.ChallanInv)}}function xe(e,t){if(1&e){const e=x.EpF();x.ynx(0,167),x.TgZ(1,"tr",168),x.NdJ("keydown.enter",function(){const t=x.CHM(e).$implicit;return x.oxw(3).editOnArrowEvent(t.UIDN)})("keydown.arrowdown",function(){const t=x.CHM(e).index;return x.oxw(3).challanService.arrowDownEvent(t+151)})("keydown.arrowup",function(){const t=x.CHM(e).index;return x.oxw(3).challanService.arrowUpEvent(t+149)})("click",function(){const t=x.CHM(e).index;return x.oxw(3).toggleNestedTable(t)}),x.TgZ(2,"td"),x.TgZ(3,"div",152),x.TgZ(4,"input",169),x.NdJ("ngModelChange",function(t){return x.CHM(e).$implicit.Ick=t}),x.qZA(),x._UZ(5,"label",170),x.qZA(),x.qZA(),x.TgZ(6,"td"),x._uU(7),x.qZA(),x.TgZ(8,"td"),x.TgZ(9,"a",171),x.NdJ("clickAllowed",function(){const t=x.CHM(e).$implicit;return x.oxw(3).openChallanpopup(t.UIDN)}),x._uU(10),x.qZA(),x.qZA(),x.TgZ(11,"td"),x._UZ(12,"dateformatter",172),x.qZA(),x.TgZ(13,"td"),x._uU(14),x.qZA(),x.TgZ(15,"td"),x._uU(16),x._UZ(17,"br"),x.TgZ(18,"span",173),x._uU(19),x.qZA(),x.qZA(),x.TgZ(20,"td"),x._uU(21),x.qZA(),x.TgZ(22,"td"),x._uU(23),x.qZA(),x.TgZ(24,"td"),x._uU(25),x._UZ(26,"br"),x.YNc(27,he,2,1,"span",174),x.YNc(28,pe,2,1,"span",174),x.qZA(),x.TgZ(29,"td"),x.YNc(30,me,2,1,"div",13),x.qZA(),x.TgZ(31,"td"),x.YNc(32,Ze,2,0,"span",175),x.YNc(33,Te,2,0,"span",176),x.qZA(),x.TgZ(34,"td"),x.TgZ(35,"a",177),x.NdJ("clickAllowed",function(){const t=x.CHM(e).$implicit;return x.oxw(3).challanService.delete(t.UIDN)}),x._UZ(36,"i",178),x.qZA(),x.qZA(),x.qZA(),x.TgZ(37,"tr"),x.TgZ(38,"td",179),x.YNc(39,ve,17,2,"table",180),x.qZA(),x.qZA(),x.BQk()}if(2&e){const e=t.$implicit,i=t.index,n=x.oxw(3);x.ekj("rowselected",e.billSelected),x.xp6(1),x.s9C("tabindex",i+150),x.xp6(3),x.MGl("id","item_",i,""),x.Q6J("checked",e.Ick)("ngModel",e.Ick),x.xp6(1),x.MGl("for","item_",i,""),x.xp6(2),x.hij(" ",e.SrNo," "),x.xp6(2),x.Q6J("SignupId",n.SignupId)("UserId",n.UserId),x.xp6(1),x.hij(" ",e.CN," "),x.xp6(2),x.s9C("dateValue",e.MtD),x.xp6(2),x.Oqu(e.StNm),x.xp6(2),x.hij(" ",e.TNm," "),x.xp6(3),x.hij(" ",e.SbTNm,""),x.xp6(2),x.Oqu(e.LdNm),x.xp6(2),x.Oqu(e.UsrNm),x.xp6(2),x.hij(" ",e.Narr,""),x.xp6(2),x.Q6J("ngIf",null!=e.ChlnVNo),x.xp6(1),x.Q6J("ngIf",null!=e.VAmount),x.xp6(2),x.Q6J("ngIf",null!=e.UpI&&e.UpI.length>0),x.xp6(2),x.Q6J("ngIf",1==e.IsBd),x.xp6(1),x.Q6J("ngIf",0==e.IsBd),x.xp6(2),x.Q6J("SignupId",n.SignupId)("UserId",n.UserId),x.xp6(4),x.Q6J("ngIf",null!=e.ChallanInv&&e.ChallanInv.length>0)}}function Ie(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"table",150),x.TgZ(1,"thead",151),x.TgZ(2,"tr"),x.TgZ(3,"th"),x.TgZ(4,"div",152),x.TgZ(5,"input",153),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw(2).selectedAll=t})("change",function(t){return x.CHM(e),x.oxw(2).selectAllchange(t)}),x.qZA(),x._UZ(6,"label",154),x.qZA(),x.qZA(),x.TgZ(7,"th",155),x._uU(8,"Sr No"),x.qZA(),x.TgZ(9,"th",156),x._uU(10,"Challan No"),x.qZA(),x.TgZ(11,"th",157),x._uU(12,"Date"),x.qZA(),x.TgZ(13,"th",158),x._uU(14,"Site"),x.qZA(),x.TgZ(15,"th",159),x._uU(16,"Task/Sub Task"),x.qZA(),x.TgZ(17,"th",160),x._uU(18,"Ledger"),x.qZA(),x.TgZ(19,"th",161),x._uU(20,"User Name"),x.qZA(),x.TgZ(21,"th",162),x._uU(22,"Narration"),x.qZA(),x.TgZ(23,"th"),x._uU(24,"Attachment"),x.qZA(),x.TgZ(25,"th",163),x._uU(26,"Bill Status"),x.qZA(),x.TgZ(27,"th"),x._uU(28,"Action"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(29,"tbody",164,165),x.YNc(31,xe,40,26,"ng-container",166),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(2);x.xp6(5),x.Q6J("checked",e.selectedAll)("ngModel",e.selectedAll),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(4),x.Q6J("dirsort",e.challanService),x.xp6(6),x.Q6J("ngForOf",e.challanService.result)}}function Le(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",142),x.TgZ(1,"div",143),x.TgZ(2,"div",144),x.TgZ(3,"strong"),x._uU(4,"Challan List"),x.qZA(),x.qZA(),x.TgZ(5,"div",145),x.TgZ(6,"label",146),x.TgZ(7,"input",52),x.NdJ("change",function(){return x.CHM(e),x.oxw(3).FilterData()})("ngModelChange",function(t){return x.CHM(e),x.oxw(3).isChallanPending=t}),x.qZA(),x._UZ(8,"span",53),x.qZA(),x.TgZ(9,"span",147),x._uU(10,"Pending Challan"),x.qZA(),x.qZA(),x.TgZ(11,"div",148),x.TgZ(12,"div",149),x._uU(13),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(3);x.xp6(7),x.Q6J("ngModel",e.isChallanPending),x.xp6(6),x.Oqu(e.challanService.currentShowing)}}function we(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",188),x.YNc(1,Le,14,2,"div",138),x.TgZ(2,"table",189),x.TgZ(3,"thead",151),x.TgZ(4,"tr"),x.TgZ(5,"th"),x.TgZ(6,"div",152),x.TgZ(7,"input",153),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw(2).selectedAll=t})("change",function(t){return x.CHM(e),x.oxw(2).selectAllchange(t)}),x.qZA(),x._UZ(8,"label",154),x.qZA(),x.qZA(),x.TgZ(9,"th",155),x._uU(10,"Sr No"),x.qZA(),x.TgZ(11,"th",156),x._uU(12,"Challan No"),x.qZA(),x.TgZ(13,"th",157),x._uU(14,"Date"),x.qZA(),x.TgZ(15,"th",159),x._uU(16,"Task"),x.qZA(),x.TgZ(17,"th",190),x._uU(18,"Inventory"),x.qZA(),x.TgZ(19,"th",160),x._uU(20,"Ledger"),x.qZA(),x.TgZ(21,"th",158),x._uU(22,"Site"),x.qZA(),x.TgZ(23,"th",161),x._uU(24,"User Name"),x.qZA(),x.TgZ(25,"th",191),x._uU(26,"Quantity"),x.qZA(),x.TgZ(27,"th",192),x._uU(28,"Rate/ Unit"),x.qZA(),x.TgZ(29,"th",193),x._uU(30,"Total Amount"),x.qZA(),x.TgZ(31,"th",162),x._uU(32,"Narration"),x.qZA(),x.TgZ(33,"th"),x._uU(34,"challan copy"),x.qZA(),x.TgZ(35,"th",163),x._uU(36,"Bill Status"),x.qZA(),x.TgZ(37,"th"),x._uU(38,"Action"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(2);x.xp6(1),x.Q6J("ngIf",0==(e.challanService.isMobile||e.challanService.IsMobileview)),x.xp6(6),x.Q6J("checked",e.selectedAll)("ngModel",e.selectedAll),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(2),x.Q6J("dirsort",e.challanService),x.xp6(4),x.Q6J("dirsort",e.challanService)}}function be(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",137),x.YNc(1,ge,14,2,"div",138),x.TgZ(2,"div",139),x.NdJ("scrolled",function(t){return x.CHM(e),x.oxw().onChallanScroll(t)}),x.YNc(3,Ie,32,12,"table",140),x.qZA(),x.YNc(4,we,39,16,"div",141),x.qZA()}if(2&e){const e=x.oxw();x.xp6(1),x.Q6J("ngIf",0==(e.challanService.isMobile||e.challanService.IsMobileview)),x.xp6(1),x.Q6J("scrollWindow",!0),x.xp6(1),x.Q6J("ngIf",e.challanService.result.length>0),x.xp6(1),x.Q6J("ngIf",e.challanService.result.length>0)}}function Ce(e,t){if(1&e&&(x.TgZ(0,"ion-col",214),x.TgZ(1,"div",181),x._uU(2," Sr no:"),x.qZA(),x._uU(3),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(3),x.hij(" ",e.SrNo," ")}}function qe(e,t){if(1&e&&(x.TgZ(0,"ion-col",214),x.TgZ(1,"div",181),x._uU(2," Challan No:"),x.qZA(),x._uU(3),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(3),x.hij(" ",e.CN," ")}}function Se(e,t){if(1&e&&(x.TgZ(0,"ion-col",214),x.TgZ(1,"div",181),x._uU(2," Username:"),x.qZA(),x._uU(3),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(3),x.hij(" ",e.UsrNm," ")}}function Me(e,t){if(1&e&&(x.TgZ(0,"ion-col",214),x.TgZ(1,"div",181),x._uU(2," Ledger:"),x.qZA(),x._uU(3),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(3),x.hij(" ",e.LdNm," ")}}function ye(e,t){1&e&&(x.TgZ(0,"span",184),x._uU(1,"Billed"),x.qZA())}function Ne(e,t){1&e&&(x.TgZ(0,"span",185),x._uU(1,"Bill Pending"),x.qZA())}function De(e,t){if(1&e&&(x.TgZ(0,"ion-col",204),x._uU(1),x.ALo(2,"indianCurrency"),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(1),x.hij(" Amt: ",x.lcZ(2,1,e.TA)," ")}}function _e(e,t){if(1&e&&(x.TgZ(0,"ion-col",214),x.TgZ(1,"div",181),x._uU(2," Site:"),x.qZA(),x._uU(3),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(3),x.hij(" ",e.StNm," ")}}function Ue(e,t){if(1&e&&(x.TgZ(0,"ion-col",214),x.TgZ(1,"div",181),x._uU(2," Narration:"),x.qZA(),x._uU(3),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(3),x.hij(" ",e.Narr," ")}}function ke(e,t){if(1&e&&(x.TgZ(0,"ion-col",215),x.TgZ(1,"div",181),x._uU(2," Task:"),x.qZA(),x._uU(3),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(3),x.hij(" ",e.TNm," ")}}function Je(e,t){if(1&e&&(x.TgZ(0,"ion-col",216),x.TgZ(1,"div",181),x._uU(2," Inventory:"),x.qZA(),x._uU(3),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(3),x.hij(" ",e.InvNm," ")}}function Ve(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"ion-col",217),x.TgZ(1,"a",218),x.NdJ("click",function(){x.CHM(e);const t=x.oxw().$implicit;return x.oxw(2).generateBillPopupMobile(t.UIDN)}),x._uU(2," Generate Bill "),x.qZA(),x.qZA()}}function Re(e,t){if(1&e&&(x.TgZ(0,"a",221),x.NdJ("click",function(e){return e.stopPropagation()}),x._uU(1),x.qZA()),2&e){const e=t.index;x.s9C("href",t.$implicit.src,x.LSH),x.xp6(1),x.hij("Challan-",e+1," ")}}function Qe(e,t){if(1&e&&(x.TgZ(0,"ion-col",219),x.YNc(1,Re,2,2,"a",220),x._UZ(2,"br"),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(1),x.Q6J("ngForOf",e.UpI)}}function Fe(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"a",222),x.NdJ("clickAllowed",function(){x.CHM(e);const t=x.oxw().$implicit;return x.oxw(2).openChallanpopup(t.UIDN)}),x._UZ(1,"ion-icon",223),x.qZA()}if(2&e){const e=x.oxw(3);x.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}const Ee=function(){return[]};function He(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"ion-card"),x.TgZ(1,"ion-row"),x.YNc(2,Ce,4,1,"ion-col",202),x.YNc(3,qe,4,1,"ion-col",202),x.YNc(4,Se,4,1,"ion-col",202),x.YNc(5,Me,4,1,"ion-col",202),x.TgZ(6,"ion-col",203),x.YNc(7,ye,2,0,"span",175),x.YNc(8,Ne,2,0,"span",176),x.qZA(),x.qZA(),x.TgZ(9,"ion-row"),x.TgZ(10,"ion-col"),x._UZ(11,"dateformatter",172),x.qZA(),x.TgZ(12,"ion-col",204),x._uU(13),x.qZA(),x.TgZ(14,"ion-col",204),x._uU(15),x.qZA(),x.YNc(16,De,3,3,"ion-col",205),x.qZA(),x.TgZ(17,"ion-row"),x.YNc(18,_e,4,1,"ion-col",202),x.YNc(19,Ue,4,1,"ion-col",202),x.YNc(20,ke,4,1,"ion-col",206),x.qZA(),x.TgZ(21,"ion-row"),x.YNc(22,Je,4,1,"ion-col",207),x.YNc(23,Ve,3,0,"ion-col",208),x.YNc(24,Qe,3,1,"ion-col",209),x.TgZ(25,"ion-col",210),x.YNc(26,Fe,2,2,"a",211),x.TgZ(27,"a",212),x.NdJ("clickAllowed",function(){const t=x.CHM(e).$implicit;return x.oxw(2).challanService.delete(t.UIDN)}),x._UZ(28,"ion-icon",213),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=t.$implicit,i=x.oxw(2);x.xp6(2),x.Q6J("ngIf",null!=e.SrNo),x.xp6(1),x.Q6J("ngIf",null!=e.CN),x.xp6(1),x.Q6J("ngIf",null!=e.UsrNm),x.xp6(1),x.Q6J("ngIf",null!=e.LdNm),x.xp6(2),x.Q6J("ngIf",1==e.IsBd),x.xp6(1),x.Q6J("ngIf",0==e.IsBd),x.xp6(3),x.s9C("dateValue",e.MtD),x.xp6(2),x.hij(" QTY: ",e.Qty," "),x.xp6(2),x.hij(" Rate: ",e.UA," "),x.xp6(1),x.Q6J("ngIf",null!=e.TA),x.xp6(2),x.Q6J("ngIf",null!=e.StNm),x.xp6(1),x.Q6J("ngIf",null!=e.Narr),x.xp6(1),x.Q6J("ngIf",null!=e.TNm),x.xp6(2),x.Q6J("ngIf",null!=e.InvNm),x.xp6(1),x.Q6J("ngIf",0==e.IsBd),x.xp6(1),x.Q6J("ngIf",e.UpI!=x.DdM(19,Ee)),x.xp6(2),x.Q6J("ngIf",!e.IsBd),x.xp6(1),x.Q6J("SignupId",i.SignupId)("UserId",i.UserId)}}function Oe(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",164),x.TgZ(1,"ion-content"),x.TgZ(2,"ion-refresher",194),x.NdJ("ionRefresh",function(t){return x.CHM(e),x.oxw().doRefresh(t)}),x._UZ(3,"ion-refresher-content",195),x.qZA(),x.TgZ(4,"ion-virtual-scroll",196,197),x.YNc(6,He,29,20,"ion-card",198),x.qZA(),x.TgZ(7,"ion-infinite-scroll",199,200),x.NdJ("ionInfinite",function(t){return x.CHM(e),x.oxw().onChallanScroll(t)}),x._UZ(9,"ion-infinite-scroll-content",201),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw();x.Udp("height",e.challanService.mobileContainer),x.xp6(4),x.Q6J("items",e.challanService.result),x.xp6(5),x.s9C("loadingText",e.challanService.nextloading)}}function Pe(e,t){1&e&&(x.TgZ(0,"ion-card",225),x.TgZ(1,"ion-row"),x.TgZ(2,"ion-col"),x._UZ(3,"ion-skeleton-text",226),x.qZA(),x.TgZ(4,"ion-col",227),x._UZ(5,"ion-skeleton-text",228),x.qZA(),x.qZA(),x.TgZ(6,"ion-row"),x.TgZ(7,"ion-col"),x._UZ(8,"ion-skeleton-text",229),x.qZA(),x.TgZ(9,"ion-col",227),x._UZ(10,"ion-skeleton-text",230),x.qZA(),x.qZA(),x.TgZ(11,"ion-row"),x.TgZ(12,"ion-col"),x._UZ(13,"ion-skeleton-text",226),x.qZA(),x.TgZ(14,"ion-col",227),x._UZ(15,"ion-skeleton-text",228),x.qZA(),x.qZA(),x.TgZ(16,"ion-row"),x.TgZ(17,"ion-col"),x._UZ(18,"ion-skeleton-text",229),x.qZA(),x.TgZ(19,"ion-col"),x._UZ(20,"ion-skeleton-text",229),x.qZA(),x.TgZ(21,"ion-col"),x._UZ(22,"ion-skeleton-text",231),x.qZA(),x.TgZ(23,"ion-col",227),x._UZ(24,"ion-skeleton-text",232),x.qZA(),x.qZA(),x.qZA())}function Ge(e,t){if(1&e&&(x.TgZ(0,"div"),x.YNc(1,Pe,25,0,"ion-card",224),x.qZA()),2&e){const e=x.oxw();x.xp6(1),x.Q6J("ngForOf",e.challanService.noImageRepeat)}}function $e(e,t){1&e&&(x.TgZ(0,"tr"),x.TgZ(1,"td",234),x._UZ(2,"ion-skeleton-text",228),x.qZA(),x.TgZ(3,"td"),x._UZ(4,"ion-skeleton-text",226),x.qZA(),x.TgZ(5,"td"),x._UZ(6,"ion-skeleton-text",226),x.qZA(),x.TgZ(7,"td"),x._UZ(8,"ion-skeleton-text",226),x.qZA(),x.TgZ(9,"td"),x._UZ(10,"ion-skeleton-text",226),x.qZA(),x.TgZ(11,"td"),x._UZ(12,"ion-skeleton-text",226),x.qZA(),x.TgZ(13,"td"),x._UZ(14,"ion-skeleton-text",226),x.qZA(),x.TgZ(15,"td"),x._UZ(16,"ion-skeleton-text",226),x.qZA(),x.TgZ(17,"td"),x._UZ(18,"ion-skeleton-text",226),x.qZA(),x.TgZ(19,"td"),x._UZ(20,"ion-skeleton-text",226),x.qZA(),x.TgZ(21,"td"),x._UZ(22,"ion-skeleton-text",226),x.qZA(),x.TgZ(23,"td",235),x._UZ(24,"ion-skeleton-text",226),x.qZA(),x.TgZ(25,"td"),x._UZ(26,"ion-skeleton-text",226),x.qZA(),x.TgZ(27,"td"),x._UZ(28,"ion-skeleton-text",226),x.qZA(),x.TgZ(29,"td"),x._UZ(30,"ion-skeleton-text",226),x.qZA(),x.qZA())}function Be(e,t){if(1&e&&(x.TgZ(0,"div"),x.TgZ(1,"table",233),x.TgZ(2,"thead",151),x.TgZ(3,"tr"),x.TgZ(4,"th",234),x._UZ(5,"ion-skeleton-text",228),x.qZA(),x.TgZ(6,"th"),x._UZ(7,"ion-skeleton-text",226),x.qZA(),x.TgZ(8,"th"),x._UZ(9,"ion-skeleton-text",226),x.qZA(),x.TgZ(10,"th"),x._UZ(11,"ion-skeleton-text",226),x.qZA(),x.TgZ(12,"th"),x._UZ(13,"ion-skeleton-text",226),x.qZA(),x.TgZ(14,"th"),x._UZ(15,"ion-skeleton-text",226),x.qZA(),x.TgZ(16,"th"),x._UZ(17,"ion-skeleton-text",226),x.qZA(),x.TgZ(18,"th"),x._UZ(19,"ion-skeleton-text",226),x.qZA(),x.TgZ(20,"th"),x._UZ(21,"ion-skeleton-text",226),x.qZA(),x.TgZ(22,"th"),x._UZ(23,"ion-skeleton-text",226),x.qZA(),x.TgZ(24,"th"),x._UZ(25,"ion-skeleton-text",226),x.qZA(),x.TgZ(26,"th",235),x._UZ(27,"ion-skeleton-text",226),x.qZA(),x.TgZ(28,"th"),x._UZ(29,"ion-skeleton-text",226),x.qZA(),x.TgZ(30,"th"),x._UZ(31,"ion-skeleton-text",226),x.qZA(),x.TgZ(32,"th"),x._UZ(33,"ion-skeleton-text",226),x.qZA(),x.qZA(),x.qZA(),x.TgZ(34,"tbody",164),x.YNc(35,$e,31,0,"tr",187),x.qZA(),x.qZA(),x.qZA()),2&e){const e=x.oxw();x.xp6(35),x.Q6J("ngForOf",e.challanService.noImageRepeat)}}function Ye(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div"),x._UZ(1,"div",237),x._UZ(2,"br"),x.TgZ(3,"div",238),x._uU(4,"Add your first record by clicking in below button. "),x._UZ(5,"br"),x._UZ(6,"br"),x.TgZ(7,"input",239),x.NdJ("clickAllowed",function(){return x.CHM(e),x.oxw(2).openChallanpopup("add")}),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(2);x.xp6(7),x.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function je(e,t){if(1&e&&(x.TgZ(0,"div",236),x._UZ(1,"br"),x._UZ(2,"br"),x.YNc(3,Ye,8,2,"div",13),x._UZ(4,"br"),x._UZ(5,"br"),x.qZA()),2&e){const e=x.oxw();x.xp6(3),x.Q6J("ngIf",e.noDataImage)}}function Ke(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"app-challan-addedit",240),x.NdJ("ChallanredirectAction",function(t){return x.CHM(e),x.oxw().onChallanSubmit(t)}),x.qZA()}if(2&e){const e=x.oxw();x.Q6J("ChallanredirectOnCancel",!1)("ChallanId",e.ChallanId)}}function ze(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"Purchase Ledger is required"),x.qZA())}function We(e,t){if(1&e&&(x.TgZ(0,"div",270),x.YNc(1,ze,2,0,"div",13),x.qZA()),2&e){x.oxw();const e=x.MAs(21);x.xp6(1),x.Q6J("ngIf",e.errors.required)}}function Xe(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"Date is required"),x.qZA())}function et(e,t){if(1&e&&(x.TgZ(0,"div",270),x.YNc(1,Xe,2,0,"div",13),x.qZA()),2&e){x.oxw();const e=x.MAs(32);x.xp6(1),x.Q6J("ngIf",e.errors.required)}}function tt(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"Quantity is required"),x.qZA())}function it(e,t){if(1&e&&(x.TgZ(0,"div",270),x.YNc(1,tt,2,0,"div",13),x.TgZ(2,"div",277),x._uU(3," Quantity should contain only numbers "),x.qZA(),x.qZA()),2&e){x.oxw();const e=x.MAs(3);x.xp6(1),x.Q6J("ngIf",e.errors.required),x.xp6(1),x.Q6J("hidden",!e.hasError("pattern"))}}function nt(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"Unit price is required"),x.qZA())}function rt(e,t){if(1&e&&(x.TgZ(0,"div",270),x.YNc(1,nt,2,0,"div",13),x.TgZ(2,"div",277),x._uU(3," Unit price should contain only numbers "),x.qZA(),x.qZA()),2&e){x.oxw();const e=x.MAs(7);x.xp6(1),x.Q6J("ngIf",e.errors.required),x.xp6(1),x.Q6J("hidden",!e.hasError("pattern"))}}function ot(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1," Total amount is required "),x.qZA())}function at(e,t){if(1&e&&(x.TgZ(0,"div",270),x.YNc(1,ot,2,0,"div",13),x.TgZ(2,"div",277),x._uU(3," Total amount should contain only numbers "),x.qZA(),x.qZA()),2&e){x.oxw();const e=x.MAs(11);x.xp6(1),x.Q6J("ngIf",e.errors.required),x.xp6(1),x.Q6J("hidden",!e.hasError("pattern"))}}const lt=function(e){return{"is-invalid":e}};function st(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"tr",264),x.TgZ(1,"td",265),x.TgZ(2,"input",271,272),x.NdJ("change",function(){const t=x.CHM(e).$implicit,i=x.oxw(2);return i.calculationPurchase(),i.calculateTotal(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.InvQty=t}),x.qZA(),x.YNc(4,it,4,2,"div",255),x.qZA(),x.TgZ(5,"td",266),x.TgZ(6,"input",273,274),x.NdJ("change",function(){const t=x.CHM(e).$implicit,i=x.oxw(2);return i.calculationPurchase(),i.calculateTotal(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.InvRt=t}),x.qZA(),x.YNc(8,rt,4,2,"div",255),x.qZA(),x.TgZ(9,"td",266),x.TgZ(10,"input",275,276),x.NdJ("change",function(){return x.CHM(e),x.oxw(2).calculationPurchase()})("ngModelChange",function(t){return x.CHM(e).$implicit.TtlAmt=t}),x.qZA(),x.YNc(12,at,4,2,"div",255),x.qZA(),x.qZA()}if(2&e){const e=t.$implicit,i=t.index,n=x.MAs(3),r=x.MAs(7),o=x.MAs(11);x.oxw();const a=x.MAs(15);x.xp6(2),x.MGl("name","qty__",i,""),x.Q6J("ngClass",x.VKq(12,lt,a.submitted&&n.invalid))("ngModel",e.InvQty),x.xp6(2),x.Q6J("ngIf",a.submitted&&n.invalid),x.xp6(2),x.MGl("name","UA__",i,""),x.Q6J("ngClass",x.VKq(14,lt,a.submitted&&r.invalid))("ngModel",e.InvRt),x.xp6(2),x.Q6J("ngIf",a.submitted&&r.invalid),x.xp6(2),x.MGl("name","TA__",i,""),x.Q6J("ngClass",x.VKq(16,lt,a.submitted&&o.invalid))("ngModel",e.TtlAmt),x.xp6(2),x.Q6J("ngIf",a.submitted&&o.invalid)}}function ct(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",241),x.TgZ(1,"div",242),x.TgZ(2,"div",41),x.TgZ(3,"h4",243),x._uU(4,"Generate Bill"),x.qZA(),x.TgZ(5,"h4",244),x._uU(6),x.qZA(),x.TgZ(7,"button",43),x.NdJ("click",function(){return x.CHM(e),x.oxw(),x.MAs(39).hide()}),x.TgZ(8,"span",44),x._uU(9,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(10,"div",83),x.TgZ(11,"div",245),x.TgZ(12,"div",246),x.TgZ(13,"div",247),x.TgZ(14,"form",248,249),x.NdJ("ngSubmit",function(){x.CHM(e);const t=x.MAs(15),i=x.oxw();return t.form.valid&&i.onGenerateBill()}),x.TgZ(16,"div",250),x.TgZ(17,"div",251),x.TgZ(18,"label",252),x._uU(19,"Select Purchase Account"),x.qZA(),x.TgZ(20,"ng-select",253,254),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw().purLedger=t}),x.qZA(),x.YNc(22,We,2,1,"div",255),x.qZA(),x.TgZ(23,"div",251),x.TgZ(24,"label",256),x._uU(25,"Select Tax Account"),x.qZA(),x.TgZ(26,"ng-select",257,258),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw().TaxLed=t})("change",function(){return x.CHM(e),x.oxw().calculationPurchase()}),x.qZA(),x.qZA(),x.TgZ(28,"div",251),x.TgZ(29,"label",259),x._uU(30,"Purchase Date"),x.qZA(),x.TgZ(31,"input",260,261),x.NdJ("selected",function(t){return x.CHM(e),x.oxw().onDateSelect(t)}),x.qZA(),x.YNc(33,et,2,1,"div",255),x.qZA(),x.TgZ(34,"div",262),x.TgZ(35,"table",263),x.TgZ(36,"thead"),x.TgZ(37,"tr",264),x.TgZ(38,"th",265),x._uU(39,"Qty"),x.qZA(),x.TgZ(40,"th",266),x._uU(41,"Rate/Unit"),x.qZA(),x.TgZ(42,"th",266),x._uU(43,"Total"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(44,"tbody"),x.YNc(45,st,13,18,"tr",267),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(46,"div",268),x.TgZ(47,"a",269),x.NdJ("click",function(){x.CHM(e);const t=x.oxw();return x.MAs(39).hide(),t.cleardata()}),x._uU(48,"Cancel"),x.qZA(),x.TgZ(49,"button",93),x._uU(50," Generate Bill "),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.MAs(15),t=x.MAs(21),i=x.MAs(32),n=x.oxw();x.xp6(6),x.hij("Total: ",n.totamount,""),x.xp6(14),x.Q6J("virtualScroll",!0)("ngClass",x.VKq(14,lt,e.submitted&&t.invalid))("items",n.purchaseLedger)("ngModel",n.purLedger)("loading",n.ledgerService.loading),x.xp6(2),x.Q6J("ngIf",e.submitted&&t.invalid),x.xp6(4),x.Q6J("items",n.TaxLedger)("ngModel",n.TaxLed)("loading",n.ledgerService.loading),x.xp6(5),x.Q6J("startDate",n.VDt)("ngClass",x.VKq(16,lt,e.submitted&&i.invalid)),x.xp6(2),x.Q6J("ngIf",i.invalid),x.xp6(12),x.Q6J("ngForOf",n.selectedchns)}}function dt(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"Purchase Ledger is required"),x.qZA())}function ut(e,t){if(1&e&&(x.TgZ(0,"div",270),x.YNc(1,dt,2,0,"div",13),x.qZA()),2&e){x.oxw();const e=x.MAs(19);x.xp6(1),x.Q6J("ngIf",e.errors.required)}}function gt(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"Date is required"),x.qZA())}function ht(e,t){if(1&e&&(x.TgZ(0,"div",270),x.YNc(1,gt,2,0,"div",13),x.qZA()),2&e){x.oxw();const e=x.MAs(30);x.xp6(1),x.Q6J("ngIf",e.errors.required)}}function pt(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"Quantity is required"),x.qZA())}function ft(e,t){if(1&e&&(x.TgZ(0,"div",270),x.YNc(1,pt,2,0,"div",13),x.TgZ(2,"div",277),x._uU(3," Quantity should contain only numbers "),x.qZA(),x.qZA()),2&e){x.oxw();const e=x.MAs(5);x.xp6(1),x.Q6J("ngIf",e.errors.required),x.xp6(1),x.Q6J("hidden",!e.hasError("pattern"))}}function mt(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"Unit price is required"),x.qZA())}function Zt(e,t){if(1&e&&(x.TgZ(0,"div",270),x.YNc(1,mt,2,0,"div",13),x.TgZ(2,"div",277),x._uU(3," Unit price should contain only numbers "),x.qZA(),x.qZA()),2&e){x.oxw();const e=x.MAs(9);x.xp6(1),x.Q6J("ngIf",e.errors.required),x.xp6(1),x.Q6J("hidden",!e.hasError("pattern"))}}function Tt(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1," Total amount is required "),x.qZA())}function At(e,t){if(1&e&&(x.TgZ(0,"div",270),x.YNc(1,Tt,2,0,"div",13),x.TgZ(2,"div",277),x._uU(3," Total amount should contain only numbers "),x.qZA(),x.qZA()),2&e){x.oxw();const e=x.MAs(13);x.xp6(1),x.Q6J("ngIf",e.errors.required),x.xp6(1),x.Q6J("hidden",!e.hasError("pattern"))}}function vt(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"tr",264),x.TgZ(1,"td",283),x._uU(2),x.qZA(),x.TgZ(3,"td",281),x.TgZ(4,"input",271,272),x.NdJ("change",function(){const t=x.CHM(e).$implicit,i=x.oxw(2);return i.calculationPurchase(),i.calculateTotal(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.Qty=t}),x.qZA(),x.YNc(6,ft,4,2,"div",255),x.qZA(),x.TgZ(7,"td",282),x.TgZ(8,"input",273,274),x.NdJ("change",function(){const t=x.CHM(e).$implicit,i=x.oxw(2);return i.calculationPurchase(),i.calculateTotal(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.UA=t}),x.qZA(),x.YNc(10,Zt,4,2,"div",255),x.qZA(),x.TgZ(11,"td",282),x.TgZ(12,"input",275,276),x.NdJ("change",function(){return x.CHM(e),x.oxw(2).calculationPurchase()})("ngModelChange",function(t){return x.CHM(e).$implicit.TA=t}),x.qZA(),x.YNc(14,At,4,2,"div",255),x.qZA(),x.qZA()}if(2&e){const e=t.$implicit,i=t.index,n=x.MAs(5),r=x.MAs(9),o=x.MAs(13);x.oxw();const a=x.MAs(11);x.xp6(2),x.Oqu(e.CN),x.xp6(2),x.MGl("name","qty__",i,""),x.Q6J("ngClass",x.VKq(13,lt,a.submitted&&n.invalid))("ngModel",e.Qty),x.xp6(2),x.Q6J("ngIf",a.submitted&&n.invalid),x.xp6(2),x.MGl("name","UA__",i,""),x.Q6J("ngClass",x.VKq(15,lt,a.submitted&&r.invalid))("ngModel",e.UA),x.xp6(2),x.Q6J("ngIf",a.submitted&&r.invalid),x.xp6(2),x.MGl("name","TA__",i,""),x.Q6J("ngClass",x.VKq(17,lt,a.submitted&&o.invalid))("ngModel",e.TA),x.xp6(2),x.Q6J("ngIf",a.submitted&&o.invalid)}}function xt(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",39),x.TgZ(1,"div",278),x.TgZ(2,"div",41),x.TgZ(3,"h4",243),x._uU(4,"Generate Bill"),x.qZA(),x.TgZ(5,"h4",244),x._uU(6),x.qZA(),x.TgZ(7,"button",43),x.NdJ("click",function(){return x.CHM(e),x.oxw(),x.MAs(42).hide()}),x.TgZ(8,"span",44),x._uU(9,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(10,"form",248,249),x.NdJ("ngSubmit",function(){x.CHM(e);const t=x.MAs(11),i=x.oxw();return t.form.valid&&i.onGenerateBill()}),x.TgZ(12,"div",279),x.TgZ(13,"div",143),x.TgZ(14,"div",143),x.TgZ(15,"div",280),x.TgZ(16,"label",252),x._uU(17,"Select Purchase Account"),x.qZA(),x.TgZ(18,"ng-select",253,254),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw().purLedger=t}),x.qZA(),x.YNc(20,ut,2,1,"div",255),x.qZA(),x.TgZ(21,"div",280),x.TgZ(22,"label",256),x._uU(23,"Select Tax Account"),x.qZA(),x.TgZ(24,"ng-select",257,258),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw().TaxLed=t})("change",function(){return x.CHM(e),x.oxw().calculationPurchase()}),x.qZA(),x.qZA(),x.TgZ(26,"div",280),x.TgZ(27,"label",259),x._uU(28,"Purchase Date"),x.qZA(),x.TgZ(29,"input",260,261),x.NdJ("selected",function(t){return x.CHM(e),x.oxw().onDateSelect(t)}),x.qZA(),x.YNc(31,ht,2,1,"div",255),x.qZA(),x.TgZ(32,"div",262),x.TgZ(33,"table",263),x.TgZ(34,"thead"),x.TgZ(35,"tr",264),x.TgZ(36,"th",281),x._uU(37,"#No"),x.qZA(),x.TgZ(38,"th",281),x._uU(39,"Qty"),x.qZA(),x.TgZ(40,"th",282),x._uU(41,"Rate/Unit"),x.qZA(),x.TgZ(42,"th",282),x._uU(43,"Total"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(44,"tbody"),x.YNc(45,vt,15,19,"tr",267),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(46,"nav",70),x.TgZ(47,"ul",71),x.TgZ(48,"li",72),x.TgZ(49,"button",94),x.NdJ("click",function(){x.CHM(e);const t=x.oxw();return x.MAs(42).hide(),t.cleardata()}),x._uU(50,"Close"),x.qZA(),x.qZA(),x.TgZ(51,"li",75),x.TgZ(52,"button",93),x._uU(53,"Generate Bill"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.MAs(11),t=x.MAs(19),i=x.MAs(30),n=x.oxw();x.xp6(6),x.hij("Total: ",n.totamount,""),x.xp6(12),x.Q6J("virtualScroll",!0)("ngClass",x.VKq(14,lt,e.submitted&&t.invalid))("items",n.purchaseLedger)("ngModel",n.purLedger)("loading",n.ledgerService.loading),x.xp6(2),x.Q6J("ngIf",e.submitted&&t.invalid),x.xp6(4),x.Q6J("items",n.TaxLedger)("ngModel",n.TaxLed)("loading",n.ledgerService.loading),x.xp6(5),x.Q6J("startDate",n.VDt)("ngClass",x.VKq(16,lt,e.submitted&&i.invalid)),x.xp6(2),x.Q6J("ngIf",i.invalid),x.xp6(14),x.Q6J("ngForOf",n.selectedchalans)}}function It(e,t){if(1&e&&x._UZ(0,"app-ledgerhistory",284),2&e){const e=x.oxw();x.Q6J("LedgId",e._LedgerId)("IsCallasPopup",!0)}}function Lt(e,t){if(1&e&&(x.TgZ(0,"small",128),x._uU(1),x.qZA()),2&e){const e=x.oxw();x.xp6(1),x.AsE(" Loaded ",e.ledgerService.result.length," of ",e.ledgerService.totalItems," ")}}function wt(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"a"),x._uU(1),x.qZA(),x.TgZ(2,"a",126),x.TgZ(3,"i",127),x.NdJ("click",function(){const t=x.CHM(e).item;return x.oxw().OpenLedgerHistoryPopUp(t.UIDN)}),x.qZA(),x.qZA()}if(2&e){const e=t.item;x.xp6(1),x.Oqu(e.LN)}}function bt(e,t){if(1&e&&(x.TgZ(0,"small",128),x._uU(1),x.qZA()),2&e){const e=x.oxw();x.xp6(1),x.AsE(" Loaded ",e.siteService.result.length," of ",e.siteService.totalItems," ")}}function Ct(e,t){if(1&e&&(x.TgZ(0,"small",128),x._uU(1),x.qZA()),2&e){const e=x.oxw();x.xp6(1),x.AsE(" Loaded ",e.inventoryService.result.length," of ",e.inventoryService.totalItems," ")}}function qt(e,t){if(1&e&&(x.TgZ(0,"small",128),x._uU(1),x.qZA()),2&e){const e=x.oxw();x.xp6(1),x.AsE(" Loaded ",e.taskService.result.length," of ",e.taskService.totalItems," ")}}function St(e,t){if(1&e&&(x.TgZ(0,"small",128),x._uU(1),x.qZA()),2&e){const e=x.oxw();x.xp6(1),x.AsE(" Loaded ",e.subtaskService.result.length," of ",e.subtaskService.totalItems," ")}}function Mt(e,t){1&e&&(x.TgZ(0,"thead",151),x.TgZ(1,"tr"),x.TgZ(2,"th",291),x._uU(3,"Comments"),x.qZA(),x.TgZ(4,"th",292),x._uU(5,"Challan No"),x.qZA(),x.TgZ(6,"th",292),x._uU(7,"Challan Sr No"),x.qZA(),x.TgZ(8,"th",292),x._uU(9,"Challan Date"),x.qZA(),x.TgZ(10,"th",292),x._uU(11,"Task Name"),x.qZA(),x.TgZ(12,"th",292),x._uU(13,"Sub Task Name"),x.qZA(),x.TgZ(14,"th",293),x._uU(15,"Inventory Name"),x.qZA(),x.TgZ(16,"th",292),x._uU(17,"Site Name"),x.qZA(),x.TgZ(18,"th",292),x._uU(19,"Unit Name"),x.qZA(),x.TgZ(20,"th",293),x._uU(21,"Ledger Name"),x.qZA(),x.TgZ(22,"th",292),x._uU(23,"Length"),x.qZA(),x.TgZ(24,"th",292),x._uU(25,"Height"),x.qZA(),x.TgZ(26,"th",292),x._uU(27,"Width"),x.qZA(),x.TgZ(28,"th",292),x._uU(29,"Rate/Unit"),x.qZA(),x.TgZ(30,"th",292),x._uU(31,"Quantity"),x.qZA(),x.TgZ(32,"th",292),x._uU(33,"Total Amount"),x.qZA(),x.TgZ(34,"th",292),x._uU(35,"Vehicle No"),x.qZA(),x.TgZ(36,"th",292),x._uU(37,"Narration"),x.qZA(),x.qZA(),x.qZA())}function yt(e,t){if(1&e){const e=x.EpF();x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",294),x._uU(3),x.qZA(),x.TgZ(4,"td"),x.TgZ(5,"input",295),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.ChallanName=t}),x.qZA(),x.qZA(),x.TgZ(6,"td"),x.TgZ(7,"input",295),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.ChallanSrNo=t}),x.qZA(),x.qZA(),x.TgZ(8,"td"),x.TgZ(9,"input",296,297),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("selected",function(t){const i=x.CHM(e),n=i.index,r=i.$implicit;return x.oxw(2).ChnDtSelect(t,n,r)}),x.qZA(),x.qZA(),x.TgZ(11,"td"),x.TgZ(12,"ng-select",298,299),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("scrollToEnd",function(){return x.CHM(e),x.oxw(2).taskService.ScrollDown()})("ngModelChange",function(t){return x.CHM(e).$implicit.TaskName=t}),x.qZA(),x.qZA(),x.TgZ(14,"td"),x.TgZ(15,"ng-select",300,301),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("scrollToEnd",function(){return x.CHM(e),x.oxw(2).subtaskService.ScrollDown()})("ngModelChange",function(t){return x.CHM(e).$implicit.SubTaskName=t}),x.qZA(),x.qZA(),x.TgZ(17,"td"),x.TgZ(18,"ng-select",302,303),x.NdJ("scrollToEnd",function(){return x.CHM(e),x.oxw(2).inventoryService.ScrollDown()})("change",function(t){return x.CHM(e),x.oxw(2).SelectTaxLedger(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.InventoryName=t}),x.qZA(),x.qZA(),x.TgZ(21,"td"),x.TgZ(22,"ng-select",304),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("scrollToEnd",function(){return x.CHM(e),x.oxw(2).siteService.ScrollDown()})("ngModelChange",function(t){return x.CHM(e).$implicit.SiteName=t}),x.qZA(),x.qZA(),x.TgZ(23,"td"),x.TgZ(24,"ng-select",305),x.NdJ("scrollToEnd",function(){return x.CHM(e),x.oxw(2).unitService.ScrollDown()})("ngModelChange",function(t){return x.CHM(e).$implicit.UnitName=t}),x.qZA(),x.qZA(),x.TgZ(25,"td"),x.TgZ(26,"ng-select",306,307),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw(2).ledgerService.singleresult=t}),x.qZA(),x.qZA(),x.TgZ(29,"td"),x.TgZ(30,"input",295),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.Length=t}),x.qZA(),x.qZA(),x.TgZ(31,"td"),x.TgZ(32,"input",295),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.Height=t}),x.qZA(),x.qZA(),x.TgZ(33,"td"),x.TgZ(34,"input",295),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.Width=t}),x.qZA(),x.qZA(),x.TgZ(35,"td"),x.TgZ(36,"input",295),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.RateOrUnit=t}),x.qZA(),x.qZA(),x.TgZ(37,"td"),x.TgZ(38,"input",295),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.Quantity=t}),x.qZA(),x.qZA(),x.TgZ(39,"td"),x.TgZ(40,"input",295),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.TotalAmount=t}),x.qZA(),x.qZA(),x.TgZ(41,"td"),x.TgZ(42,"input",295),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.VehicleNo=t}),x.qZA(),x.qZA(),x.TgZ(43,"td"),x.TgZ(44,"input",295),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.Narration=t}),x.qZA(),x.qZA(),x.qZA(),x.BQk()}if(2&e){const e=t.$implicit,i=t.index,n=x.MAs(20),r=x.MAs(27),o=x.oxw(2),a=x.MAs(56);x.xp6(1),x.ekj("negative",e.invalidProp)("positive",e.RepeatContactProp),x.xp6(2),x.hij(" ",e.comments," "),x.xp6(2),x.MGl("name","ChallanNo_",i,""),x.MGl("id","ChallanNo_",i,""),x.Q6J("ngModel",e.ChallanName),x.xp6(2),x.MGl("name","ChallanSrNo_",i,""),x.MGl("id","ChallanSrNo_",i,""),x.Q6J("ngModel",e.ChallanSrNo),x.xp6(2),x.MGl("name","ChallanDate_",i,""),x.MGl("id","ChallanDate_",i,""),x.Q6J("startDate",e.ChallanDate),x.xp6(3),x.MGl("name","TaskName_",i,""),x.MGl("id","TaskName_",i,""),x.Q6J("virtualScroll",!0)("items",o.taskService.result)("ngModel",e.TaskName)("loading",o.taskService.loading),x.xp6(3),x.MGl("name","SubTaskName_",i,""),x.MGl("id","SubTaskName_",i,""),x.Q6J("virtualScroll",!0)("items",o.subtaskService.result)("ngModel",e.SubTaskName)("loading",o.subtaskService.loading),x.xp6(3),x.MGl("name","Inventory_",i,""),x.MGl("id","Inventory_",i,""),x.Q6J("virtualScroll",!0)("items",o.inventoryService.result)("ngClass",x.VKq(76,lt,a.submitted&&n.invalid))("ngModel",e.InventoryName)("loading",o.inventoryService.loading),x.xp6(4),x.MGl("name","SiteName_",i,""),x.MGl("id","SiteName_",i,""),x.Q6J("virtualScroll",!0)("items",o.siteService.result)("ngModel",e.SiteName)("loading",o.siteService.loading),x.xp6(2),x.MGl("name","UnitName_",i,""),x.MGl("id","UnitName_",i,""),x.Q6J("virtualScroll",!0)("items",o.unitService.result)("ngModel",e.UnitName)("loading",o.unitService.loading),x.xp6(2),x.MGl("name","LedgerName_",i,""),x.MGl("id","LedgerName_",i,""),x.Q6J("virtualScroll",!0)("ngClass",x.VKq(78,lt,a.submitted&&r.invalid))("items",o.ChallanLedger)("ngModel",o.ledgerService.singleresult)("loading",o.ledgerService.loading),x.xp6(4),x.MGl("name","Length_",i,""),x.MGl("id","Length_",i,""),x.Q6J("ngModel",e.Length),x.xp6(2),x.MGl("name","Height_",i,""),x.MGl("id","Height_",i,""),x.Q6J("ngModel",e.Height),x.xp6(2),x.MGl("name","Width_",i,""),x.MGl("id","Width_",i,""),x.Q6J("ngModel",e.Width),x.xp6(2),x.MGl("name","RateOrUnit_",i,""),x.MGl("id","RateOrUnit_",i,""),x.Q6J("ngModel",e.RateOrUnit),x.xp6(2),x.MGl("name","Quantity_",i,""),x.MGl("id","Quantity_",i,""),x.Q6J("ngModel",e.Quantity),x.xp6(2),x.MGl("name","TotalAmount_",i,""),x.MGl("id","TotalAmount_",i,""),x.Q6J("ngModel",e.TotalAmount),x.xp6(2),x.MGl("name","VehicleNo_",i,""),x.MGl("id","VehicleNo_",i,""),x.Q6J("ngModel",e.VehicleNo),x.xp6(2),x.MGl("name","Narration_",i,""),x.MGl("id","Narration_",i,""),x.Q6J("ngModel",e.Narration)}}function Nt(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",285),x.TgZ(1,"virtual-scroller",286,287),x.NdJ("vsUpdate",function(){return x.CHM(e),x.oxw().changeDetectorRef.detectChanges()}),x.TgZ(3,"table",288),x.YNc(4,Mt,38,0,"thead",289),x.TgZ(5,"tbody",164,165),x.YNc(7,yt,45,80,"ng-container",290),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.MAs(2),t=x.oxw(),i=x.MAs(145);x.xp6(1),x.Q6J("executeRefreshOutsideAngularZone",!0)("items",t.importeddataAPI)("parentScroll",i),x.xp6(3),x.Q6J("ngIf",t.importeddataAPI.length>0),x.xp6(3),x.Q6J("ngForOf",e.viewPortItems)("ngForTrackBy",t.ImportTrackByFunction)}}let Dt=(()=>{class e{constructor(e,t,i,n,r,o,a,l,s,c,d,u,g,h,p,Z){this.challanService=e,this.filterService=t,this.popoverController=i,this.route=n,this.page=r,this.inventoryService=o,this.taskService=a,this.subtaskService=l,this.siteService=s,this.ledgerService=c,this.unitService=d,this.router=u,this.changeDetectorRef=g,this.location=h,this.accountService=p,this.alert=Z,this.noDataImage=!1,this.Sbtaskselector=[],this.Taskselector=[],this.Invselector=[],this.Siteselector=[],this.taxLedImport=[],this.Ledgerselector=[],this.importeddataAPI=[],this.inValidEntry=[],this.isSubmited=!1,this.isBusy=!0,this._sgId=0,this.popupwindow="",this.isList=!0,this.isChallanPending=!0,this.isScrollEnabled=!0,this.ChallanLedger=[],this.searchLedger=null,this.showChallanModal=!1,this.showLedgHistory=!1,this.showNestedTable=[],this.ChallanId="",this.status={isOpen:!1},this.selectedchns=[],this.selectedchalans=[],this.showBillModal=!1,this.TaxLedger=[],this.purchaseLedger=[],this.totamount=0,this._LedgerId=0,this.currentScrollPosition=0,this.chalanFilter=new f.yz,this.selectedAll=!1,this.httpfunction=new m.r,this.sortarray=[{order:this.challanService.sortorder,column:"ChallanNo",title:"By Challan No"},{order:this.challanService.sortorder,column:"MaterialDate",title:"By Date"},{order:this.challanService.sortorder,column:"TaskName",title:"By Task Name"},{order:this.challanService.sortorder,column:"Name",title:"By Inventory Name"},{order:this.challanService.sortorder,column:"LedgerName",title:"By Ledger Name"},{order:this.challanService.sortorder,column:"SiteName",title:"By Site Name"},{order:this.challanService.sortorder,column:"TotalAmount",title:"By Total Amount"},{order:this.challanService.sortorder,column:"IsBilled",title:"By Bill Status"}],this.SignupId=this.challanService.getSignupId,this.UserId=this.challanService.GetUserId,this.isList=!0,this.challanService.ExportColumn=[{title:"CNo",dataKey:"CN",size:40},{title:"Task",dataKey:"TNm",size:100},{title:"Sub Task",dataKey:"SbTNm",size:80},{title:"Inventory",dataKey:"InvNm",size:100},{title:"Unit",dataKey:"UntNm",size:80},{title:"Ledger",dataKey:"LdNm",size:120},{title:"Site",dataKey:"StNm",size:100},{title:"Qty",dataKey:"Qty",size:40},{title:"Amount",dataKey:"UA",size:50},{title:"Total Amount",dataKey:"TA",size:50},{title:"Narration",dataKey:"Narr",size:150}],this.challanService.Orientationtype=1,this.challanService.ExportName="Challan_List",this.challanService.ExportCompanyName=this.challanService.getCompanyData.CN}onPopState(e){this.isList||(this.isList=!this.isList),this.showChallanModal?this.showChallanModal=!this.showChallanModal:this.showLedgHistory&&(this.showLedgHistory=!this.showLedgHistory)}onLedgHistoryScroll(){0==this.showLedgHistory&&this.challanService.ScrollDown(),0==this.showChallanModal&&this.challanService.ScrollDown()}doRefresh(e){this.filterService.updatedata(!0,"Challan List"),this.challanService.refreshEvent=e.target,this.FilterData()}ngOnInit(){setTimeout(()=>{this.challanService.arrowDownEvent(150==this.challanService.selectedRowIndex||0==this.challanService.selectedRowIndex?150:this.challanService.selectedRowIndex)},500),setTimeout(()=>{this.filterService.changeFilter(!0,!0,"Challan List"),null!=this.serachcontrol&&this.serachcontrol.focus()},200),this.SignupId=this.challanService.getSignupId,this.UserId=this.challanService.GetUserId,this.route.params.subscribe(e=>{null!=e.label&&(this.isChallanPending="Billed"!=e.label)});let e={LedgerId:0};e.IsPending=this.isChallanPending,this.challanService.filterArg=e,this.challanService.GetAlldata(),this.challanService.refreshEvent=null,this.challanService.isGetSubscribe=!0,this.challanSubscription=this.challanService.resultObs.subscribe(()=>{setTimeout(()=>{document.scrollingElement.scrollTop=scrollposition,this.challanService.arrowDownEvent(this.challanService.selectedRowIndex),scrollposition=0},250),1==this.isBusy&&(this.isBusy=!1),0==this.challanService.result.length&&(this.noDataImage=!0)}),0==this.inventoryService.result.length&&this.inventoryService.GetAlldata(),0==this.taskService.result.length&&this.taskService.GetAlldata(),0==this.subtaskService.result.length&&this.subtaskService.GetAlldata(),0==this.siteService.result.length&&this.siteService.GetAllsitesforsInventoryUsage(),this.ledgerService.isGetSubscribe=!0,this.ledgerService.GetAlldataforChallan(!0),this.subscription=this.ledgerService.resultObs.subscribe(e=>{this.ChallanLedger=this.ledgerService.result.filter(e=>(1==e.IsBank||1==e.IsCash||1==e.IsSC||1==e.IsSD)&&0==e.IsGrp&&1==e.St),this.purchaseLedger=this.ledgerService.result.filter(e=>1==e.IsPU&&0==e.IsGrp&&1==e.St),this.TaxLedger=this.ledgerService.result.filter(e=>1==e.isTL&&0==e.IsGrp&&1==e.St)}),this.httpfunction.scrolltop(),this.isScrollEnabled=!0}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.challanSubscription&&this.challanSubscription.unsubscribe(),null!=this.Sitesubscription&&this.Sitesubscription.unsubscribe(),null!=this.Invesubscription&&this.Invesubscription.unsubscribe(),null!=this.tasksubscription&&this.tasksubscription.unsubscribe(),null!=this.Sbtasksubscription&&this.Sbtasksubscription.unsubscribe()}onChallanScroll(e){0==this.showChallanModal&&(null!=this.infiniteScroll&&(this.challanService.mobileinfinitescroll=this.infiniteScroll,this.challanService.mobilevirtualscroll=this.virtualScroll,this.challanService.refreshEvent=e.target),this.challanService.ScrollDown())}FilterData(){let e="0",t=0,i=0,n=0,r=0;return null!=this.searchLedger&&null!=this.searchLedger&&(e=this.searchLedger.UIDN),null!=this.siteService.singleresult&&null!=this.siteService.singleresult&&(t=this.siteService.singleresult),null!=this.inventoryService.singleresult&&null!=this.inventoryService.singleresult&&(r=this.inventoryService.singleresult),null!=this.taskService.singleresult&&null!=this.taskService.singleresult&&(i=this.taskService.singleresult),null!=this.subtaskService.singleresult&&null!=this.subtaskService.singleresult&&(n=this.subtaskService.singleresult),this.chalanFilter.LedgerId=e,this.chalanFilter.ChallanNo=this.challanfilterNo,this.chalanFilter.SiteId=t,this.chalanFilter.InvId=r,this.chalanFilter.TaskId=i,this.chalanFilter.SbTaskId=n,this.chalanFilter.IsPending=this.isChallanPending,this.challanService.filterArg=this.chalanFilter,this.challanService.page=0,!1}onCheckedChange(e){this.isChallanPending=!this.isChallanPending,this.FilterData()}cleardata(){this.siteService.singleresult=null,this.inventoryService.singleresult=null,this.taskService.singleresult=null,this.subtaskService.singleresult=null,this.chalanFilter.LedgerId=null,this.challanfilterNo="",this.searchLedger=null,this.purLedger=null,this.TaxLed=null}clearfilterandloadnewdata(){this.cleardata(),this.FilterData()}change(e){this.status.isOpen=e}toggleDropdown(e){$("#adv-search").dropdown("hide")}exportheader(e){let t="All";new Date,null!=this.searchLedger&&null!=this.searchLedger&&(t=this.searchLedger.LN),this.challanService.filterHeader="  Ledger : "+t+" ",this.challanService.Export(e)}generateBillPopupMobile(e){this.selectedchalans=JSON.parse(JSON.stringify(this.challanService.result.filter(t=>t.UIDN==e)));let t=this.selectedchalans[0];if(0==this.selectedchalans.every(function(e){return e.LI===t.LI}))this.alert.showInfo("Error","All selected ledgers must be same.");else{for(var i=0;i<this.selectedchalans.length;i++)if(1==this.selectedchalans[i].IsBd)return this.alert.showInfo("Error","Selected ledger must be unbilled"),!1;0==this.showBillModal&&(this.showBillModal=!0),this.VDt=new Date,this.httpfunction.IsMobileview()?this.BillModalMobile.show():this.BillModal.show(),this.calculationPurchase(),setTimeout(()=>{this.purled.focus()},600)}}showgenerateBillpopup(){if(this.challanService.result.filter(e=>1==e.Ick||1==e.billSelected).length>0){this.selectedchalans=JSON.parse(JSON.stringify(this.challanService.result.filter(e=>1==e.Ick||1==e.billSelected))),this.selectedchns=JSON.parse(JSON.stringify(this.challanService.result.filter(e=>1==e.Ick||1==e.billSelected)[0].ChallanInv));let t=this.selectedchalans[0];if(0==this.selectedchalans.every(function(e){return e.LI===t.LI}))this.alert.showInfo("Error","All selected ledgers must be same.");else{for(var e=0;e<this.selectedchalans.length;e++)if(1==this.selectedchalans[e].IsBd)return this.alert.showInfo("Error","Selected ledger must be unbilled"),!1;0==this.showBillModal&&(this.showBillModal=!0),this.VDt=new Date,this.httpfunction.IsMobileview()?this.BillModalMobile.show():this.BillModal.show(),this.calculationPurchase(),setTimeout(()=>{this.purled.focus()},600)}}else this.alert.showError("Error","Please select atleast one record")}calculateTotal(e){e.TA=e.UA*e.Qty}calculationPurchase(){this.totamount=0;for(var e=0;e<this.selectedchns.length;e++)this.totamount+=this.selectedchns[e].TtlAmt;null!=this.TaxLed&&(this.totamount=this.totamount+parseFloat((this.totamount*this.TaxLed.TR/100).toFixed(2)))}onDateSelect(e){this.VDt=e,null!=this.taxLedger&&this.taxLedger.focus()}onGenerateBill(){this.challanService.buldupdate(this.selectedchns).subscribe(e=>{let t=e.data;this.accountService.singleresult=new c.VN,this.accountService.singleresult.CI=this.accountService.getCompanyId,this.accountService.singleresult.SI=this.accountService.getSignupId,this.accountService.singleresult.VT=d.$f.Purchase,this.accountService.singleresult.VDt=this.VDt,this.accountService.singleresult.Narr="Bill Generated from challan";let i=[],n=this.ledgerService.result.filter(e=>e.UIDN==this.selectedchalans[0].LI)[0],r=new c.eK;r.LId=n.UIDN,r.L_Name=n.LN,r.L_PId=n.PI,r.L_anc=n.ancestor,r.L_Cat=n.Cat,r.TaxLedgerId=0,r.IsTax=!1,r.challan=[];let o=0;for(var a=0;a<t.length;a++){o+=t[a].TA;let e=new c.qk;e.Amt=t[a].TA,e.ChId=t[a].UIDN,e.ChNo=t[a].CN,r.challan.push(e)}r.InventoryId=0,r.Quantity=0,r.DrAmt=0,r.isMainled=!0,r.CrAmt=null!=this.TaxLed?o+parseFloat((o*this.TaxLed.TR/100).toFixed(2)):o,i.push(r);let l=new c.eK;if(l.LId=this.purLedger.UIDN,l.L_Name=this.purLedger.LN,l.L_PId=this.purLedger.PI,l.L_anc=this.purLedger.ancestor,l.L_Cat=this.purLedger.Cat,l.IsTax=!1,null!=this.TaxLed&&(l.TaxLedgerId=this.TaxLed.UIDN,l.TaxRate=this.TaxLed.TR),l.InventoryId=0,l.Quantity=0,l.DrAmt=o,l.CrAmt=0,i.push(l),null!=this.TaxLed){let e=new c.eK;e.LId=this.TaxLed.UIDN,e.L_Name=this.TaxLed.LN,e.L_PId=this.TaxLed.PI,e.L_anc=this.TaxLed.ancestor,e.L_Cat=this.TaxLed.Cat,e.IsTax=!0,e.TaxLedgerId=this.TaxLed.UIDN,e.TaxRate=this.TaxLed.TR,e.InventoryId=0,e.Quantity=0,e.DrAmt=parseFloat((o*this.TaxLed.TR/100).toFixed(2)),e.CrAmt=0,i.push(e)}this.accountService.singleresult.VDet=i,this.accountService.waitforMessage=!0,this.accountService.messagebutton=["Ok"],this.accountService.add(this.accountService.singleresult).subscribe(e=>{this.httpfunction.IsMobileview()?this.BillModalMobile.hide():this.BillModal.hide(),this.FilterData(),this.cleardata()})})}goback(){this.location.back()}openChallanpopup(e){this.currentScrollPosition=document.scrollingElement.scrollTop,this.ChallanId=e,this.showChallanModal=!0,this.addurl("transactions/challan/"+e),this.isList=!1}onChallanSubmit(e){if(this.showChallanModal=!1,setTimeout(()=>{this.challanService.arrowDownEvent(this.challanService.selectedRowIndex),document.scrollingElement.scrollTop=this.currentScrollPosition},250),this.showLedgHistory=!1,this.showLedgHistory=!1,this.isList=!0,this.resetUrl(),null!=e){var t=this.challanService.result.findIndex(t=>t.UIDN==e.UIDN);if(t>=0)null!=e.UpI&&e.UpI.length>0&&(e.UpI=e.UpI.filter(e=>1!=e.operationType)),this.challanService.result[t]=e,this.challanService.result=JSON.parse(JSON.stringify(this.challanService.result));else{let t="";null!=this.searchLedger&&null!=this.searchLedger&&(t=this.searchLedger.UIDN);let i=!0;(1==this.isChallanPending&&e.IsBd==this.isChallanPending||""!=t&&e.LI!=t)&&(i=!1),i&&this.challanService.result.unshift(e),this.challanService.result=JSON.parse(JSON.stringify(this.challanService.result))}}}OpenLedgerHistoryPopUp(e){this.currentScrollPosition=document.scrollingElement.scrollTop,this._LedgerId=e,this.showLedgHistory=!0,this.addurl("reports/ledgerhistory"),this.isList=!1}onLedgHistoryHide(){this.showLedgHistory=!0,this.showLedgHistory=!1,this.isList=!0,this.resetUrl(),document.scrollingElement.scrollTop=this.currentScrollPosition,this._LedgerId=0}selectAllchange(e){this.challanService.result.forEach(function(t){t.Ick=e.target.checked})}resetUrl(){this.isList=!0;let e=this.router.url;this.route.params.subscribe(t=>{null!=t.id&&""!=t.id&&(e=e.replace("/"+t.id,"")),this.location.go(e)})}addurl(e){let t=e,i=this.router.url;i=i.substring(0,i.lastIndexOf("/")+0),i=i.substring(0,i.lastIndexOf("/")+0),this.route.params.subscribe(e=>{null!=e.id&&""!=e.id&&(i=i.replace("/"+e.id,"")),this.location.go(`${i}/${t}`)}),"reports/ledgerhistory"==e&&(i=i.substring(0,i.lastIndexOf("/")+0),i=i.substring(0,i.lastIndexOf("/")+0))}sortPopover(e){return(0,r.mG)(this,void 0,void 0,function*(){const t=yield this.popoverController.create({component:T.r,cssClass:"my-custom-class",event:e,translucent:!0,componentProps:{sortArray:this.sortarray,onClick:(e,i)=>{let n=new Z.p(e,i);this.challanService.sortdata=n,t.dismiss()}}});return yield t.present()})}advSearchM(){this._SearchModal.show()}editOnArrowEvent(e){this.httpfunction.RolebaseData("Chln")?this.openChallanpopup(e):this.alert.showInfo("Error","You do not have sufficient rights to perform this action. Please contact administrator.")}toggleExcelImport(){this._myImageModal.show()}onExcelAdd(e){this.excelfileData=[];for(let t=0;t<e.length;t++){let i=new A.Q;i.name=e[t].name,i.operationType=0,i.src=e[t].src,i.CompanyId=this.inventoryService.getCompanyId,i.SignupId=this.inventoryService.getSignupId,i.FileLength=e[t].size,i.ModifiedDate=new Date,i.CreatedDate=new Date,i.CreatedBy=this.inventoryService.userid,i.modifyBy=this.inventoryService.userid,this.excelfileData.push(i)}}CloseImagePopup(){this.excelfileData=[],this._myImageModal.hide()}ImportTrackByFunction(e){return e.Index}ValidateImportRow(e){e.comments="",(null==e.ApplicableFrom||""==e.ApplicableFrom)&&(e.comments+="Invalid Date \n"),e.invalidProp=""!=e.comments,this.inValidEntry=null,this.inValidEntry=this.importeddataAPI.filter(e=>1==e.invalidProp).length}onExcelSubmit(){null!=this.excelfileData&&this.excelfileData.length>0?this.challanService.ImportExcel(this.excelfileData).subscribe(e=>{if(null==e.data)return this.alert.showError("Error","Excel column names are incorrect. Please double check your excel column name with predefined format."),void(this.isSubmited=!0);""!=e.data&&null!=e.data?(this.importeddataAPI=e.data,this.inValidEntry=this.importeddataAPI.filter(e=>1==e.invalidProp).length,this._myImageModal.hide(),this._myInqImportedDataViewModal.show(),this.isSubmited=!0):(this._myImageModal.hide(),this.excelfileData=[])},()=>{this.alert.showError("Error","Error while File import.Please Correct Sheet")}):this.alert.showError("Error","Please select atleast one File")}ChlImportContinue(){var e=this.importeddataAPI.filter(e=>1==e.invalidProp);e.length>0?this.alert.showError("Error","Please modify grid records. we still have "+e.length+" invalid records"):this.importeddataAPI.length>0?this.challanService.ImportDatafromGrid(this.importeddataAPI).subscribe(e=>{e.data.length>0||(this._myImageModal.hide(),this._myInqImportedDataViewModal.hide(),this.alert.showSuccess("Error","Inventory(s) Imported successfully"))},()=>{this.alert.showError("Error","Error while File import.Please Correct Sheet")}):this.alert.showError("Error","Inventory Can't imported due to Missing required fields.")}toggleNestedTable(e){this.showNestedTable[e]=!this.showNestedTable[e]}ChnDtSelect(e,t,i){this.importeddataAPI[t].ChallanDate=e,this.ValidateImportRow(i)}SelectTaxLedger(e){this.taxLedImport=[];for(let i=0;i<e.GSTDets.length;i++){var t=this.ledgerService.result.filter(t=>t.UIDN==e.GSTDets[i].TLId)[0];let n=this.taxLedImport.concat(t||[]);this.taxLedImport=n}}}return e.\u0275fac=function(t){return new(t||e)(x.Y36(a.e),x.Y36(I.i),x.Y36(L.Dh),x.Y36(w.gz),x.Y36(b.T3),x.Y36(u.V),x.Y36(g.M),x.Y36(h.I),x.Y36(p.P),x.Y36(o.Q),x.Y36(v._),x.Y36(w.F0),x.Y36(x.sBO),x.Y36(n.Ye),x.Y36(s.B),x.Y36(C.Rq))},e.\u0275cmp=x.Xpm({type:e,selectors:[["app-challan-list"]],viewQuery:function(e,t){if(1&e&&(x.Gf(G,5,l.w9),x.Gf(B,5),x.Gf(Y,5),x.Gf(j,5),x.Gf(K,5),x.Gf(z,5,l.w9),x.Gf(W,5,l.w9),x.Gf(X,5),x.Gf(ee,5),x.Gf(te,5),x.Gf(ie,5),x.Gf(ne,5),x.Gf(re,7)),2&e){let e;x.iGM(e=x.CRH())&&(t.serachcontrol=e.first),x.iGM(e=x.CRH())&&(t.challanModal=e.first),x.iGM(e=x.CRH())&&(t.BillModal=e.first),x.iGM(e=x.CRH())&&(t.BillModalMobile=e.first),x.iGM(e=x.CRH())&&(t._SearchModal=e.first),x.iGM(e=x.CRH())&&(t.purled=e.first),x.iGM(e=x.CRH())&&(t.taxLedger=e.first),x.iGM(e=x.CRH())&&(t._LedgerHistoryModal=e.first),x.iGM(e=x.CRH())&&(t.formbill=e.first),x.iGM(e=x.CRH())&&(t.infiniteScroll=e.first),x.iGM(e=x.CRH())&&(t.virtualScroll=e.first),x.iGM(e=x.CRH())&&(t._myImageModal=e.first),x.iGM(e=x.CRH())&&(t._myInqImportedDataViewModal=e.first)}},hostBindings:function(e,t){1&e&&x.NdJ("popstate",function(e){return t.onPopState(e)},!1,x.Jf7)},features:[x._Bn([s.B,a.e,o.Q,g.M,h.I,u.V,p.P,v._])],decls:155,vars:47,consts:[[1,"card",3,"hidden"],["class","customsearch",4,"ngIf"],["class","customsearchM",4,"ngIf"],["id","tableSort",1,"dropdown-menu","arrow_box"],["sortcolumn","ChallanNo","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","MaterialDate","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","Quantity","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","UnitAmount","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","TotalAmount","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","Narration","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","IsBilled","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["class","table-responsive","id","tableContainer",4,"ngIf"],["id","tableContainerbody",3,"height",4,"ngIf"],[4,"ngIf"],["class","col-md-12 pl-0 pr-0",4,"ngIf"],[1,"add-panel",3,"toggleAction"],["id","add-panel-switch",1,"switch","text-right"],["tooltip","Print",1,"action-button","option","four","border-0","waves-effect","btn-pink","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-print"],["tooltip","Pdf",1,"action-button","option","three","border-0","waves-effect","btn-orange","btn-floating",3,"click"],["aria-hidden","true",1,"far","fa-file-pdf"],["tooltip","Export",1,"action-button","option","two","border-0","waves-effect","btn-default","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-download"],["tooltip","Import",1,"action-button","option","one","border-0","waves-effect","btn-purple","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-upload"],[1,"border-0","waves-effect","btn-dark","btn-floating","action-button","plus","abs"],["aria-hidden","true",1,"fas","fa-ellipsis-v"],["accesslevel","Add","mname","Chln","tooltip","Add New",1,"border-0","waves-effect","btn-primary","btn-floating",3,"appRole","SignupId","UserId","clickAllowed"],[1,"fas","fa-plus"],[3,"ChallanredirectOnCancel","ChallanId","ChallanredirectAction",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modalNew","fade",2,"width","30%"],["BillModal","bs-modal"],["class","modal-dialog halfview modal-lg","role","document",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade","bg-white"],["BillModalMobile","bs-modal"],["class","container-fluid p-0","style","height: 100%;background-color: white;",4,"ngIf"],[3,"LedgId","IsCallasPopup",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","SearchModal","aria-hidden","true",1,"modal","fade","bg-white",2,"z-index","99999"],["SearchModal","bs-modal"],[1,"container-fluid","p-0",2,"height","100%","background-color","white"],[1,"modal-content",2,"height","100%"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","form",3,"ngSubmit"],["f","ngForm"],[1,"container-fluid",2,"margin-bottom","70px"],[1,"row","mt-2"],[1,"md-form","col-md-3"],["name","isChallanPending"],[1,"c-switch","c-switch-pill","c-switch-primary","mb-2"],["type","checkbox","name","ChallanPending","id","ChallanPending",1,"c-switch-input",3,"ngModel","change","ngModelChange"],[1,"c-switch-slider"],[1,"md-form","col-md-3","col-sm-6"],["for","Site"],["autofocus","","selectOnTab","true","name","Ledger","bindLabel","LN","placeholder","Select Account",3,"virtualScroll","items","ngModel","loading","ngModelChange"],["toled2",""],["ng-header-tmp",""],["ng-option-tmp",""],["selectOnTab","true","name","Site","bindLabel","SN","bindValue","UIDN","placeholder","Select Site",3,"virtualScroll","items","ngModel","loading","scrollToEnd","ngModelChange"],["for","Inventory"],["selectOnTab","true","name","Site","bindLabel","InvN","bindValue","UIDN","placeholder","Select Inventory",3,"virtualScroll","items","ngModel","loading","scrollToEnd","ngModelChange"],["for","Task"],["selectOnTab","true","name","Site","bindLabel","TN","bindValue","UIDN","placeholder","Select Task",3,"virtualScroll","items","ngModel","loading","scrollToEnd","ngModelChange"],["for","SubTask"],["selectOnTab","true","name","Site","bindLabel","SN","bindValue","UIDN","placeholder","Select SubTask",3,"virtualScroll","items","ngModel","loading","scrollToEnd","ngModelChange"],["for","name"],["autofocus","","type","text","placeholder","Enter Challan No","name","chlnno","id","Vouchertxt",1,"form-control",3,"ngModel","ngModelChange"],["chlnno","ngModel"],[1,"navbar","fixed-bottom","navbar-expand-sm","navbar-dark","bg-light"],[1,"navbar-nav","ml-auto","d-flex","flex-row-reverse","bd-highlight"],[1,"nav-item","active"],["type","submit",1,"btn","btn-primary","pull-right",3,"click"],[1,"fas","fa-search","mr-2"],[1,"nav-item","active","mr-2"],["type","submit",1,"btn","btn-dark",3,"click"],["bsModal","","tabindex","-1","role","dsialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modalNew","fade",2,"width","90%"],["ImageModal","bs-modal"],["role","document",1,"modal-dialog","modal-md"],[1,"modal-content"],["novalidate","",3,"ScrollToInvalid","ngSubmit"],["frmImage","ngForm"],[1,"modal-body"],[1,"content"],[1,"container"],[1,"form-group","col-md-12","p-0"],[1,"input-group"],[1,"md-form","form-group","col-sm-12","p-0"],["maxFiles","1","required","","maxSize","2","fileExt","xls, xlsx",3,"filelist","uploadStatus"],["Importexcel",""],["target","_blank","href","https://api.accountbook24.com/sample/Challan-Import.xlsx",1,"col-sm-2"],[1,"modal-footer","mt-3"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-dark",3,"click"],["bsModal","","tabindex","-1","role","dsialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"fullModal","fade",2,"width","100%"],["myInqImportedDataViewModal","bs-modal"],["role","document",1,"modal-dialog1","modal-md"],["importcontainer",""],["class","card-body col-md-12","id","tableContainer",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"customsearch"],[1,"c-header-nav"],[1,"mx-2","mb-3"],[1,"c-header-back",3,"click"],[1,"c-icon","c-icon-lg","cil-arrow-left"],[1,"mx-2"],["autofocus","","selectOnTab","true","appendTo","body","name","Ledger","bindLabel","LN","placeholder","Select Account",1,"maxpanel",3,"virtualScroll","items","ngModel","loading","ngModelChange"],["toled",""],[1,"mb-2"],["type","button",1,"btn","btnSmW","btn-primary",3,"click"],[1,"cil-search","btn-icon","mr-2"],[1,"none"],["dropdown","","role","group",1,"btn-group","mb-2",3,"isOpen","isOpenChange"],["type","button","id","dropdownMenuButton","id","adv-search","data-toggle","dropdown","aria-expanded","false",1,"btn","btn-primary","dropdown-toggle"],[1,"cil-filter","mr-2"],["aria-labelledby","adv-search","role","menu",1,"dropdown-menu","filterform",2,"min-width","35rem",3,"click"],["ffilter","ngForm"],[1,"row","m-0"],[1,"col-md-6","col-sm-12"],[1,"form-group","col-md-6","col-sm-12"],[1,"text-right","mr-2"],["type","submit",1,"btn","btn-primary","mr-2",3,"click"],["type","submit",1,"btn","btn-dark","pull-right",3,"click"],[1,"fas","fa-search"],["title","History","placement","bottom",1,"pl-2"],[1,"fas","fa-history","text-primary",3,"click"],[1,"form-text","text-muted"],[1,"customsearchM"],[1,"mr-1","mb-2","ml-2"],["name","chevron-back",3,"click"],["name","search","href","javascript:void(0)",3,"click"],[1,"mb-3","mt-1","LeftLi","text-center"],[1,"col","Font16","pl-1"],[1,"mr-3"],["name","filter-sharp",1,"pb-2",3,"click"],["id","tableContainer",1,"table-responsive"],["class","card-header p-1","id","formHeader",4,"ngIf"],["infinite-scroll","",3,"scrollWindow","scrolled"],["class","table table-bordered table-striped pointer-on-hover",3,"fxHeader",4,"ngIf"],["id","fxheaderDiv","class","table-responsive fxheaderDiv",4,"ngIf"],["id","formHeader",1,"card-header","p-1"],[1,"row"],[1,"col","PageNameFsize","pl-1"],[1,"text-right","pl-0","pr-0"],[1,"c-switch","c-switch-pill","c-switch-primary","float-right","mb-2"],[1,"mb-2","float-right","mr-2","small","mt-1","font-weight-bold"],[1,"pl-3","pr-1"],[1,"text-wrap","text-right"],[1,"table","table-bordered","table-striped","pointer-on-hover",3,"fxHeader"],["id","tableContainerHead"],[1,"form-check"],["type","checkbox","id","item_All",1,"form-check-input",3,"checked","ngModel","ngModelChange","change"],["for","item_All",1,"form-check-label"],["sortcolumn","ChallanSrNo",3,"dirsort"],["sortcolumn","ChallanNo",3,"dirsort"],["width","105px","sortcolumn","MaterialDate",3,"dirsort"],["sortcolumn","SiteName",3,"dirsort"],["sortcolumn","TaskName",3,"dirsort"],["sortcolumn","LedgerName",3,"dirsort"],["sortcolumn","UserName",3,"dirsort"],["sortcolumn","Narration",3,"dirsort"],["sortcolumn","IsBilled",3,"dirsort"],["id","tableContainerbody"],["container",""],["autofocus","",3,"rowselected",4,"ngFor","ngForOf"],["autofocus",""],[3,"tabindex","keydown.enter","keydown.arrowdown","keydown.arrowup","click"],["type","checkbox",1,"form-check-input",3,"checked","ngModel","id","ngModelChange"],[1,"form-check-label",3,"for"],["accesslevel","Edit","href","javascript:void(0)","mname","Chln",1,"btn","btn-link",3,"appRole","SignupId","UserId","clickAllowed"],[3,"dateValue"],[1,"font-xs"],["class","font-weight-bold small",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["href","javascript:void(0)","accesslevel","Delete","mname","Chln",1,"dropdown-item",3,"appRole","SignupId","UserId","clickAllowed"],[1,"fas","fa-trash","fa-lg","text-danger"],["colspan","25"],["class","table table-bordered",3,"hidden",4,"ngIf"],[1,"font-weight-bold","small"],["target","_blank",3,"href","click",4,"ngFor","ngForOf"],["target","_blank",3,"href","click"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"table","table-bordered",3,"hidden"],[4,"ngFor","ngForOf"],["id","fxheaderDiv",1,"table-responsive","fxheaderDiv"],["id","fxheadertable",1,"table","table-bordered","table-striped","text-center"],["sortcolumn","Name",3,"dirsort"],["sortcolumn","Quantity",3,"dirsort"],["sortcolumn","UnitAmount",3,"dirsort"],["sortcolumn","TotalAmount",3,"dirsort"],["slot","fixed",3,"ionRefresh"],["pullingText","Pull to refresh","refreshingSpinner","bubbles","refreshingText","Refreshing..."],["approxItemHeight","210px",3,"items"],["ionvscroll",""],[4,"virtualItem"],["threshold","100px",3,"ionInfinite"],["ionInfinitescroll",""],["loadingSpinner","bubbles",3,"loadingText"],["class","text-left",4,"ngIf"],["size","3",1,"text-right","pr-1","p-0"],["size","auto",1,"font-weight-bold","small","text-right"],["size","auto","class","font-weight-bold small text-right",4,"ngIf"],["class","text-right",4,"ngIf"],["class","text-left","size","4",4,"ngIf"],["class","pt-3","size","auto",4,"ngIf"],["size","3","class","pt-2 p-0","size","2.7",4,"ngIf"],[1,"text-right","mt-3"],["href","javascript:void(0)","href","javascript:void(0)","accesslevel","Edit","mname","Chln","class","card-link text-center",3,"appRole","SignupId","UserId","clickAllowed",4,"ngIf"],["href","javascript:void(0)","href","javascript:void(0)","accesslevel","Delete","mname","Chln",1,"card-link","text-center",3,"appRole","SignupId","UserId","clickAllowed"],["name","trash-outline","color","danger"],[1,"text-left"],[1,"text-right"],["size","4",1,"text-left"],["size","auto",1,"pt-3"],["href","javascript:void(0)",1,"btn","btn-link","p-0","text-small","font-weight-bold","text-wrap",3,"click"],["size","3","size","2.7",1,"pt-2","p-0"],["class","btn btn-link text-small font-weight-bold text-wrap","target","_blank",3,"href","click",4,"ngFor","ngForOf"],["target","_blank",1,"btn","btn-link","text-small","font-weight-bold","text-wrap",3,"href","click"],["href","javascript:void(0)","href","javascript:void(0)","accesslevel","Edit","mname","Chln",1,"card-link","text-center",3,"appRole","SignupId","UserId","clickAllowed"],["name","create-outline","color","primary"],["class","skCard",4,"ngFor","ngForOf"],[1,"skCard"],["animated","",2,"width","100%"],[2,"text-align","-webkit-right"],["animated","",2,"width","60%"],["animated","",2,"width","80%"],["animated","",2,"width","40%"],["animated","",2,"width","90%"],["animated","",2,"width","70%"],[1,"table","table-bordered","table-striped","text-center",3,"fxHeader"],[2,"width","20px"],[2,"width","200px"],[1,"col-md-12","pl-0","pr-0"],[1,"mx-auto","noDataImage"],[1,"text-center"],["type","button","value","Add New","accesslevel","Add","mname","Chln",1,"btn","btn-primary",3,"appRole","SignupId","UserId","clickAllowed"],[3,"ChallanredirectOnCancel","ChallanId","ChallanredirectAction"],["role","document",1,"modal-dialog","halfview","modal-lg"],["id","billContent",1,"modal-content"],[1,"modal-title","mr-4"],[1,"text-danger","pt-1"],[1,"col-sm-12","nopadding"],[1,"card"],[1,"card-body"],["name","form","novalidate","",3,"ScrollToInvalid","ngSubmit"],["fbill","ngForm"],["id","formContainer",1,"row","form-group"],[1,"md-form","form-group","col-sm-12","col-md-12"],["for","purled"],["required","","appendTo","body","name","purled","bindLabel","LN","placeholder","Select Purchase Account",3,"virtualScroll","ngClass","items","ngModel","loading","ngModelChange"],["purled","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","taxLedger"],["appendTo","body","name","taxLedger","bindLabel","LN","placeholder","Select Tax Account",3,"items","ngModel","loading","ngModelChange","change"],["taxLedger",""],["for","vdate"],["type","text","appDatepicker","","required","","id","vdate",1,"form-control",3,"startDate","ngClass","selected"],["vdate",""],[1,"col-12"],[1,"table","table-bordered","table-account"],[1,"d-flex","flex-wrap"],[1,"col-2","text-center"],[1,"col-4","text-right"],["class","d-flex flex-wrap",4,"ngFor","ngForOf"],["id","formbtnContainer",1,"col-sm-12","text-right","mr-2"],["href","javascript:void(0)",1,"btn","btn-dark","mr-2",3,"click"],[1,"invalid-feedback"],["type","text","required","","pattern","^-?\\s*(?:\\d+|\\d*\\.\\d+)?\\s*$","placeholder","Enter Qty",1,"form-control","text-center","accText",3,"ngClass","name","ngModel","change","ngModelChange"],["qty",""],["type","text","required","","pattern","^-?\\s*(?:\\d+|\\d*\\.\\d+)?\\s*$","placeholder","Enter Unit price",1,"form-control","text-right","accText",3,"ngClass","name","ngModel","change","ngModelChange"],["ua",""],["type","text","required","","pattern","^-?\\s*(?:\\d+|\\d*\\.\\d+)?\\s*$","placeholder","Total Amount",1,"form-control","text-right","accText",3,"ngClass","name","ngModel","change","ngModelChange"],["ta",""],[3,"hidden"],["id","billContent",1,"modal-content",2,"height","100%"],[1,"container-fluid"],[1,"md-form","col-sm-12","col-md-12"],[1,"col-3","text-center"],[1,"col-3","text-right"],[1,"col-3","text-center","pt-2"],[3,"LedgId","IsCallasPopup"],["id","tableContainer",1,"card-body","col-md-12"],[3,"executeRefreshOutsideAngularZone","items","parentScroll","vsUpdate"],["scrollImport",""],[1,"table","table-bordered","table-striped",3,"fxHeader"],["id","tableContainerHead",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[2,"min-width","225px","white-space","pre-line"],[2,"min-width","100px"],[2,"min-width","150px"],[2,"white-space","pre-line"],["autofocus","","type","text",1,"form-control",3,"ngModel","name","id","change","ngModelChange"],["autofocus","","type","text","autocomplete","none","appDatepicker","",1,"form-control",3,"startDate","name","id","change","selected"],["ChallanDate",""],["bindLabel","TN","placeholder","Select Task",3,"virtualScroll","items","name","id","ngModel","loading","change","scrollToEnd","ngModelChange"],["Task",""],["bindLabel","SN","placeholder","Select Sub Task",3,"virtualScroll","items","name","id","ngModel","loading","change","scrollToEnd","ngModelChange"],["Stask",""],["bindLabel","InvN","placeholder","Select Inventory",3,"virtualScroll","items","name","id","ngClass","ngModel","loading","scrollToEnd","change","ngModelChange"],["Inv","","Inventory","ngModel"],["bindLabel","SN","placeholder","Select Site",3,"virtualScroll","items","name","id","ngModel","loading","change","scrollToEnd","ngModelChange"],["bindLabel","UN","placeholder","Select Unit",3,"virtualScroll","items","name","id","ngModel","loading","scrollToEnd","ngModelChange"],["required","","selectOnTab","true","bindLabel","LN","placeholder","Select Ledger",3,"virtualScroll","ngClass","items","name","id","ngModel","loading","ngModelChange"],["Ledger","ngModel","led",""]],template:function(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",0),x.YNc(1,de,54,24,"div",1),x.YNc(2,ue,12,0,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"a",4),x._uU(5," By No "),x.qZA(),x.TgZ(6,"a",5),x._uU(7," By Date "),x.qZA(),x.TgZ(8,"a",6),x._uU(9," By Quantity "),x.qZA(),x.TgZ(10,"a",7),x._uU(11," By Amount "),x.qZA(),x.TgZ(12,"a",8),x._uU(13," By Total Amount "),x.qZA(),x.TgZ(14,"a",9),x._uU(15," By Narration "),x.qZA(),x.TgZ(16,"a",10),x._uU(17," By Bill Status "),x.qZA(),x.qZA(),x.YNc(18,be,5,4,"div",11),x.YNc(19,Oe,10,4,"div",12),x.YNc(20,Ge,2,1,"div",13),x.YNc(21,Be,36,1,"div",13),x.YNc(22,je,6,1,"div",14),x.TgZ(23,"div",15),x.TgZ(24,"div",16),x.TgZ(25,"button",17),x.NdJ("click",function(){return t.exportheader(1)}),x._UZ(26,"i",18),x.qZA(),x.TgZ(27,"button",19),x.NdJ("click",function(){return t.exportheader(2)}),x._UZ(28,"i",20),x.qZA(),x.TgZ(29,"button",21),x.NdJ("click",function(){return t.exportheader(3)}),x._UZ(30,"i",22),x.qZA(),x.TgZ(31,"button",23),x.NdJ("click",function(){return t.toggleExcelImport()}),x._UZ(32,"i",24),x.qZA(),x.TgZ(33,"button",25),x._UZ(34,"i",26),x.qZA(),x.TgZ(35,"button",27),x.NdJ("clickAllowed",function(){return t.openChallanpopup("add")}),x._UZ(36,"i",28),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.YNc(37,Ke,1,2,"app-challan-addedit",29),x.TgZ(38,"div",30,31),x.YNc(40,ct,51,18,"div",32),x.qZA(),x.TgZ(41,"div",33,34),x.YNc(43,xt,54,18,"div",35),x.qZA(),x.YNc(44,It,1,2,"app-ledgerhistory",36),x.TgZ(45,"div",37,38),x.TgZ(47,"div",39),x.TgZ(48,"div",40),x.TgZ(49,"div",41),x.TgZ(50,"h4",42),x._uU(51,"Advance Search "),x.qZA(),x.TgZ(52,"button",43),x.NdJ("click",function(){return t._SearchModal.hide()}),x.TgZ(53,"span",44),x._uU(54,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(55,"form",45,46),x.NdJ("ngSubmit",function(){return t.FilterData()}),x.TgZ(57,"div",47),x.TgZ(58,"div",48),x.TgZ(59,"div",49),x.TgZ(60,"label",50),x._uU(61,"Pending Challan"),x.qZA(),x._UZ(62,"br"),x.TgZ(63,"label",51),x.TgZ(64,"input",52),x.NdJ("change",function(){return t.FilterData()})("ngModelChange",function(e){return t.isChallanPending=e}),x.qZA(),x._UZ(65,"span",53),x.qZA(),x.qZA(),x.TgZ(66,"div",54),x.TgZ(67,"label",55),x._uU(68,"Select Account"),x.qZA(),x.TgZ(69,"ng-select",56,57),x.NdJ("ngModelChange",function(e){return t.searchLedger=e}),x.YNc(71,Lt,2,2,"ng-template",58),x.YNc(72,wt,4,1,"ng-template",59),x.qZA(),x.qZA(),x.TgZ(73,"div",54),x.TgZ(74,"label",55),x._uU(75,"Site"),x.qZA(),x.TgZ(76,"ng-select",60),x.NdJ("scrollToEnd",function(){return t.siteService.ScrollDown()})("ngModelChange",function(e){return t.siteService.singleresult=e}),x.YNc(77,bt,2,2,"ng-template",58),x.qZA(),x.qZA(),x.TgZ(78,"div",54),x.TgZ(79,"label",61),x._uU(80,"Inventory"),x.qZA(),x.TgZ(81,"ng-select",62),x.NdJ("scrollToEnd",function(){return t.inventoryService.ScrollDown()})("ngModelChange",function(e){return t.inventoryService.singleresult=e}),x.YNc(82,Ct,2,2,"ng-template",58),x.qZA(),x.qZA(),x.TgZ(83,"div",54),x.TgZ(84,"label",63),x._uU(85,"Task"),x.qZA(),x.TgZ(86,"ng-select",64),x.NdJ("scrollToEnd",function(){return t.taskService.ScrollDown()})("ngModelChange",function(e){return t.taskService.singleresult=e}),x.YNc(87,qt,2,2,"ng-template",58),x.qZA(),x.qZA(),x.TgZ(88,"div",54),x.TgZ(89,"label",65),x._uU(90,"Sub Task"),x.qZA(),x.TgZ(91,"ng-select",66),x.NdJ("scrollToEnd",function(){return t.subtaskService.ScrollDown()})("ngModelChange",function(e){return t.subtaskService.singleresult=e}),x.YNc(92,St,2,2,"ng-template",58),x.qZA(),x.qZA(),x.TgZ(93,"div",54),x.TgZ(94,"label",67),x._uU(95,"Challan No"),x.qZA(),x.TgZ(96,"input",68,69),x.NdJ("ngModelChange",function(e){return t.challanfilterNo=e}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(98,"nav",70),x.TgZ(99,"ul",71),x.TgZ(100,"li",72),x.TgZ(101,"button",73),x.NdJ("click",function(e){return t.toggleDropdown(e),t._SearchModal.hide()}),x._UZ(102,"i",74),x._uU(103,"Search "),x.qZA(),x.qZA(),x.TgZ(104,"li",75),x.TgZ(105,"button",76),x.NdJ("click",function(e){return t.clearfilterandloadnewdata(),t.toggleDropdown(e),t._SearchModal.hide()}),x._uU(106," Clear Filter "),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(107,"div",77,78),x.TgZ(109,"div",79),x.TgZ(110,"div",80),x.TgZ(111,"div",41),x.TgZ(112,"h4",42),x._uU(113," Inventory Challan"),x.qZA(),x.TgZ(114,"button",43),x.NdJ("click",function(){return t.CloseImagePopup()}),x.TgZ(115,"span",44),x._uU(116,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(117,"form",81,82),x.NdJ("ngSubmit",function(){return x.CHM(e),x.MAs(118).form.valid&&t.onExcelSubmit()}),x.TgZ(119,"div",83),x.TgZ(120,"div",84),x.TgZ(121,"div",85),x.TgZ(122,"div",86),x.TgZ(123,"div",87),x.TgZ(124,"div",88),x.TgZ(125,"app-file-upload",89,90),x.NdJ("uploadStatus",function(e){return t.onExcelAdd(e)}),x.qZA(),x.TgZ(127,"a",91),x._uU(128," Download sample "),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(129,"div",92),x.TgZ(130,"button",93),x._uU(131,"Submit"),x.qZA(),x.TgZ(132,"button",94),x.NdJ("click",function(){return t.CloseImagePopup()}),x._uU(133,"Close"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(134,"div",95,96),x.TgZ(136,"div",97),x.TgZ(137,"div",80),x.TgZ(138,"div",41),x.TgZ(139,"h4",42),x._uU(140,"Imported Challan From Sheet "),x.qZA(),x.TgZ(141,"button",43),x.NdJ("click",function(){return x.CHM(e),x.MAs(135).hide()}),x.TgZ(142,"span",44),x._uU(143,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(144,"div",83,98),x.TgZ(146,"div",86),x.TgZ(147,"form",81,82),x.NdJ("ngSubmit",function(){return x.CHM(e),x.MAs(118).form.valid}),x.YNc(149,Nt,8,6,"div",99),x.qZA(),x.qZA(),x.qZA(),x.TgZ(150,"div",100),x.TgZ(151,"button",101),x.NdJ("click",function(){return t.ChlImportContinue()}),x._uU(152,"Challan Import"),x.qZA(),x.TgZ(153,"button",94),x.NdJ("click",function(){return x.CHM(e),x.MAs(135).hide()}),x._uU(154,"Close"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}2&e&&(x.Udp("display",t.showChallanModal||t.showLedgHistory?"none":"block"),x.Q6J("hidden",!t.isList),x.xp6(1),x.Q6J("ngIf",!t.challanService.IsMobileview),x.xp6(1),x.Q6J("ngIf",t.challanService.IsMobileview),x.xp6(2),x.Q6J("dirsort",t.challanService),x.xp6(2),x.Q6J("dirsort",t.challanService),x.xp6(2),x.Q6J("dirsort",t.challanService),x.xp6(2),x.Q6J("dirsort",t.challanService),x.xp6(2),x.Q6J("dirsort",t.challanService),x.xp6(2),x.Q6J("dirsort",t.challanService),x.xp6(2),x.Q6J("dirsort",t.challanService),x.xp6(2),x.Q6J("ngIf",!t.challanService.IsMobileview),x.xp6(1),x.Q6J("ngIf",t.challanService.result.length>0&&t.challanService.IsMobileview),x.xp6(1),x.Q6J("ngIf",0==t.challanService.result.length&&!t.noDataImage&&t.challanService.IsMobileview),x.xp6(1),x.Q6J("ngIf",0==t.challanService.result.length&&!t.noDataImage&&!t.challanService.IsMobileview),x.xp6(1),x.Q6J("ngIf",0==t.challanService.result.length),x.xp6(13),x.Q6J("SignupId",t.SignupId)("UserId",t.UserId),x.xp6(2),x.Q6J("ngIf",t.showChallanModal),x.xp6(3),x.Q6J("ngIf",t.showBillModal),x.xp6(3),x.Q6J("ngIf",t.showBillModal),x.xp6(1),x.Q6J("ngIf",t.showLedgHistory),x.xp6(20),x.Q6J("ngModel",t.isChallanPending),x.xp6(5),x.Q6J("virtualScroll",!0)("items",t.ChallanLedger)("ngModel",t.searchLedger)("loading",t.ledgerService.loading),x.xp6(7),x.Q6J("virtualScroll",!0)("items",t.siteService.result)("ngModel",t.siteService.singleresult)("loading",t.siteService.loading),x.xp6(5),x.Q6J("virtualScroll",!0)("items",t.inventoryService.result)("ngModel",t.inventoryService.singleresult)("loading",t.inventoryService.loading),x.xp6(5),x.Q6J("virtualScroll",!0)("items",t.taskService.result)("ngModel",t.taskService.singleresult)("loading",t.taskService.loading),x.xp6(5),x.Q6J("virtualScroll",!0)("items",t.subtaskService.result)("ngModel",t.subtaskService.singleresult)("loading",t.subtaskService.loading),x.xp6(5),x.Q6J("ngModel",t.challanfilterNo),x.xp6(29),x.Q6J("filelist",t.excelfileData),x.xp6(24),x.Q6J("ngIf",t.isSubmited))},directives:[n.O5,q.n,S.e,M.i9,y.g,N.oB,D._Y,D.JL,D.F,D.Wl,_.x,D.JJ,D.On,l.w9,l.A3,l.Z2,D.Fj,U.u,k.Y,J.TO,L.gu,V.R,R.n,n.sg,Q.a,L.W2,L.nJ,L.Wo,L.aJ,L.Rw,L.ju,L.MB,L.PM,L.Nd,L.wI,L.CK,F.N,D.Q7,n.mk,E.q,D.c5,H.i,O.Vw],pipes:[P.s],styles:[".pointer-on-hover[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();var _t=i(28879),Ut=i(86410),kt=i(3359),Jt=i(61362),Vt=i(49457),Rt=i(69521),Qt=i(65978),Ft=i(8746);const Et=["frm"],Ht=["myModal"],Ot=["Ledger"],Pt=["TransactionModal"],Gt=["ExportLedgModal"],$t=["SearchModal"],Bt=["LedgerHistoryModal"],Yt=["ionvscroll"],jt=["ImageModal"],Kt=["myInqImportedDataViewModal"];function zt(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"a"),x._uU(1),x.qZA(),x.TgZ(2,"a",92),x.TgZ(3,"i",93),x.NdJ("click",function(){const t=x.CHM(e).item;return x.oxw(2).OpenLedgerHistoryPopUp(t.UIDN)}),x.qZA(),x.qZA()}if(2&e){const e=t.item;x.xp6(1),x.Oqu(e.LN),x.xp6(1),x.Q6J("hidden",1==e.IsGrp)}}function Wt(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"li",87),x.TgZ(1,"a",94),x.NdJ("click",function(){return x.CHM(e),x.oxw(2).openChangeModal()}),x._uU(2," Change Group "),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(2);x.xp6(1),x.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Xt(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"li",95),x.TgZ(1,"button",96),x.NdJ("clickAllowed",function(){return x.CHM(e),x.oxw(2).MultipleVoucherDelete()}),x._uU(2," Delete Multiple "),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(2);x.xp6(1),x.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function ei(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",75),x.TgZ(1,"form",76),x.NdJ("submit",function(){return x.CHM(e),x.oxw().FilterData()}),x.TgZ(2,"ul",77),x.TgZ(3,"li",78),x.TgZ(4,"button",79),x.NdJ("click",function(){return x.CHM(e),x.oxw().goback()}),x._UZ(5,"i",80),x.qZA(),x.qZA(),x.TgZ(6,"li",81),x.TgZ(7,"ng-select",82,38),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw().currentLedger=t}),x.YNc(9,zt,4,2,"ng-template",39),x.qZA(),x.qZA(),x.TgZ(10,"li",83),x.TgZ(11,"button",84),x.NdJ("click",function(){return x.CHM(e),x.oxw().FilterData()}),x._UZ(12,"span",85),x.TgZ(13,"span",86),x._uU(14,"Search"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(15,"li",87),x.TgZ(16,"a",88),x.NdJ("click",function(){return x.CHM(e),x.oxw().exportForTally()}),x._uU(17," Export "),x.qZA(),x.qZA(),x.YNc(18,Wt,3,2,"li",89),x.YNc(19,Xt,3,2,"li",90),x.TgZ(20,"li",91),x.TgZ(21,"a",88),x.NdJ("click",function(){return x.CHM(e),x.oxw().UnusedLedger()}),x._uU(22," UnUsed "),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw();x.xp6(7),x.Q6J("virtualScroll",!0)("items",e.companyLedgerService.result)("ngModel",e.currentLedger)("loading",e.companyLedgerService.loading),x.xp6(11),x.Q6J("ngIf",e.isMultipleLedgerDelete),x.xp6(1),x.Q6J("ngIf",e.isMultipleLedgerDelete)}}function ti(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",97),x.TgZ(1,"ul",77),x.TgZ(2,"li",98),x.TgZ(3,"ion-icon",99),x.NdJ("click",function(){return x.CHM(e),x.oxw().goback()}),x.qZA(),x.qZA(),x.TgZ(4,"li",98),x.TgZ(5,"ion-icon",100),x.NdJ("click",function(){return x.CHM(e),x.oxw().advSearchM()}),x.qZA(),x.qZA(),x.TgZ(6,"li",101),x.TgZ(7,"div",102),x.TgZ(8,"span"),x.TgZ(9,"strong"),x._uU(10,"Chart Of Accounts"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}}function ii(e,t){if(1&e&&(x.TgZ(0,"div",117),x._uU(1,"Total UnUsed Ledger "),x.TgZ(2,"b"),x._uU(3),x.qZA(),x.qZA()),2&e){const e=x.oxw(3);x.xp6(3),x.hij(" ",e.TotalUnusedLEdger,"")}}function ni(e,t){if(1&e&&(x.TgZ(0,"div",117),x._uU(1),x.qZA()),2&e){const e=x.oxw(3);x.xp6(1),x.hij(" ",e.companyLedgerService.currentShowing,"")}}function ri(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",107),x.TgZ(1,"div",108),x.TgZ(2,"div",109),x.TgZ(3,"strong"),x._uU(4,"Chart Of Account (Ledger List)"),x.qZA(),x.qZA(),x.TgZ(5,"div",110),x.TgZ(6,"label",111),x.TgZ(7,"input",112),x.NdJ("change",function(){return x.CHM(e),x.oxw(2).showLedgerOnly()})("ngModelChange",function(t){return x.CHM(e),x.oxw(2).OnlyLedgers=t}),x.qZA(),x._UZ(8,"span",22),x.qZA(),x.TgZ(9,"span",113),x._uU(10,"Show Ledger Only"),x.qZA(),x.qZA(),x.TgZ(11,"div",110),x.TgZ(12,"label",111),x.TgZ(13,"input",114),x.NdJ("change",function(){return x.CHM(e),x.oxw(2).showGroupsOnly()})("ngModelChange",function(t){return x.CHM(e),x.oxw(2).OnlyGroups=t}),x.qZA(),x._UZ(14,"span",22),x.qZA(),x.TgZ(15,"span",113),x._uU(16,"Show Group Only"),x.qZA(),x.qZA(),x.TgZ(17,"div",115),x.YNc(18,ii,4,1,"div",116),x.YNc(19,ni,2,1,"div",116),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(2);x.xp6(7),x.Q6J("ngModel",e.OnlyLedgers),x.xp6(6),x.Q6J("ngModel",e.OnlyGroups),x.xp6(5),x.Q6J("ngIf",1==e.IsUnusedLedger),x.xp6(1),x.Q6J("ngIf",0==e.IsUnusedLedger)}}function oi(e,t){1&e&&(x.TgZ(0,"span",138),x._uU(1,"Group"),x.qZA())}function ai(e,t){1&e&&(x.TgZ(0,"span",138),x._uU(1,"Ledger"),x.qZA())}function li(e,t){if(1&e&&(x.TgZ(0,"span"),x._uU(1),x.ALo(2,"indianCurrency"),x.qZA()),2&e){const e=x.oxw(2).$implicit;x.xp6(1),x.Oqu(x.lcZ(2,1,e.drAmountSum))}}function si(e,t){1&e&&x._UZ(0,"span")}function ci(e,t){if(1&e&&(x.TgZ(0,"span"),x._uU(1),x.ALo(2,"indianCurrency"),x.qZA()),2&e){const e=x.oxw(2).$implicit;x.xp6(1),x.Oqu(x.lcZ(2,1,e.crAmountSum))}}function di(e,t){1&e&&x._UZ(0,"span")}function ui(e,t){if(1&e&&(x.TgZ(0,"span"),x._uU(1),x.ALo(2,"indianCurrency"),x.qZA()),2&e){const e=x.oxw(2).$implicit;x.xp6(1),x.Oqu(x.lcZ(2,1,e.balAmountSum))}}function gi(e,t){1&e&&x._UZ(0,"span")}function hi(e,t){if(1&e&&(x.TgZ(0,"a",140),x._uU(1),x.qZA()),2&e){const e=t.index;x.s9C("href",t.$implicit.src,x.LSH),x.xp6(1),x.hij(" image",e+1," ")}}function pi(e,t){if(1&e&&(x.TgZ(0,"div"),x.YNc(1,hi,2,2,"a",139),x.qZA()),2&e){const e=x.oxw(2).$implicit;x.xp6(1),x.Q6J("ngForOf",e.Uploadimg)}}function fi(e,t){1&e&&(x.TgZ(0,"span",141),x._uU(1,"Active"),x.qZA())}function mi(e,t){1&e&&(x.TgZ(0,"span",142),x._uU(1,"InActive"),x.qZA())}function Zi(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"li",144),x.TgZ(1,"a",147),x.NdJ("click",function(){x.CHM(e);const t=x.oxw(3).$implicit;return x.oxw(3).OpenTrialBalance(t.UIDN)}),x._uU(2,"Open Trial Balance"),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(6);x.xp6(1),x.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Ti(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"li",144),x.TgZ(1,"a",150),x.NdJ("clickAllowed",function(){x.CHM(e);const t=x.oxw(3).$implicit;return x.oxw(3).companyLedgerService.delete(t.UIDN)}),x._uU(2," Delete "),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(6);x.xp6(1),x.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Ai(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"ul",143),x.TgZ(1,"li",144),x.TgZ(2,"a",145),x.NdJ("click",function(){x.CHM(e);const t=x.oxw(2).$implicit;return x.oxw(3).routingScroll(t.UIDN,"")}),x._uU(3," Edit "),x.qZA(),x.qZA(),x.YNc(4,Zi,3,2,"li",146),x.TgZ(5,"li",144),x.TgZ(6,"a",147),x.NdJ("click",function(){x.CHM(e);const t=x.oxw(2).$implicit;return x.oxw(3).LedgerHistory(t,1)}),x._uU(7,"Ledger's Trial Balance"),x.qZA(),x.qZA(),x.TgZ(8,"li",144),x.TgZ(9,"a",148),x.NdJ("click",function(){x.CHM(e);const t=x.oxw(2).$implicit;return x.oxw(3).routingScroll(t.UIDN,!0)}),x._uU(10," Add Group "),x.qZA(),x.qZA(),x.TgZ(11,"li",144),x.TgZ(12,"a",149),x.NdJ("click",function(){x.CHM(e);const t=x.oxw(2).$implicit;return x.oxw(3).routingScroll(t.UIDN,!1)}),x._uU(13," Add Ledger "),x.qZA(),x.qZA(),x.YNc(14,Ti,3,2,"li",146),x.qZA()}if(2&e){const e=x.oxw(2).$implicit,t=x.oxw(3);x.xp6(2),x.Q6J("SignupId",t.SignupId)("UserId",t.UserId),x.xp6(2),x.Q6J("ngIf",1==e.IsGrp),x.xp6(2),x.Q6J("SignupId",t.SignupId)("UserId",t.UserId),x.xp6(3),x.Q6J("hidden",0==e.IsGrp)("SignupId",t.SignupId)("UserId",t.UserId),x.xp6(3),x.Q6J("hidden",0==e.IsGrp)("SignupId",t.SignupId)("UserId",t.UserId),x.xp6(2),x.Q6J("ngIf",null==e.RS||""==e.RS)}}function vi(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"tr",127),x.NdJ("keydown.enter",function(){x.CHM(e);const t=x.oxw().$implicit;return x.oxw(3).editOnArrowEvent(t.UIDN,"")})("keydown.arrowdown",function(){x.CHM(e);const t=x.oxw().index;return x.oxw(3).companyLedgerService.arrowDownEvent(t+151)})("keydown.arrowup",function(){x.CHM(e);const t=x.oxw().index;return x.oxw(3).companyLedgerService.arrowUpEvent(t+149)}),x.TgZ(1,"td"),x.TgZ(2,"div",120),x.TgZ(3,"input",128),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw().$implicit.Ick=t})("change",function(t){x.CHM(e);const i=x.oxw().$implicit;return x.oxw(3).selectSinglechange(t,i.UIDN)}),x.qZA(),x._UZ(4,"label",129),x.qZA(),x.qZA(),x.TgZ(5,"td"),x._uU(6),x.qZA(),x.TgZ(7,"td"),x._uU(8),x.qZA(),x.TgZ(9,"td"),x.YNc(10,oi,2,0,"span",130),x.YNc(11,ai,2,0,"span",130),x.qZA(),x.TgZ(12,"td"),x._uU(13),x.ALo(14,"indianCurrency"),x.qZA(),x.TgZ(15,"td"),x._uU(16),x.ALo(17,"indianCurrency"),x.qZA(),x.TgZ(18,"td"),x.YNc(19,li,3,3,"span",5),x.YNc(20,si,1,0,"span",5),x.qZA(),x.TgZ(21,"td"),x.YNc(22,ci,3,3,"span",5),x.YNc(23,di,1,0,"span",5),x.qZA(),x.TgZ(24,"td"),x.YNc(25,ui,3,3,"span",5),x.YNc(26,gi,1,0,"span",5),x.qZA(),x.TgZ(27,"td"),x.YNc(28,pi,2,1,"div",5),x.qZA(),x.TgZ(29,"td"),x.YNc(30,fi,2,0,"span",131),x.YNc(31,mi,2,0,"span",132),x.qZA(),x.TgZ(32,"td",133),x.TgZ(33,"div",134),x.TgZ(34,"button",135),x._UZ(35,"i",136),x.qZA(),x.YNc(36,Ai,15,12,"ul",137),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(),t=e.index,i=e.$implicit;x.s9C("tabindex",t+150),x.xp6(3),x.MGl("id","item_",t,""),x.Q6J("checked",i.Ick)("ngModel",i.Ick),x.xp6(1),x.MGl("for","item_",t,""),x.xp6(1),x.Udp("padding-left",15*i.Level,"px"),x.ekj("boldfont",1==i.IsGrp),x.xp6(1),x.hij(" ",i.LN," "),x.xp6(2),x.Oqu(i.Cat),x.xp6(2),x.Q6J("ngIf",1==i.IsGrp),x.xp6(1),x.Q6J("ngIf",0==i.IsGrp),x.xp6(2),x.Oqu(x.lcZ(14,24,i.OB)),x.xp6(3),x.Oqu(x.lcZ(17,26,i.CB)),x.xp6(3),x.Q6J("ngIf",null!=i.drAmountSum),x.xp6(1),x.Q6J("ngIf",null==i.drAmountSum),x.xp6(2),x.Q6J("ngIf",null!=i.crAmountSum),x.xp6(1),x.Q6J("ngIf",null==i.crAmountSum),x.xp6(2),x.Q6J("ngIf",null!=i.balAmountSum),x.xp6(1),x.Q6J("ngIf",null==i.balAmountSum),x.xp6(2),x.Q6J("ngIf",null!=i.Uploadimg&&i.Uploadimg.length>0),x.xp6(2),x.Q6J("ngIf",1==i.St),x.xp6(1),x.Q6J("ngIf",0==i.St)}}function xi(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"tr"),x.TgZ(1,"td"),x.TgZ(2,"a",153),x.NdJ("click",function(){const t=x.CHM(e).$implicit;return x.oxw(6).openTransaction(t.VType,t.VId,t.BId,!1)}),x._uU(3),x.qZA(),x.qZA(),x.TgZ(4,"td"),x._uU(5),x.qZA(),x.TgZ(6,"td"),x._uU(7),x.qZA(),x.TgZ(8,"td"),x._uU(9),x.ALo(10,"indianCurrency"),x.qZA(),x.TgZ(11,"td"),x._UZ(12,"dateformatter",154),x.qZA(),x.TgZ(13,"td"),x._uU(14),x.qZA(),x.TgZ(15,"td"),x._uU(16),x.ALo(17,"indianCurrency"),x.qZA(),x.TgZ(18,"td"),x._uU(19),x.ALo(20,"indianCurrency"),x.qZA(),x.TgZ(21,"td"),x._uU(22),x.qZA(),x.TgZ(23,"td"),x._uU(24),x.qZA(),x.TgZ(25,"td"),x._UZ(26,"dateformatter",155),x.qZA(),x.qZA()}if(2&e){const e=t.$implicit;x.xp6(3),x.hij(" ",e.VNo," "),x.xp6(2),x.hij(" ",e.VType," "),x.xp6(2),x.hij(" ",e.ParentGroupLedger," "),x.xp6(2),x.hij(" ",x.lcZ(10,11,e.OBalance)," "),x.xp6(3),x.s9C("dateValue",e.VDate),x.xp6(2),x.hij(" ",e.Narr," "),x.xp6(2),x.hij(" ",x.lcZ(17,13,e.VDrAmt)," "),x.xp6(3),x.hij(" ",x.lcZ(20,15,e.VCrAmt)," "),x.xp6(3),x.hij(" ",e.ActionModule," "),x.xp6(2),x.hij(" ",e.UserName," "),x.xp6(2),x.s9C("dateValue",e.MD)}}function Ii(e,t){if(1&e&&(x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",151),x.TgZ(3,"table",152),x.TgZ(4,"tr"),x.TgZ(5,"th"),x._uU(6,"VoucherNo"),x.qZA(),x.TgZ(7,"th"),x._uU(8,"VoucherType"),x.qZA(),x.TgZ(9,"th"),x._uU(10,"Parent"),x.qZA(),x.TgZ(11,"th"),x._uU(12,"OpeningBalance"),x.qZA(),x.TgZ(13,"th"),x._uU(14,"VoucherDate"),x.qZA(),x.TgZ(15,"th"),x._uU(16,"Narration"),x.qZA(),x.TgZ(17,"th"),x._uU(18,"DrAmount"),x.qZA(),x.TgZ(19,"th"),x._uU(20,"CrAmount"),x.qZA(),x.TgZ(21,"th"),x._uU(22,"ActionModule"),x.qZA(),x.TgZ(23,"th"),x._uU(24,"Modified-By"),x.qZA(),x.TgZ(25,"th"),x._uU(26,"Modified/Created DateTime"),x.qZA(),x.qZA(),x.YNc(27,xi,27,17,"tr",125),x.qZA(),x.qZA(),x.qZA(),x.BQk()),2&e){const e=x.oxw(2).$implicit;x.xp6(27),x.Q6J("ngForOf",e.Remarks)}}function Li(e,t){if(1&e&&(x.ynx(0),x.YNc(1,Ii,28,1,"ng-container",5),x.BQk()),2&e){const e=x.oxw().$implicit;x.xp6(1),x.Q6J("ngIf",null!=e.Remarks&&e.Remarks.length>0)}}function wi(e,t){if(1&e&&(x.ynx(0),x.YNc(1,vi,37,28,"tr",126),x.YNc(2,Li,2,1,"ng-container",5),x.BQk()),2&e){const e=t.$implicit,i=x.oxw(3);x.xp6(1),x.Q6J("ngIf",1==e.IsGrp&&1==i.OnlyGroups||0==i.OnlyGroups),x.xp6(1),x.Q6J("ngIf",1==e.Expd)}}function bi(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"table",118),x.TgZ(1,"thead",119),x.TgZ(2,"tr"),x.TgZ(3,"th"),x.TgZ(4,"div",120),x.TgZ(5,"input",121),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw(2).selectedAll=t})("change",function(t){return x.CHM(e),x.oxw(2).selectAllchange(t)}),x.qZA(),x._UZ(6,"label",122),x.qZA(),x.qZA(),x.TgZ(7,"th"),x._uU(8,"Ledger "),x.qZA(),x.TgZ(9,"th"),x._uU(10,"Category"),x.qZA(),x.TgZ(11,"th"),x._uU(12,"Ledger Type"),x.qZA(),x.TgZ(13,"th"),x._uU(14,"Opening Balance"),x.qZA(),x.TgZ(15,"th"),x._uU(16,"Current Balance"),x.qZA(),x.TgZ(17,"th"),x._uU(18,"Dabit "),x.qZA(),x.TgZ(19,"th"),x._uU(20,"Credit "),x.qZA(),x.TgZ(21,"th"),x._uU(22,"Balance"),x.qZA(),x.TgZ(23,"th"),x._uU(24,"Image"),x.qZA(),x.TgZ(25,"th"),x._uU(26,"Status"),x.qZA(),x.TgZ(27,"th"),x._uU(28,"Actions"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(29,"tbody",123,124),x.YNc(31,wi,3,2,"ng-container",125),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(2);x.xp6(5),x.Q6J("checked",e.selectedAll)("ngModel",e.selectedAll),x.xp6(26),x.Q6J("ngForOf",e.ledgerData)}}function Ci(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",156),x.TgZ(1,"table",157),x.TgZ(2,"thead",119),x.TgZ(3,"tr"),x.TgZ(4,"th"),x.TgZ(5,"div",120),x.TgZ(6,"input",121),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw(2).selectedAll=t})("change",function(t){return x.CHM(e),x.oxw(2).selectAllchange(t)}),x.qZA(),x._UZ(7,"label",122),x.qZA(),x.qZA(),x.TgZ(8,"th"),x._uU(9,"Ledger "),x.qZA(),x.TgZ(10,"th"),x._uU(11,"Category"),x.qZA(),x.TgZ(12,"th"),x._uU(13,"Ledger Type"),x.qZA(),x.TgZ(14,"th"),x._uU(15,"Opening Balance"),x.qZA(),x.TgZ(16,"th"),x._uU(17,"Current Balance"),x.qZA(),x.TgZ(18,"th"),x._uU(19,"Image"),x.qZA(),x.TgZ(20,"th"),x._uU(21,"Status"),x.qZA(),x.TgZ(22,"th"),x._uU(23,"Actions"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw(2);x.xp6(6),x.Q6J("checked",e.selectedAll)("ngModel",e.selectedAll)}}function qi(e,t){if(1&e&&(x.TgZ(0,"div",103),x.YNc(1,ri,20,4,"div",104),x.TgZ(2,"div"),x.YNc(3,bi,32,3,"table",105),x.qZA(),x.YNc(4,Ci,24,2,"div",106),x.qZA()),2&e){const e=x.oxw();x.xp6(1),x.Q6J("ngIf",0==(e.companyLedgerService.isMobile||e.companyLedgerService.IsMobileview)),x.xp6(2),x.Q6J("ngIf",e.ledgerData.length>0),x.xp6(1),x.Q6J("ngIf",e.ledgerData.length>0)}}function Si(e,t){1&e&&(x.TgZ(0,"span",138),x._uU(1,"Group"),x.qZA())}function Mi(e,t){1&e&&(x.TgZ(0,"span",138),x._uU(1,"Ledger"),x.qZA())}function yi(e,t){if(1&e&&(x.TgZ(0,"a",173),x._UZ(1,"i",174),x._uU(2,"Group "),x.qZA()),2&e){const e=x.oxw().$implicit,t=x.oxw(2);x.MGl("rLink","/transactions/ledgeradd/",e.UIDN,"/true"),x.Q6J("SignupId",t.SignupId)("UserId",t.UserId)}}function Ni(e,t){if(1&e&&(x.TgZ(0,"a",175),x._UZ(1,"i",174),x._uU(2,"Ledger "),x.qZA()),2&e){const e=x.oxw().$implicit,t=x.oxw(2);x.MGl("rLink","/transactions/ledgeradd/",e.UIDN,"/false"),x.Q6J("SignupId",t.SignupId)("UserId",t.UserId)}}function Di(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"ion-card",163),x.NdJ("click",function(){const t=x.CHM(e).$implicit;return t.Ick=!t.Ick}),x.TgZ(1,"div"),x.TgZ(2,"ion-row"),x.TgZ(3,"ion-col"),x.TgZ(4,"div",164),x.TgZ(5,"h5"),x._uU(6),x.qZA(),x.qZA(),x.qZA(),x.TgZ(7,"ion-col",165),x.YNc(8,Si,2,0,"span",130),x.YNc(9,Mi,2,0,"span",130),x.qZA(),x.qZA(),x.TgZ(10,"ion-row"),x.TgZ(11,"ion-col",166),x.YNc(12,yi,3,3,"a",167),x.YNc(13,Ni,3,3,"a",168),x.qZA(),x.TgZ(14,"ion-col",165),x.TgZ(15,"a",169),x.NdJ("click",function(){const t=x.CHM(e).$implicit;return x.oxw(2).routingScroll(t.UIDN,"")}),x._UZ(16,"ion-icon",170),x.qZA(),x.TgZ(17,"a",171),x.NdJ("clickAllowed",function(){const t=x.CHM(e).$implicit;return x.oxw(2).companyLedgerService.delete(t.UIDN)}),x._UZ(18,"ion-icon",172),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=t.$implicit,i=x.oxw(2);x.ekj("rowselected",e.Ick),x.xp6(4),x.Udp("padding-left",5*e.Level,"px"),x.ekj("boldfont",1==e.IsGrp),x.xp6(2),x.Oqu(e.LN),x.xp6(2),x.Q6J("ngIf",1==e.IsGrp),x.xp6(1),x.Q6J("ngIf",0==e.IsGrp),x.xp6(3),x.Q6J("ngIf",1==e.IsGrp),x.xp6(1),x.Q6J("ngIf",1==e.IsGrp),x.xp6(2),x.Q6J("SignupId",i.SignupId)("UserId",i.UserId),x.xp6(2),x.Q6J("SignupId",i.SignupId)("UserId",i.UserId)}}function _i(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",158),x.TgZ(1,"ion-content"),x.TgZ(2,"ion-refresher",159),x.NdJ("ionRefresh",function(t){return x.CHM(e),x.oxw().doRefresh(t)}),x._UZ(3,"ion-refresher-content",160),x.qZA(),x.TgZ(4,"ion-virtual-scroll",161),x.YNc(5,Di,19,15,"ion-card",162),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw();x.xp6(4),x.Q6J("items",e.ledgerData)}}function Ui(e,t){1&e&&(x.TgZ(0,"ion-card",177),x.TgZ(1,"ion-row"),x.TgZ(2,"ion-col"),x._UZ(3,"ion-skeleton-text",178),x.qZA(),x.TgZ(4,"ion-col",179),x._UZ(5,"ion-skeleton-text",178),x.qZA(),x.qZA(),x.TgZ(6,"ion-row"),x.TgZ(7,"ion-col",166),x._UZ(8,"ion-skeleton-text",178),x.qZA(),x.TgZ(9,"ion-col",179),x._UZ(10,"ion-skeleton-text",178),x.qZA(),x.qZA(),x.qZA())}function ki(e,t){if(1&e&&(x.TgZ(0,"div"),x.YNc(1,Ui,11,0,"ion-card",176),x.qZA()),2&e){const e=x.oxw();x.xp6(1),x.Q6J("ngForOf",e.companyLedgerService.noImageRepeat)}}function Ji(e,t){1&e&&(x.TgZ(0,"tr"),x.TgZ(1,"td",182),x._UZ(2,"ion-skeleton-text",181),x.qZA(),x.TgZ(3,"td"),x._UZ(4,"ion-skeleton-text",181),x.qZA(),x.TgZ(5,"td"),x._UZ(6,"ion-skeleton-text",181),x.qZA(),x.TgZ(7,"td"),x._UZ(8,"ion-skeleton-text",181),x.qZA(),x.TgZ(9,"td"),x._UZ(10,"ion-skeleton-text",181),x.qZA(),x.TgZ(11,"td"),x._UZ(12,"ion-skeleton-text",181),x.qZA(),x.TgZ(13,"td"),x._UZ(14,"ion-skeleton-text",181),x.qZA(),x.TgZ(15,"td",133),x._UZ(16,"ion-skeleton-text",181),x.qZA(),x.qZA())}function Vi(e,t){if(1&e&&(x.TgZ(0,"div"),x.TgZ(1,"table",180),x.TgZ(2,"thead",119),x.TgZ(3,"tr"),x.TgZ(4,"th"),x._UZ(5,"ion-skeleton-text",181),x.qZA(),x.TgZ(6,"th"),x._UZ(7,"ion-skeleton-text",181),x.qZA(),x.TgZ(8,"th"),x._UZ(9,"ion-skeleton-text",181),x.qZA(),x.TgZ(10,"th"),x._UZ(11,"ion-skeleton-text",181),x.qZA(),x.TgZ(12,"th"),x._UZ(13,"ion-skeleton-text",181),x.qZA(),x.TgZ(14,"th"),x._UZ(15,"ion-skeleton-text",181),x.qZA(),x.TgZ(16,"th"),x._UZ(17,"ion-skeleton-text",181),x.qZA(),x.TgZ(18,"th"),x._UZ(19,"ion-skeleton-text",181),x.qZA(),x.qZA(),x.qZA(),x.TgZ(20,"tbody",123),x.YNc(21,Ji,17,0,"tr",125),x.qZA(),x.qZA(),x.qZA()),2&e){const e=x.oxw();x.xp6(21),x.Q6J("ngForOf",e.companyLedgerService.noImageRepeat)}}function Ri(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",183),x.TgZ(1,"div",184),x.TgZ(2,"div",185),x.NdJ("click",function(){return x.CHM(e),x.oxw().exportheader(1)}),x._UZ(3,"i",186),x.qZA(),x.TgZ(4,"div",187),x.NdJ("click",function(){return x.CHM(e),x.oxw().exportheader(2)}),x._UZ(5,"i",188),x.qZA(),x.TgZ(6,"div",189),x.NdJ("click",function(){return x.CHM(e),x.oxw().toggleExcelImport()}),x._UZ(7,"i",190),x.qZA(),x.TgZ(8,"div",191),x.NdJ("click",function(){return x.CHM(e),x.oxw().exportheader(3)}),x._UZ(9,"i",192),x.qZA(),x.TgZ(10,"div",193),x._UZ(11,"i",194),x.qZA(),x.TgZ(12,"button",195),x.TgZ(13,"span"),x._uU(14,"L"),x.qZA(),x.qZA(),x.TgZ(15,"button",196),x.TgZ(16,"span"),x._uU(17,"G"),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw();x.xp6(12),x.Q6J("SignupId",e.SignupId)("UserId",e.UserId),x.xp6(3),x.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Qi(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",183),x.TgZ(1,"div",184),x.TgZ(2,"button",197),x.NdJ("click",function(){return x.CHM(e),x.oxw().UnusedLedger()}),x._UZ(3,"i",198),x.qZA(),x.TgZ(4,"div",185),x.NdJ("click",function(){return x.CHM(e),x.oxw().exportheader(1)}),x._UZ(5,"i",186),x.qZA(),x.TgZ(6,"div",187),x.NdJ("click",function(){return x.CHM(e),x.oxw().exportheader(2)}),x._UZ(7,"i",188),x.qZA(),x.TgZ(8,"div",199),x.NdJ("click",function(){return x.CHM(e),x.oxw().exportheader(3)}),x._UZ(9,"i",192),x.qZA(),x.TgZ(10,"button",200),x.NdJ("click",function(){return x.CHM(e),x.oxw().MultipleVoucherDelete()}),x._UZ(11,"i",201),x.qZA(),x.TgZ(12,"div",193),x._UZ(13,"i",194),x.qZA(),x.TgZ(14,"button",195),x.TgZ(15,"span"),x._uU(16,"L"),x.qZA(),x.qZA(),x.TgZ(17,"button",196),x.TgZ(18,"span"),x._uU(19,"G"),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw();x.xp6(14),x.Q6J("SignupId",e.SignupId)("UserId",e.UserId),x.xp6(3),x.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Fi(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",202),x.TgZ(1,"div",203),x.TgZ(2,"div",14),x.TgZ(3,"h4",15),x._uU(4),x.qZA(),x.TgZ(5,"i",204),x.NdJ("click",function(){x.CHM(e);const t=x.oxw();return t.filterService.changeFilterWithbottomfilter(!0,!0,"Account List"),t.onTransactionSubmit(null)}),x.qZA(),x.qZA(),x.TgZ(6,"div",18),x.TgZ(7,"app-account-addedit",205),x.NdJ("TransactionredirectAction",function(t){return x.CHM(e),x.oxw().onTransactionSubmit(t)}),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw();x.xp6(4),x.Oqu(e.VoucherType),x.xp6(3),x.Q6J("TransactionredirectOnCancel",!1)("IsDuplicate",e.Duplicate)("VoucherType",e.VoucherType)("VoucherId",e.VoucherId)}}function Ei(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div"),x.TgZ(1,"strong",206),x._uU(2,"To Date :"),x.qZA(),x.TgZ(3,"input",207,208),x.NdJ("selected",function(t){return x.CHM(e),x.oxw().onToDateSelect(t)}),x.qZA(),x.qZA()}if(2&e){const e=x.oxw();x.xp6(3),x.Q6J("startDate",e._Todate)}}function Hi(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",202),x.TgZ(1,"div",13),x.TgZ(2,"div",14),x.TgZ(3,"h4",15),x._uU(4,"Ledger History"),x.qZA(),x.TgZ(5,"button",16),x.NdJ("click",function(){return x.CHM(e),x.oxw().onLedgHistoryHide()}),x.TgZ(6,"span",17),x._uU(7,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(8,"div",18),x._UZ(9,"app-ledgerhistory",209),x.qZA(),x._UZ(10,"div",67),x.qZA(),x.qZA()}if(2&e){const e=x.oxw();x.xp6(9),x.Q6J("LedgId",e._LedgerId)("IsCallasPopup",!0)}}function Oi(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"a"),x._uU(1),x.qZA(),x.TgZ(2,"a",92),x.TgZ(3,"i",93),x.NdJ("click",function(){const t=x.CHM(e).item;return x.oxw().OpenLedgerHistoryPopUp(t.UIDN)}),x.qZA(),x.qZA()}if(2&e){const e=t.item;x.xp6(1),x.Oqu(e.LN),x.xp6(1),x.Q6J("hidden",1==e.IsGrp)}}function Pi(e,t){1&e&&x._uU(0),2&e&&x.hij(" ",t.item.LN," ")}function Gi(e,t){if(1&e&&(x.TgZ(0,"a"),x._uU(1),x.qZA(),x.TgZ(2,"a",211),x._UZ(3,"i",212),x.qZA()),2&e){const e=t.item,i=x.oxw(2);x.xp6(1),x.Oqu(e.LN),x.xp6(1),x.Q6J("SignupId",i.SignupId)("UserId",i.UserId)}}function $i(e,t){1&e&&(x.YNc(0,Pi,1,1,"ng-template",210),x.YNc(1,Gi,4,3,"ng-template",39))}function Bi(e,t){if(1&e&&(x.TgZ(0,"div",220),x._uU(1," Total "),x.TgZ(2,"b"),x._uU(3),x.qZA(),x._uU(4," inquiry(s) imported And We have found total "),x.TgZ(5,"b"),x._uU(6),x.qZA(),x._uU(7," duplicate inquiry(s). You may download already existed records "),x.qZA()),2&e){const e=x.oxw(2);x.xp6(3),x.Oqu(e.importeddataAPI.length-e.RepeatcontactFromAPI.length),x.xp6(3),x.Oqu(e.RepeatcontactFromAPI.length)}}function Yi(e,t){1&e&&(x.TgZ(0,"thead",119),x.TgZ(1,"tr"),x.TgZ(2,"th",221),x._uU(3,"COMMENTS"),x.qZA(),x.TgZ(4,"th",222),x._uU(5,"LEDGER NAME"),x.qZA(),x.TgZ(6,"th",223),x._uU(7,"PARENT LEDGER NAME"),x.qZA(),x.TgZ(8,"th",222),x._uU(9,"OPENING BALANCE"),x.qZA(),x.TgZ(10,"th",222),x._uU(11,"LEDGER TYPE"),x.qZA(),x.TgZ(12,"th",222),x._uU(13,"AFFECTEDDATE"),x.qZA(),x.TgZ(14,"th",222),x._uU(15,"AADHAR NO"),x.qZA(),x.TgZ(16,"th",222),x._uU(17,"CUSTOMER FULL NAME"),x.qZA(),x.TgZ(18,"th",222),x._uU(19,"CUSTOMER ADDRESS"),x.qZA(),x.TgZ(20,"th",222),x._uU(21,"CONTACT NO"),x.qZA(),x.TgZ(22,"th",222),x._uU(23,"EMAIL"),x.qZA(),x.TgZ(24,"th",222),x._uU(25,"PAN NO"),x.qZA(),x.qZA(),x.qZA())}function ji(e,t){if(1&e){const e=x.EpF();x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",224),x._uU(3),x.qZA(),x.TgZ(4,"td"),x.TgZ(5,"input",225),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.LN=t}),x.qZA(),x.qZA(),x.TgZ(6,"td"),x.TgZ(7,"ng-select",226,227),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.PI=t}),x.qZA(),x.qZA(),x.TgZ(9,"td"),x.TgZ(10,"input",228),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.OB=t}),x.qZA(),x.qZA(),x.TgZ(11,"td"),x.TgZ(12,"input",225),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.LT=t}),x.qZA(),x.qZA(),x.TgZ(13,"td"),x.TgZ(14,"input",229,230),x.NdJ("selected",function(t){const i=x.CHM(e),n=i.index,r=i.$implicit;return x.oxw(2).AffectedDateSelect(t,n,r)}),x.qZA(),x.qZA(),x.TgZ(16,"td"),x.TgZ(17,"input",225),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.AdharNo=t}),x.qZA(),x.qZA(),x.TgZ(18,"td"),x.TgZ(19,"input",225),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.FullNm=t}),x.qZA(),x.qZA(),x.TgZ(20,"td"),x.TgZ(21,"input",225),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.Addr=t}),x.qZA(),x.qZA(),x.TgZ(22,"td"),x.TgZ(23,"input",225),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.CNO=t}),x.qZA(),x.qZA(),x.TgZ(24,"td"),x.TgZ(25,"input",225),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.Eml=t}),x.qZA(),x.qZA(),x.TgZ(26,"td"),x.TgZ(27,"input",225),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.PanNo=t}),x.qZA(),x.qZA(),x.qZA(),x.BQk()}if(2&e){const e=t.$implicit,i=t.index,n=x.oxw(2);x.xp6(1),x.ekj("negative",e.invalidProp)("positive",e.RepeatContactProp),x.xp6(2),x.hij(" ",e.comments," "),x.xp6(2),x.MGl("name","LN_",i,""),x.MGl("id","LN_",i,""),x.Q6J("ngModel",e.LN),x.xp6(2),x.MGl("id","PN_",i,""),x.MGl("name","PN_",i,""),x.Q6J("items",n.GroupLedgers)("ngModel",e.PI)("loading",n.companyLedgerService.loading),x.xp6(3),x.MGl("name","OB_",i,""),x.MGl("id","OB_",i,""),x.Q6J("ngModel",e.OB),x.xp6(2),x.MGl("name","LT_",i,""),x.MGl("id","LT_",i,""),x.Q6J("ngModel",e.LT),x.xp6(2),x.MGl("name","AffDt_",i,""),x.MGl("id","AffDt_",i,""),x.Q6J("startDate",e.AffDt),x.xp6(3),x.MGl("name","AdharNo_",i,""),x.MGl("id","AdharNo_",i,""),x.Q6J("ngModel",e.AdharNo),x.xp6(2),x.MGl("name","FullNm_",i,""),x.MGl("id","FullNm_",i,""),x.Q6J("ngModel",e.FullNm),x.xp6(2),x.MGl("name","Addr_",i,""),x.MGl("id","Addr_",i,""),x.Q6J("ngModel",e.Addr),x.xp6(2),x.MGl("name","CNO_",i,""),x.MGl("id","CNO_",i,""),x.Q6J("ngModel",e.CNO),x.xp6(2),x.MGl("name","Eml_",i,""),x.MGl("id","Eml_",i,""),x.Q6J("ngModel",e.Eml),x.xp6(2),x.MGl("name","PanNo_",i,""),x.MGl("id","PanNo_",i,""),x.Q6J("ngModel",e.PanNo)}}function Ki(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",213),x.TgZ(1,"h5"),x._uU(2),x.qZA(),x.YNc(3,Bi,8,2,"div",214),x.TgZ(4,"virtual-scroller",215,216),x.NdJ("vsUpdate",function(){return x.CHM(e),x.oxw().changeDetectorRef.detectChanges()}),x.TgZ(6,"table",217),x.YNc(7,Yi,26,0,"thead",218),x.TgZ(8,"tbody",123,124),x.YNc(10,ji,28,40,"ng-container",219),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.MAs(5),t=x.oxw(),i=x.MAs(138);x.xp6(2),x.HOy("Total Records: ",t.importeddataAPI.length," | Valid Records:",t.importeddataAPI.length-t.inValidEntry," | Invalid Records: ",t.inValidEntry," | Total Unique Records: ",t.importeddataAPI.length-t.uniqueEntry," "),x.xp6(1),x.Q6J("ngIf",t.RepeatcontactFromAPI.length>0),x.xp6(1),x.Q6J("executeRefreshOutsideAngularZone",!0)("items",t.importeddataAPI)("parentScroll",i),x.xp6(3),x.Q6J("ngIf",t.importeddataAPI.length>0),x.xp6(3),x.Q6J("ngForOf",e.viewPortItems)("ngForTrackBy",t.ImportTrackByFunction)}}const zi=function(e){return{"is-invalid":e}};let Wi=(()=>{class e{constructor(e,t,i,n,r,o,a,l,s,c,u){this.changeDetectorRef=e,this.filterService=t,this.companyLedgerService=i,this.natureofTranService=n,this.LedgerhisService=r,this.inventoryService=o,this.route=a,this.router=l,this.alertService=s,this.location=c,this.alert=u,this.popupwindow="",this.isList=!0,this.isCollapsed=!0,this.isScrollEnabled=!0,this.OnlyGroups=!1,this.showTrailBal=!1,this.OnlyLedgers=!1,this.httpfunction=new m.r,this.ledgerData=[],this.isNativeApp=!1,this._sgId=0,this.selectedAll=!1,this.isMultipleLedgerDelete=!1,this.noDataImage=!1,this.GroupLedgers=[],this.GroupLedgersWithoutSelectedItem=[],this.isRoundOffSelected=!1,this.isResevredgroup=!1,this.isIndirectIncome=!1,this.isFixedAssets=!1,this.IsStockLedger=!1,this.IsUnusedLedger=!1,this.TotalUnusedLEdger=0,this.Filter=new Qt.Jw,this._chkOpening=!1,this._LedgerId=0,this.drAmountSum=0,this.crAmountSum=0,this.balAmountSum=0,this.IsImportHidden=!0,this.isSubmited=!1,this.importeddataAPI=[],this.inValidEntry=[],this.uniqueEntry=[],this.RepeatcontactFromAPI=[],this.showLedegrHistoryModal=!1,this.showTransactionModal=!1,this.VoucherType="",this.VoucherId=0,this.currentScrollPosition=0,this.Duplicate=!1,this.SignupId=this.companyLedgerService.getSignupId,this.UserId=this.companyLedgerService.GetUserId,this.companyLedgerService.GetAlldatawithsub(!0),this.companyLedgerService.isGetSubscribe=!0,this.subscription=this.companyLedgerService.resultObs.subscribe(()=>{if(this.ledgerData=JSON.parse(JSON.stringify(this.companyLedgerService.result)),this.GroupLedgers=this.companyLedgerService.result.filter(e=>1==e.IsGrp&&2!=e.St),""!=this.httpfunction.getStorage("_filterData")){let t=JSON.parse(this.httpfunction.getStorage("_filterData"));if(null!=t){var e=t.find(e=>"CompanyLedger"==e.Module);(null!=e||null!=e)&&(this.currentLedger=e.SearchFilter,this.FilterData())}}}),this.companyLedgerService.singleresult=new d.dJ,this.parentLedger=null,this.companyLedgerService.singleresult.St=Jt.D.Active,this.companyLedgerService.singleresult.PI=0,this.companyLedgerService.singleresult.CI=this.companyLedgerService.getCompanyId,this.companyLedgerService.singleresult.Cat="",this._Todate=new Date,this.companyLedgerService.ExportColumn=[{title:"Ledger",dataKey:"LN",size:260},{title:"Category",dataKey:"Cat",size:100},{title:"Opening Balance",dataKey:"OB",size:100},{title:"Current Balance",dataKey:"CB",size:100}],this.companyLedgerService.ExportName="CompanyLedger_List",this.companyLedgerService.ExportCompanyName=this.companyLedgerService.getCompanyData.CN}onPopState(e){this.isList||(this.isList=!this.isList)}cancel(){this.httpfunction.scrolltop(),this.isScrollEnabled=!0}doRefresh(e){this.filterService.updatedata(!0,"Chart Of Accounts"),this.companyLedgerService.refreshEvent=e.target,this.FilterData()}ngOnInit(){setTimeout(()=>{this.companyLedgerService.arrowDownEvent(150)},800),setTimeout(()=>{this.filterService.changeFilterWithbottomfilter(!1,!1,"Chart Of Accounts"),this.companyLedgerService.arrowDownEvent(this.companyLedgerService.selectedRowIndex)},200),this.SignupId=this.companyLedgerService.getSignupId,this.UserId=this.companyLedgerService.GetUserId,this.httpfunction.scrolltop(),this.isScrollEnabled=!0,this.companyLedgerService.refreshEvent=null,setTimeout(()=>{null!=this.searchControl&&this.searchControl.focus()},200);let e=this;if(null!=this.transactionModal&&(this.transactionModal.onEsc=function(){e.showTransactionModal=!1,e.transactionModal.hide(),document.scrollingElement.scrollTop=e.currentScrollPosition}),null!=this._LedgerHistoryModal){let e=this;this._LedgerHistoryModal.onEsc=function(){e._LedgerHistoryModal.hide(),document.scrollingElement.scrollTop=e.currentScrollPosition,this._LedgerId=0}}this.httpfunction.IsMobileview()||(document.onkeydown=this.OnKeydown.bind(this)),this.GroupLedgers=this.companyLedgerService.result.filter(e=>1==e.IsGrp&&2!=e.St)}goback(){this.location.back()}routingScroll(e,t){scrollposition=document.scrollingElement.scrollTop,this.router.navigate(""===t?["/transactions/ledgeredit/"+e]:["/transactions/ledgeradd/"+e+"/"+t])}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}showTrialBal(){this.ledgerData.forEach(e=>{this.LedgerhisService.LedgerHistoryById(e.UIDN).subscribe(t=>{e.drAmountSum=t.data.reduce((e,t)=>e+t.VDrAmt,0),e.crAmountSum=t.data.reduce((e,t)=>e+t.VCrAmt,0),e.balAmountSum=e.drAmountSum-e.crAmountSum})})}LedgerHistory(e,t){e.Expd?setTimeout(function(){e.Expd=!e.Expd},1e3):(e.Expd=!e.Expd,this.LedgerHistoryById(e,t))}LedgerHistoryById(e,t){null!=e.UIDN&&e.UIDN>0&&(this.LedgerhisService.showMessage=!1,null!=e.Remarks&&e.Remarks.length>0||this.LedgerhisService.LedgerHistoryById(e.UIDN).subscribe(i=>{1==t?(e.drAmountSum=i.data.reduce((e,t)=>e+t.VDrAmt,0),e.crAmountSum=i.data.reduce((e,t)=>e+t.VCrAmt,0),e.balAmountSum=e.drAmountSum-e.crAmountSum):e.Remarks=i.data}))}showGroupsOnly(){this.httpfunction.IsMobileview()||this.showMobileGroupsOnly()}showMobileGroupsOnly(){this.ledgerData=this.OnlyGroups?this.companyLedgerService.result.filter(null!=this.currentLedger&&this.currentLedger.UIDN>0?e=>1==e.IsGrp&&(e.UIDN==this.currentLedger.UIDN||e.ancestor.includes(this.currentLedger.UIDN.toString())):e=>1==e.IsGrp):null!=this.currentLedger&&this.currentLedger.UIDN>0?this.companyLedgerService.result.filter(e=>e.UIDN==this.currentLedger.UIDN||e.ancestor.includes(this.currentLedger.UIDN.toString())):this.companyLedgerService.result}showLedgerOnly(){this.httpfunction.IsMobileview()||this.showMobileLedgersOnly()}showMobileLedgersOnly(){this.ledgerData=this.OnlyLedgers?this.companyLedgerService.result.filter(null!=this.currentLedger&&this.currentLedger.UIDN>0?e=>0==e.IsGrp&&(e.UIDN==this.currentLedger.UIDN||e.ancestor.includes(this.currentLedger.UIDN.toString())):e=>0==e.IsGrp):null!=this.currentLedger&&this.currentLedger.UIDN>0?this.companyLedgerService.result.filter(e=>e.UIDN==this.currentLedger.UIDN||e.ancestor.includes(this.currentLedger.UIDN.toString())):this.companyLedgerService.result}FilterData(){if(window.scrollTo(0,0),null!=this.currentLedger&&this.currentLedger.UIDN>0){var e=this.companyLedgerService.result.filter(e=>e.UIDN==this.currentLedger.UIDN||e.ancestor.includes(this.currentLedger.UIDN.toString()));this.filterService.fillLocalData(e[0],"CompanyLedger")}else this.filterService.fillLocalData("","CompanyLedger");this.showMobileGroupsOnly(),document.scrollingElement.scrollTop=scrollposition,scrollposition=0,this.companyLedgerService.hidesearch()}OnKeydown(e){var t=e.key||e.keyCode;("g"==t||"F1"==t)&&e.altKey&&(this.OnlyGroups=!this.OnlyGroups),"p"==t&&e.altKey&&this.exportheader(1),"s"==t&&e.altKey&&this.exportheader(2),"e"==t&&e.altKey&&e.ctrlKey&&this.exportheader(3)}OnCancel(){this._chkOpening=!1,this._ExportLedgModal.hide()}onToDateSelect(e){this._Todate=e}exportheader(e){let t="All";null!=this.currentLedger&&null!=this.currentLedger&&(t=this.currentLedger.LN),this.companyLedgerService.filterHeader="  Ledger : "+t+" ",this.companyLedgerService.Export(e)}OnExportSubmit(){let e=new Z.p;e.chkOpening=this._chkOpening,e.Todate=this._Todate,e.CompanyId=this.companyLedgerService.getCompanyId,e.SignupId=this.companyLedgerService.getSignupId,this.companyLedgerService.page=1,this.companyLedgerService.ExportLedger(e).subscribe(e=>{var t=new Date,i=new Blob([e.data],{type:"text/xml"});(0,Vt.saveAs)(i,"LedgerExport_"+t.toISOString()+".xml")})}exportForTally(){this._ExportLedgModal.show(),this._SearchModal.hide()}openTransaction(e,t,i,n){i>0&&null!=i&&this.router.navigate(["/marketing/bookingform/"+i]),""==t&&(t=0),this.currentScrollPosition=document.scrollingElement.scrollTop,this.VoucherType=e,this.showTransactionModal=!0,this.VoucherId=t,this.Duplicate=n,this.transactionModal.show()}onTransactionSubmit(e){(null==e||e.isHide)&&(this.showTransactionModal=!1,this.transactionModal.hide()),document.scrollingElement.scrollTop=this.currentScrollPosition}OpenLedgerHistoryPopUp(e){this.currentScrollPosition=document.scrollingElement.scrollTop,this._LedgerId=e,this.showLedegrHistoryModal=!0,this._LedgerHistoryModal.show()}onLedgHistoryHide(){this.showLedegrHistoryModal=!1,this._LedgerHistoryModal.hide(),document.scrollingElement.scrollTop=this.currentScrollPosition,this._LedgerId=0}preventpopup(e){e.stopPropagation()}toggleDropdown(){$("#adv-search").dropdown("hide")}advSearchM(){this._SearchModal.show()}ClearFilter(){this.currentLedger=null,this.OnlyGroups=null,this.showTrailBal=null,this.FilterData()}editOnArrowEvent(e,t){this.routingScroll(e,t)}selectAllchange(e){this.ledgerData.forEach(function(t){t.Ick=e.target.checked});var t=this.ledgerData.filter(e=>1==e.Ick).map(e=>e.UIDN).length;this.isMultipleLedgerDelete=0!=t}selectSinglechange(e,t){const i=e.target.checked,n=e=>{this.ledgerData.filter(t=>t.PI===e).forEach(e=>{e.Ick=i,e.IsGrp&&n(e.UIDN)})},r=this.ledgerData.find(e=>e.UIDN===t);r&&(r.Ick=i,r.IsGrp&&n(r.UIDN));var o=this.ledgerData.filter(e=>1==e.Ick).length;this.isMultipleLedgerDelete=0!=o,this.selectedAll=this.companyLedgerService.result.length==o}MultipleVoucherDelete(){var e=this.ledgerData.filter(e=>1==e.Ick).map(e=>e.UIDN);e.length>0?this.httpfunction.IsMobileview()?this.alertService.showMobileConfirm("Confirm Delete","Are you sure you want to delete this record","No","Delete").then(t=>{if(null!=t&&1==t.data)for(let i=0;i<e.length;i++)this.companyLedgerService.deleteMob(e[i])}):this.alertService.showconfirm("Confirm","Are you sure you want to delete this record",["Yes","No"],null).subscribe(t=>{null!=t&&"Yes"==t.answer&&this.companyLedgerService.MultipleVoucherdelete(e).subscribe(()=>{this.FilterData();for(let i=0;i<e.length;i++){var t=this.ledgerData.findIndex(t=>t.UIDN==e[i]);t>-1&&this.ledgerData.splice(t,1)}})}):this.alertService.showError("Error","Please select atleast one record")}ChangeGroup(){var e;e=this.ledgerData.filter(e=>1==e.Ick).map(e=>e.UIDN),this.Filter.LedId=e,this.Filter.ParentLedgerId=this.parentLedger.UIDN,e.length>0?this.companyLedgerService.GroupChange(this.Filter).subscribe(e=>{if(e.data.m_Item2>0){this._modalChangeGroup.hide(),this.httpfunction.getStorage("_legData"+this.companyLedgerService.getCompanyId+"_"+this.companyLedgerService.getSignupId)&&this.httpfunction.removeItem("_legData"+this.companyLedgerService.getCompanyId+"_"+this.companyLedgerService.getSignupId);for(var t={},i=0;i<e.data.m_Item1.length;i++)null==t[e.data.m_Item1[i].PI]&&(t[e.data.m_Item1[i].PI]=[]),t[e.data.m_Item1[i].PI].push(e.data.m_Item1[i]);this.companyLedgerService.result=this.companyLedgerService.hierarhySort(t,0,[]),this.companyLedgerService.totalItems=this.companyLedgerService.result.length,this.companyLedgerService.pageWithoutLoad=this.companyLedgerService.totalItems/this.companyLedgerService.pageSize,this.httpfunction.setStorage("_legData"+this.companyLedgerService.getCompanyId+"_"+this.companyLedgerService.getSignupId,JSON.stringify(this.companyLedgerService.result)),this.FilterData()}},()=>{}):this.alertService.showError("Error","Please select atleast one record to change Group")}openChangeModal(){if(this.ledgerData.filter(e=>1==e.Ick).length>0){var e=this.ledgerData.filter(e=>1==e.Ick&&2!=e.St).map(e=>e.PI);this.GroupLedgersWithoutSelectedItem=this.GroupLedgers.filter(t=>!e.includes(t.UIDN)),this._modalChangeGroup.show(),event.stopPropagation(),event.preventDefault()}else this.alertService.showError("Error","Please select atleast one record")}parentSelectionChange(e){if(this.isRoundOffSelected=!1,null==this.companyLedgerService.singleresult.RS||""==this.companyLedgerService.singleresult.RS||null==this.companyLedgerService.singleresult.RS)if(null==e||null==e)this.isParentSelected=!1,this.companyLedgerService.singleresult.Cat="",this.companyLedgerService.singleresult.IsBank=!1,this.companyLedgerService.singleresult.IsCash=!1,this.companyLedgerService.singleresult.IsSD=!1,this.companyLedgerService.singleresult.IsSC=!1,this.companyLedgerService.singleresult.IsPU=!1,this.companyLedgerService.singleresult.IsSL=!1,this.companyLedgerService.singleresult.isTL=!1,this.companyLedgerService.singleresult.IsBWOn=!1;else{this.isParentSelected=!0;var t=this.companyLedgerService.result.filter(e=>"Stock-in-hand"==e.RS);if("Stock-in-hand"==e.RS)this.IsStockLedger=!0;else if("Stock-in-hand"!=e.RS)if(t.length>0)for(let i=0;i<e.ancestor.length;i++){if(e.ancestor[i]==this.companyLedgerService.result.filter(e=>"Indirect Expenses"==e.RS)[0].UIDN&&(this.isRoundOffSelected=!0),e.ancestor[i]==t[0].UIDN){this.IsStockLedger=!0;break}this.IsStockLedger=!1,this.isIndirectIncome=!1;for(let t=0;t<e.ancestor.length;t++)e.ancestor[t]==this.companyLedgerService.result.filter(e=>"Indirect Incomes"==e.RS)[0].UIDN&&(this.isIndirectIncome=!0);this.isFixedAssets=!1;for(let t=0;t<e.ancestor.length;t++)e.ancestor[t]==this.companyLedgerService.result.filter(e=>"Fixed Assets"==e.RS)[0].UIDN&&(this.isFixedAssets=!0)}else this.IsStockLedger=!1;else this.IsStockLedger=!1;this.companyLedgerService.singleresult.Cat=e.Cat,this.companyLedgerService.singleresult.IsBank=e.IsBank,this.companyLedgerService.singleresult.IsCash=e.IsCash,this.companyLedgerService.singleresult.IsSD=e.IsSD,this.companyLedgerService.singleresult.IsSC=e.IsSC,this.companyLedgerService.singleresult.IsPU=e.IsPU,this.companyLedgerService.singleresult.IsSL=e.IsSL,this.companyLedgerService.singleresult.isTL=e.isTL,this.companyLedgerService.singleresult.IsBWOn=e.IsBWOn,(e.IsSC||e.IsSD)&&!e.IsGrp&&(this.companyLedgerService.singleresult.RT="Regular"),e.IsPU?(this.transactiontype=this.natureofTranService.result.filter(e=>0==e.IsSP),this.companyLedgerService.singleresult.NTId=this.transactiontype.filter(e=>"Not Applicable"==e.NA)[0].UIDN):e.IsSL&&(this.transactiontype=this.natureofTranService.result.filter(e=>1==e.IsSP),this.companyLedgerService.singleresult.NTId=this.transactiontype.filter(e=>"Not Applicable"==e.NA)[0].UIDN)}}UnusedLedger(){this.IsUnusedLedger=!this.IsUnusedLedger,0==this.IsUnusedLedger?this.FilterData():this.companyLedgerService.GetAllUnusedLedger().subscribe(e=>{this.FilterData();var t=e.data.m_Item1.map(e=>e.UIDN);this.ledgerData=this.ledgerData.filter(({UIDN:e})=>t.includes(e)),this.TotalUnusedLEdger=e.data.m_Item2})}OpenTrialBalance(e){this.router.navigate(["reports/trialbalance/"+e])}toggleExcelImport(){this._myImageModal.show(),this.IsImportHidden=!this.IsImportHidden}CloseImagePopup(){this._myImageModal.hide()}onExcelAdd(e){this.excelfileData=[];for(let t=0;t<e.length;t++){let i=new A.Q;i.name=e[t].name,i.operationType=0,i.src=e[t].src,i.CompanyId=this.companyLedgerService.getCompanyId,i.SignupId=this.companyLedgerService.getSignupId,i.FileLength=e[t].size,i.ModifiedDate=new Date,i.CreatedDate=new Date,i.CreatedBy=this.companyLedgerService.userid,i.modifyBy=this.companyLedgerService.userid,this.excelfileData.push(i)}}onExcelSubmit(){null!=this.excelfileData&&this.excelfileData.length>0?(this.companyLedgerService.ImportExcel(this.excelfileData).subscribe(e=>{if(null==e.data.m_Item1)return this.alert.showError("Error","Excel column names are incorrect. Please double check your excel column name with predefined format."),void(this.isSubmited=!0);""!=e.data.m_Item1&&null!=e.data.m_Item1&&(this.importeddataAPI=e.data.m_Item1,this.inValidEntry=this.importeddataAPI.filter(e=>1==e.invalidProp).length,this.uniqueEntry=this.importeddataAPI.filter(e=>1==e.RepeatContactProp).length,this._myInqImportedDataViewModal.show(),this.isSubmited=!0),this.excelfileData=[],this.IsImportHidden=!this.IsImportHidden},()=>{this.excelfileData=[],this.IsImportHidden=!this.IsImportHidden}),this.SiteIdUpload=[],this._myImageModal.hide(),this.IsImportHidden=!this.IsImportHidden):this.alertService.showError("Error","Please select atleast one File")}ValidateImportRow(e){e.comments="",(null==e.LN||""==e.LN)&&(e.comments+="Invalid ledger name \n"),(null==e.PN||""==e.PN)&&(e.comments+="Invalid parent name \n"),null==e.OB&&(e.comments+="Invalid opening balance \n"),(null==e.LT||""==e.LT)&&(e.comments+="Invalid ledger type \n"),(null==e.AffDt||""==e.AffDt)&&(e.comments+="Invalid Affected Date \n"),e.invalidProp=""!=e.comments,this.inValidEntry=null,this.inValidEntry=this.importeddataAPI.filter(e=>1==e.invalidProp).length,this.uniqueEntry=null,this.uniqueEntry=this.importeddataAPI.filter(e=>1==e.RepeatContactProp).length}ValidateAffectedDate(e,t){null==e&&(t.AffDt=null),this.ValidateImportRow(t)}AffectedDateSelect(e,t,i){this.importeddataAPI[t].AffDt=e,this.ValidateImportRow(i)}LedgerImportContinue(){var e=this.importeddataAPI.filter(e=>1==e.invalidProp);e.length>0?this.alert.showError("Error","Please modify grid records. we still have "+e.length+" invalid records"):this.importeddataAPI.length>0?(this.RepeatcontactFromAPI=[],this.companyLedgerService.ImportDatafromGrid(this.importeddataAPI).subscribe(e=>{e.data.length>0?this.RepeatcontactFromAPI=e.data:(this._myImageModal.hide(),this._myInqImportedDataViewModal.hide(),this.alert.showSuccess("Error","Ledger(s) Imported successfully"))},()=>{this.alert.showError("Error","Error while File import.Please Correct Sheet")})):this.alert.showError("Error","Ledger Can't imported due to Missing required fields.")}ImportTrackByFunction(e){return e.Index}}return e.\u0275fac=function(t){return new(t||e)(x.Y36(x.sBO),x.Y36(I.i),x.Y36(o.Q),x.Y36(Ft.F),x.Y36(Rt.I),x.Y36(u.V),x.Y36(w.gz),x.Y36(w.F0),x.Y36(C.Rq),x.Y36(n.Ye),x.Y36(C.Rq))},e.\u0275cmp=x.Xpm({type:e,selectors:[["app-companyledger-list"]],viewQuery:function(e,t){if(1&e&&(x.Gf(Et,5),x.Gf(Ht,5),x.Gf(Ot,7,l.w9),x.Gf(Pt,7),x.Gf(Gt,7),x.Gf($t,5),x.Gf(Bt,7),x.Gf(Yt,5),x.Gf(jt,5),x.Gf(Kt,7)),2&e){let e;x.iGM(e=x.CRH())&&(t.form=e.first),x.iGM(e=x.CRH())&&(t._modalChangeGroup=e.first),x.iGM(e=x.CRH())&&(t.searchControl=e.first),x.iGM(e=x.CRH())&&(t.transactionModal=e.first),x.iGM(e=x.CRH())&&(t._ExportLedgModal=e.first),x.iGM(e=x.CRH())&&(t._SearchModal=e.first),x.iGM(e=x.CRH())&&(t._LedgerHistoryModal=e.first),x.iGM(e=x.CRH())&&(t.virtualScroll=e.first),x.iGM(e=x.CRH())&&(t._myImageModal=e.first),x.iGM(e=x.CRH())&&(t._myInqImportedDataViewModal=e.first)}},hostBindings:function(e,t){1&e&&x.NdJ("popstate",function(e){return t.onPopState(e)},!1,x.Jf7)},features:[x._Bn([Rt.I,o.Q])],decls:148,vars:28,consts:[[1,"card"],["class","customsearch",4,"ngIf"],["class","customsearchM",4,"ngIf"],["class","table-responsive","id","tableContainer",4,"ngIf"],["id","tableContainerbody","class","tableContainerbodymobile",4,"ngIf"],[4,"ngIf"],["class","add-panel",3,"toggleAction",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["TransactionModal","bs-modal"],["class","modal-dialog fullview modal-lg","role","document",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modalNew","fade",2,"width","90%"],["ExportLedgModal","bs-modal"],["role","document",1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"content"],[1,"c-switch","c-switch-pill","c-switch-primary","float-left","mr-3","mb-3"],["type","checkbox",1,"c-switch-input",3,"checked","change"],[1,"c-switch-slider"],[1,"modal-footer","mt-3",2,"padding-top","50px"],["type","button",1,"btn","btn-dark",3,"click"],["type","button",1,"btn","btn-primary","waves-effect",3,"click"],["LedgerHistoryModal","bs-modal"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","SearchModal","aria-hidden","true",1,"modal","fade",2,"z-index","99999"],["SearchModal","bs-modal"],["role","document",1,"container-fluid","p-0",2,"height","100%","background-color","white"],[1,"modal-content",2,"height","100%"],["role","form",3,"ngSubmit"],["ffilter","ngForm"],[1,"container-fluid"],[1,"row","mt-2"],[1,"col-md-6","col-sm-12"],["for","Ledger"],["selectOnTab","true","name","Ledger1","bindLabel","LN","placeholder","Select Ledger/Group",3,"virtualScroll","items","ngModel","loading","ngModelChange"],["Ledger1","ngModel"],["ng-option-tmp",""],["for","customSwitch1"],[1,"c-switch","c-switch-pill","c-switch-primary"],["type","checkbox","name","OnlyGroups","id","OnlyGroups",1,"c-switch-input",3,"ngModel","ngModelChange"],[1,"navbar","fixed-bottom","navbar-expand-sm","navbar-dark","bg-light"],[1,"navbar-nav","ml-auto","d-flex","flex-row-reverse","bd-highlight"],[1,"nav-item","active"],["type","button",1,"btn","btn-primary","pull-right",3,"click"],[1,"fas","fa-search","mr-2"],[1,"nav-item","active","mr-2"],["bsModal","","data-backdrop","false","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modalNew","fade",2,"width","90%"],["myModal","bs-modal"],["novalidate","",3,"ScrollToInvalid","ngSubmit"],["frmSite","ngForm"],[1,"form-group","col-md-12","p-0"],[1,"md-form","form-group","col-sm-12","p-0"],["selectOnTab","true","name","ParentGroup","bindLabel","LN","placeholder","Select Group",3,"virtualScroll","disabled","ngClass","required","items","ngModel","loading","change","ngModelChange"],["grpled","","ParentGroup","ngModel"],["ng-header-tmp",""],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","text-left"],["ImageModal","bs-modal"],["frmImage","ngForm"],[1,"container"],[1,"input-group"],["target","_blank","href","https://api.accountbook24.com/sample/CompanyLedgerImport.xlsx",1,"col-sm-2"],["maxFiles","1","required","","maxSize","2","fileExt","xls, xlsx",3,"filelist","uploadStatus"],["Importexcel",""],[1,"modal-footer","mt-3"],["type","submit",1,"btn","btn-primary"],["bsModal","","tabindex","-1","role","dsialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"fullModal","fade",2,"width","100%"],["myInqImportedDataViewModal","bs-modal"],["role","document",1,"modal-dialog1","modal-md"],["importcontainer",""],["class","card-body col-md-12","id","tableContainer",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"customsearch"],[3,"submit"],[1,"c-header-nav"],[1,"mb-3"],[1,"c-header-back",3,"click"],[1,"c-icon","c-icon-lg","cil-arrow-left"],[1,"mr-1"],["appendTo","body","selectOnTab","true","name","Ledger1","bindLabel","LN","placeholder","Select Ledger/Group",1,"maxpanel",3,"virtualScroll","items","ngModel","loading","ngModelChange"],[1,"mb-2"],["type","button",1,"btn","btnSmW","btn-primary",3,"click"],[1,"cil-search","btn-icon","mr-2"],[1,"none"],[1,"ml-1","pb-2"],["href","javascript:void(0)",1,"mb-2","font-weight-bold",3,"click"],["class","ml-1 pb-2",4,"ngIf"],["class","mx-2 mb-3",4,"ngIf"],[1,"ml-2","pb-2"],["title","History","placement","bottom",1,"pl-2","d-none",3,"hidden"],[1,"fas","fa-history","text-primary","display-6",3,"click"],["href","javascript:void(0)","accesslevel","Edit","mname","Led",1,"mb-2","font-weight-bold","text-info",3,"appRole","SignupId","UserId","click"],[1,"mx-2","mb-3"],["type","button","accesslevel","Delete","mname","Led",1,"btn","btn-link","text-danger","font-weight-bold","mt-2","pr-3","pl-0",3,"appRole","SignupId","UserId","clickAllowed"],[1,"customsearchM"],[1,"mr-1","mb-2","ml-2"],["name","chevron-back",3,"click"],["name","search","href","javascript:void(0)",3,"click"],[1,"mb-3","mt-1","LeftLi","text-center"],[1,"col","Font16","pl-1"],["id","tableContainer",1,"table-responsive"],["class","card-header p-1 pt-2","id","formHeader",4,"ngIf"],["class","table table-left table-bordered table-striped",3,"fxHeader",4,"ngIf"],["id","fxheaderDiv","class","table-responsive fxheaderDiv",4,"ngIf"],["id","formHeader",1,"card-header","p-1","pt-2"],[1,"row"],[1,"col-md-5","col-sm-12","PageNameFsize"],[1,"col-md-2","col-sm-12"],[1,"c-switch","c-switch-pill","c-switch-primary","float-right"],["type","checkbox","name","OnlyLedgers","id","OnlyLedgers",1,"c-switch-input",3,"ngModel","change","ngModelChange"],[1,"mb-2","float-right","mr-2","font-weight-bold","sg"],["type","checkbox","name","OnlyGroups","id","OnlyGroups",1,"c-switch-input",3,"ngModel","change","ngModelChange"],[1,"col-md-3","col-sm-12"],["class","mx-2 text-wrap text-right pr-4",4,"ngIf"],[1,"mx-2","text-wrap","text-right","pr-4"],[1,"table","table-left","table-bordered","table-striped",3,"fxHeader"],["id","tableContainerHead"],[1,"form-check"],["type","checkbox","id","item_All",1,"form-check-input",3,"checked","ngModel","ngModelChange","change"],["for","item_All",1,"form-check-label"],["id","tableContainerbody"],["container",""],[4,"ngFor","ngForOf"],["autofocus","",3,"tabindex","keydown.enter","keydown.arrowdown","keydown.arrowup",4,"ngIf"],["autofocus","",3,"tabindex","keydown.enter","keydown.arrowdown","keydown.arrowup"],["type","checkbox",1,"form-check-input",3,"checked","ngModel","id","ngModelChange","change"],[1,"form-check-label",3,"for"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[2,"width","8%"],["dropdown","","container","body",1,"btn-group","actionmenu"],["id","button-state-change","dropdownToggle","","type","button","aria-controls","dropdown-state-change",1,"border-0","waves-effect","btn-primary","btn-floating","btn-sm"],[1,"fas","fa-ellipsis-v"],["id","dropdown-state-change","class","dropdown-menu dropdown-menu-right","role","menu","aria-labelledby","button-state-change",4,"dropdownMenu"],[1,"badge","badge-primary"],["target","_blank",3,"href",4,"ngFor","ngForOf"],["target","_blank",3,"href"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["id","dropdown-state-change","role","menu","aria-labelledby","button-state-change",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem"],["href","javascript:void(0)","accesslevel","Edit","mname","Led",1,"dropdown-item",3,"appRole","SignupId","UserId","click"],["role","menuitem",4,"ngIf"],["accesslevel","View","mname","Led","href","javascript:void(0)",1,"dropdown-item",3,"appRole","SignupId","UserId","click"],["href","javascript:void(0)","accesslevel","Add","mname","Led",1,"dropdown-item",3,"hidden","appRole","SignupId","UserId","click"],["accesslevel","Add","mname","Led",1,"dropdown-item",3,"hidden","appRole","SignupId","UserId","click"],["href","javascript:void(0)","accesslevel","Delete","mname","Led",1,"dropdown-item",3,"appRole","SignupId","UserId","clickAllowed"],["colspan","13"],[1,"table","table-bordered"],["target","blank",3,"click"],[3,"dateValue"],["isDate","false",3,"dateValue"],["id","fxheaderDiv",1,"table-responsive","fxheaderDiv"],["id","fxheadertable",1,"table","table-bordered","table-striped","text-center"],["id","tableContainerbody",1,"tableContainerbodymobile"],["slot","fixed",3,"ionRefresh"],["pullingText","Pull to refresh","refreshingSpinner","bubbles","refreshingText","Refreshing..."],["approxItemHeight","88px",3,"items"],[3,"rowselected","click",4,"virtualItem"],[3,"click"],[1,"text-dark"],["size","4",1,"text-right"],[1,"text-left","mr-1"],["class","btn btn-primary btn-esm btn-rounded waves-effect waves-light","href","javascript:void(0)","accesslevel","Add","mname","Led",3,"appRole","rLink","SignupId","UserId",4,"ngIf"],["href","javascript:void(0)","class","btn btn-primary btn-esm btn-rounded waves-effect waves-light ml-2","accesslevel","Add","mname","Led",3,"appRole","rLink","SignupId","UserId",4,"ngIf"],["href","javascript:void(0)","accesslevel","Edit","mname","Led",1,"card-link","text-center",3,"appRole","SignupId","UserId","click"],["name","create-outline","color","primary"],["href","javascript:void(0)","accesslevel","Delete","mname","Led",1,"card-link","text-center",3,"appRole","SignupId","UserId","clickAllowed"],["name","trash-outline","color","danger"],["href","javascript:void(0)","accesslevel","Add","mname","Led",1,"btn","btn-primary","btn-esm","btn-rounded","waves-effect","waves-light",3,"appRole","rLink","SignupId","UserId"],["aria-hidden","true",1,"fas","fa-plus","pr-2","pt-1"],["href","javascript:void(0)","accesslevel","Add","mname","Led",1,"btn","btn-primary","btn-esm","btn-rounded","waves-effect","waves-light","ml-2",3,"appRole","rLink","SignupId","UserId"],["class","skCard",4,"ngFor","ngForOf"],[1,"skCard"],["animated","",2,"width","80%"],["size","4",2,"text-align","-webkit-right"],[1,"table","table-bordered","table-striped","text-center",3,"fxHeader"],["animated","",2,"width","100%"],[2,"width","40%"],[1,"add-panel",3,"toggleAction"],["id","add-panel-switch",1,"switch","text-right"],["tooltip","Print",1,"action-button","bottom2","option","four","border-0","waves-effect","btn-amber","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-print"],["tooltip","Pdf",1,"action-button","bottom2","option","three","border-0","waves-effect","btn-purple","btn-floating",3,"click"],["aria-hidden","true",1,"far","fa-file-pdf"],["tooltip","Import",1,"action-button","bottom2","option","two","border-0","waves-effect","btn-orange","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-upload"],["tooltip","Export",1,"action-button","bottom2","option","one","border-0","waves-effect","btn-pink","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-download"],[1,"border-0","waves-effect","btn-dark","btn-floating","btn-lg","action-button","plus","abs","bottom2"],["aria-hidden","true",1,"fas","fa-ellipsis-v"],["accesslevel","Add","mname","Led","rLink","/transactions/ledgeradd/0/false","tooltip","Add Ledger",1,"border-0","waves-effect","btn-primary","btn-floating","btn-lg","abs","bottom1",3,"appRole","SignupId","UserId"],["accesslevel","Add","mname","Led","rLink","/transactions/ledgeradd/0/true","tooltip","Add Group",1,"border-0","waves-effect","btn-primary","btn-floating",3,"appRole","SignupId","UserId"],["tooltip","UnUsed Ledger",1,"action-button","bottom2","option","five","border-0","waves-effect","btn-success","btn-floating",3,"click"],["aria-hidden","true",1,"fa","fa-briefcase"],["tooltip","Export",1,"action-button","bottom2","option","two","border-0","waves-effect","btn-pink","btn-floating",3,"click"],["tooltip","Multiple Delete",1,"action-button","bottom2","option","one","border-0","waves-effect","btn-danger","btn-floating",3,"click"],[1,"fas","fa-trash"],["role","document",1,"modal-dialog","fullview","modal-lg"],["id","voucherContent",1,"modal-content"],[1,"fas","fa-times","fa-lg",3,"click"],[3,"TransactionredirectOnCancel","IsDuplicate","VoucherType","VoucherId","TransactionredirectAction"],["id","lblTodate"],["type","text","appDatepicker","","id","ToDate","name","ToDate",1,"form-control",3,"startDate","selected"],["ToDate",""],[3,"LedgId","IsCallasPopup"],["ng-label-tmp",""],["href","javascript:void(0)","title","Edit","accesslevel","Edit","mname","Led","placement","bottom",1,"pl-1","d-none",3,"appRole","SignupId","UserId"],[1,"fas","fa-pen","text-primary","display-6"],["id","tableContainer",1,"card-body","col-md-12"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"executeRefreshOutsideAngularZone","items","parentScroll","vsUpdate"],["scrollImport",""],[1,"table","table-bordered","table-striped",3,"fxHeader"],["id","tableContainerHead",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["role","alert",1,"alert","alert-danger"],[2,"min-width","225px","white-space","pre-line"],[2,"min-width","100px"],[2,"min-width","250px"],[2,"white-space","pre-line"],["autofocus","","type","text",1,"form-control",3,"ngModel","name","id","change","ngModelChange"],["name","PN","bindLabel","LN","bindValue","UIDN","placeholder","Select GroupLedgers","required","",3,"items","ngModel","loading","id","name","change","ngModelChange"],["PN","ngModel"],["autofocus","","type","number",1,"form-control",3,"ngModel","name","id","change","ngModelChange"],["type","text","appDatepicker","","placeholder","Select Affected Date","autocomplete","none",1,"form-control",3,"startDate","name","id","selected"],["AffDt",""]],template:function(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",0),x.YNc(1,ei,23,6,"div",1),x.YNc(2,ti,11,0,"div",2),x.YNc(3,qi,5,3,"div",3),x.YNc(4,_i,6,1,"div",4),x.YNc(5,ki,2,1,"div",5),x.YNc(6,Vi,22,1,"div",5),x.YNc(7,Ri,18,4,"div",6),x.YNc(8,Qi,20,4,"div",6),x.qZA(),x.TgZ(9,"div",7,8),x.YNc(11,Fi,8,5,"div",9),x.qZA(),x.TgZ(12,"div",10,11),x.TgZ(14,"div",12),x.TgZ(15,"div",13),x.TgZ(16,"div",14),x.TgZ(17,"h4",15),x._uU(18,"Exporting List of Ledgers"),x.qZA(),x.TgZ(19,"button",16),x.NdJ("click",function(){return t.OnCancel()}),x.TgZ(20,"span",17),x._uU(21,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(22,"div",18),x.TgZ(23,"div",19),x.TgZ(24,"strong"),x._uU(25,"Export closing balance as opening :"),x.qZA(),x.TgZ(26,"label",20),x.TgZ(27,"input",21),x.NdJ("change",function(){return t._chkOpening=!("1"==t._chkOpening||1==t._chkOpening)}),x.qZA(),x._UZ(28,"span",22),x.qZA(),x.YNc(29,Ei,5,1,"div",5),x.qZA(),x.TgZ(30,"div",23),x.TgZ(31,"button",24),x.NdJ("click",function(){return t.OnCancel()}),x._uU(32,"No"),x.qZA(),x.TgZ(33,"button",25),x.NdJ("click",function(){return t.OnExportSubmit()}),x._uU(34,"Yes"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(35,"div",7,26),x.YNc(37,Hi,11,2,"div",9),x.qZA(),x.TgZ(38,"div",27,28),x.TgZ(40,"div",29),x.TgZ(41,"div",30),x.TgZ(42,"div",14),x.TgZ(43,"h4",15),x._uU(44,"Advance Search "),x.qZA(),x.TgZ(45,"button",16),x.NdJ("click",function(){return t._SearchModal.hide()}),x.TgZ(46,"span",17),x._uU(47,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(48,"form",31,32),x.NdJ("ngSubmit",function(){return t.FilterData()}),x.TgZ(50,"div",33),x.TgZ(51,"div",34),x.TgZ(52,"div",35),x.TgZ(53,"label",36),x._uU(54,"Select Ledger/Group"),x.qZA(),x.TgZ(55,"ng-select",37,38),x.NdJ("ngModelChange",function(e){return t.currentLedger=e}),x.YNc(57,Oi,4,2,"ng-template",39),x.qZA(),x.qZA(),x.TgZ(58,"div",35),x.TgZ(59,"label",40),x._uU(60," Show Group"),x.qZA(),x._UZ(61,"br"),x.TgZ(62,"label",41),x.TgZ(63,"input",42),x.NdJ("ngModelChange",function(e){return t.OnlyGroups=e}),x.qZA(),x._UZ(64,"span",22),x.qZA(),x.qZA(),x.TgZ(65,"nav",43),x.TgZ(66,"ul",44),x.TgZ(67,"li",45),x.TgZ(68,"button",46),x.NdJ("click",function(){return t.FilterData(),t._SearchModal.hide()}),x._UZ(69,"i",47),x._uU(70,"Search "),x.qZA(),x.qZA(),x.TgZ(71,"li",48),x.TgZ(72,"button",24),x.NdJ("click",function(){return t.ClearFilter(),t._SearchModal.hide()}),x._uU(73," Clear Filter "),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(74,"div",49,50),x.TgZ(76,"div",12),x.TgZ(77,"div",13),x.TgZ(78,"div",14),x.TgZ(79,"h4",15),x._uU(80,"Select Group "),x.qZA(),x.TgZ(81,"button",16),x.NdJ("click",function(){return x.CHM(e),x.MAs(75).hide(),t.parentLedger=null}),x.TgZ(82,"span",17),x._uU(83,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(84,"form",51,52),x.NdJ("ngSubmit",function(){return x.CHM(e),x.MAs(85).form.valid&&t.ChangeGroup()}),x.TgZ(86,"div",18),x.TgZ(87,"div",19),x.TgZ(88,"div",53),x.TgZ(89,"div",54),x.TgZ(90,"ng-select",55,56),x.NdJ("change",function(e){return t.parentSelectionChange(e)})("ngModelChange",function(e){return t.parentLedger=e}),x.YNc(93,$i,2,0,"ng-template",57),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(94,"div",58),x.TgZ(95,"button",24),x.NdJ("click",function(){return x.CHM(e),x.MAs(75).hide(),t.parentLedger=null}),x._uU(96,"Close"),x.qZA(),x.TgZ(97,"button",59),x._uU(98," Change Site "),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(99,"div",10,60),x.TgZ(101,"div",12),x.TgZ(102,"div",13),x.TgZ(103,"div",14),x.TgZ(104,"h4",15),x._uU(105,"Import Ledger"),x.qZA(),x.TgZ(106,"button",16),x.NdJ("click",function(){return t.CloseImagePopup()}),x.TgZ(107,"span",17),x._uU(108,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(109,"form",51,61),x.NdJ("ngSubmit",function(){return x.CHM(e),x.MAs(110).form.valid&&t.onExcelSubmit()}),x.TgZ(111,"div",18),x.TgZ(112,"div",19),x.TgZ(113,"div",62),x.TgZ(114,"div",53),x.TgZ(115,"div",63),x.TgZ(116,"div",54),x.TgZ(117,"a",64),x._uU(118," Download sample "),x.qZA(),x.qZA(),x.TgZ(119,"div",54),x.TgZ(120,"app-file-upload",65,66),x.NdJ("uploadStatus",function(e){return t.onExcelAdd(e)}),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(122,"div",67),x.TgZ(123,"button",68),x._uU(124,"Upload File"),x.qZA(),x.TgZ(125,"button",24),x.NdJ("click",function(){return t.CloseImagePopup()}),x._uU(126,"Close"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(127,"div",69,70),x.TgZ(129,"div",71),x.TgZ(130,"div",13),x.TgZ(131,"div",14),x.TgZ(132,"h4",15),x._uU(133,"Imported Ledger From Sheet "),x.qZA(),x.TgZ(134,"button",16),x.NdJ("click",function(){return x.CHM(e),x.MAs(128).hide()}),x.TgZ(135,"span",17),x._uU(136,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(137,"div",18,72),x.TgZ(139,"div",53),x.TgZ(140,"form",51,61),x.NdJ("ngSubmit",function(){return x.CHM(e),x.MAs(110).form.valid}),x.YNc(142,Ki,11,11,"div",73),x.qZA(),x.qZA(),x.qZA(),x.TgZ(143,"div",58),x.TgZ(144,"button",74),x.NdJ("click",function(){return t.LedgerImportContinue()}),x._uU(145,"Inquiry Import"),x.qZA(),x.TgZ(146,"button",24),x.NdJ("click",function(){return x.CHM(e),x.MAs(128).hide()}),x._uU(147,"Close"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.MAs(85),i=x.MAs(92);x.xp6(1),x.Q6J("ngIf",!t.companyLedgerService.IsMobileview),x.xp6(1),x.Q6J("ngIf",t.companyLedgerService.IsMobileview),x.xp6(1),x.Q6J("ngIf",!t.companyLedgerService.IsMobileview),x.xp6(1),x.Q6J("ngIf",t.ledgerData.length>0&&t.companyLedgerService.IsMobileview),x.xp6(1),x.Q6J("ngIf",0==t.ledgerData.length&&t.companyLedgerService.IsMobileview),x.xp6(1),x.Q6J("ngIf",0==t.ledgerData.length&&!t.companyLedgerService.IsMobileview),x.xp6(1),x.Q6J("ngIf",!t.companyLedgerService.IsMobileview),x.xp6(1),x.Q6J("ngIf",t.companyLedgerService.IsMobileview),x.xp6(3),x.Q6J("ngIf",t.showTransactionModal),x.xp6(16),x.Q6J("checked",1==t._chkOpening),x.xp6(2),x.Q6J("ngIf",1==t._chkOpening),x.xp6(8),x.Q6J("ngIf",t.showLedegrHistoryModal),x.xp6(18),x.Q6J("virtualScroll",!0)("items",t.companyLedgerService.result)("ngModel",t.currentLedger)("loading",t.companyLedgerService.loading),x.xp6(8),x.Q6J("ngModel",t.OnlyGroups),x.xp6(27),x.Q6J("virtualScroll",!0)("disabled",t.isResevredgroup)("ngClass",x.VKq(26,zi,e.submitted&&i.invalid))("required",!t.companyLedgerService.singleresult.IsGrp)("items",t.GroupLedgersWithoutSelectedItem)("ngModel",t.parentLedger)("loading",t.companyLedgerService.loading),x.xp6(30),x.Q6J("filelist",t.excelfileData),x.xp6(22),x.Q6J("ngIf",t.isSubmited)}},directives:[n.O5,N.oB,D._Y,D.JL,D.F,l.w9,D.JJ,D.On,_.x,l.Z2,D.Wl,U.u,n.mk,D.Q7,l.A3,k.Y,y.g,L.gu,R.n,n.sg,J.TO,J.Mq,J.Hz,Q.a,L.W2,L.nJ,L.Wo,L.aJ,L.Rw,L.PM,L.Nd,L.wI,L.CK,S.e,M.i9,_t.L,E.q,H.i,l.bb,O.Vw,D.Fj,D.wV],pipes:[P.s],styles:[".boldfont[_ngcontent-%COMP%]{font-weight:bold}.positive[_ngcontent-%COMP%]{background-color:#d6f3d6!important}.negative[_ngcontent-%COMP%]{background-color:#ffeff7!important}"]}),e})();var Xi=i(80762);let en=(()=>{class e{constructor(e,t,i){this.reportService=e,this.alert=t,this.router=i,this.ShowTally=!1,this.showfilter=!0,this.scrolleddata=0,this.previousButton="Cancel",this.ledgerresult=[]}ngOnInit(){}onSubmit(){this.companyLedgerService.Saveimport(this.companyLedgerService.result).subscribe(e=>{this.alert.showSuccess("Success","All Ledgers imported successfully"),this.showfilter=!1,this.excelfileData=[],this.showfilter=!0,this.router.navigate(["/transactions/ledgerList"]),this.scrolleddata=0},e=>{this.alert.showError("Error","There is some error while importing file. Please try again or contact administrator"),this.excelfileData=[],this.showfilter=!0})}expand(e){e.isDisplay?this.companyLedgerService.result.filter(t=>t.PI==e.UIDN&&0==t.IsGrp).forEach(e=>e.isDisplay=!1):this.companyLedgerService.result.filter(t=>t.PI==e.UIDN&&0==t.IsGrp).forEach(e=>e.isDisplay=!0),e.isDisplay=!e.isDisplay}onExcelAdd(e){this.excelfileData=[];for(let t=0;t<e.length;t++){let i=new A.Q;i.name=e[t].name,i.operationType=0,i.ModifiedDate=new Date,i.CreatedDate=new Date,i.CreatedBy=this.reportService.userid,i.modifyBy=this.reportService.userid,i.CompanyId=this.reportService.getCompanyId,i.SignupId=this.reportService.getSignupId,i.FileLength=null==e[t].PK_Id?e[t].size:e[t].FileLength,i.src=e[t].src,this.excelfileData.push(i)}this.reportService.ImportbankStatement(this.excelfileData).subscribe(e=>{this.excelfileData=[],this.alert.showSuccess("Success","All vouchers imported successfully"),this.router.navigate(["/transactions/daybook"])},e=>{this.alert.showError("Error","Error while voucher import.Please contact administrator"),this.excelfileData=[],this.showfilter=!0,this.scrolleddata=0})}}return e.\u0275fac=function(t){return new(t||e)(x.Y36(Xi.r),x.Y36(C.Rq),x.Y36(w.F0))},e.\u0275cmp=x.Xpm({type:e,selectors:[["app-bankstatement"]],features:[x._Bn([Xi.r])],decls:18,vars:1,consts:[[1,"col-sm-12","nopadding"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],["id","tableFilter",1,"card-header"],[1,"col-sm-12"],["for","Importexcel",2,"font-weight","bold"],[1,"input-group"],["maxFiles","1","maxSize","2","fileExt","xls, xlsx",2,"width","100%",3,"filelist","uploadStatus"],["Importexcel",""],["target","_blank","href","https://api.accountbook24.com/sample/AllLedger.xlsx"],["href","javascript:void(0)",3,"click"]],template:function(e,t){1&e&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"div",4),x.TgZ(5,"div",5),x.TgZ(6,"div",2),x.TgZ(7,"div",6),x.TgZ(8,"label",7),x._uU(9,"Upload Voucher file"),x.qZA(),x.TgZ(10,"div",8),x.TgZ(11,"app-file-upload",9,10),x.NdJ("uploadStatus",function(e){return t.onExcelAdd(e)}),x.qZA(),x.qZA(),x.TgZ(13,"a",11),x._uU(14,"Download sample file"),x.qZA(),x._uU(15,"\xa0\xa0\xa0 "),x.TgZ(16,"a",12),x.NdJ("click",function(){return t.ShowTally=!t.ShowTally}),x._uU(17,"Show Steps to Export Ledgers from Tally "),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()),2&e&&(x.xp6(11),x.Q6J("filelist",t.excelfileData))},directives:[k.Y],styles:[""]}),e})();var tn=i(33433),nn=i(75477),rn=i(65178);const on=["f"],an=["voucherrow"],ln=["vtype"],sn=["RefModal"];function cn(e,t){1&e&&(x.TgZ(0,"ng-option",28),x._uU(1," Purchase"),x.qZA())}function dn(e,t){1&e&&(x.TgZ(0,"ng-option",29),x._uU(1," Receipt"),x.qZA())}function un(e,t){1&e&&(x.TgZ(0,"ng-option",30),x._uU(1," Payment"),x.qZA())}function gn(e,t){1&e&&(x.TgZ(0,"ng-option",31),x._uU(1,"Credit Note"),x.qZA())}function hn(e,t){1&e&&(x.TgZ(0,"ng-option",32),x._uU(1,"Debit Note"),x.qZA())}function pn(e,t){1&e&&(x.TgZ(0,"ng-option",33),x._uU(1," Receipt Note"),x.qZA())}function fn(e,t){1&e&&(x.TgZ(0,"ng-option",34),x._uU(1," Delivery Note"),x.qZA())}function mn(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"required"),x.qZA())}function Zn(e,t){if(1&e&&(x.TgZ(0,"div",35),x.YNc(1,mn,2,0,"div",36),x.qZA()),2&e){x.oxw();const e=x.MAs(9);x.xp6(1),x.Q6J("ngIf",e.errors.required)}}function Tn(e,t){1&e&&x._uU(0),2&e&&x.hij(" ",t.item.LN," ")}function An(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"required"),x.qZA())}function vn(e,t){if(1&e&&(x.TgZ(0,"div",35),x.YNc(1,An,2,0,"div",36),x.qZA()),2&e){x.oxw();const e=x.MAs(25);x.xp6(1),x.Q6J("ngIf",e.errors.required)}}function xn(e,t){1&e&&x._uU(0),2&e&&x.hij(" ",t.item.LN," ")}function In(e,t){1&e&&x.YNc(0,xn,1,1,"ng-template",22)}function Ln(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"a",67),x.NdJ("click",function(){x.CHM(e);const t=x.oxw().index,i=x.oxw().index;return x.oxw(2).openReferencepopup(i,t)}),x.TgZ(1,"span"),x._uU(2),x.qZA(),x._uU(3),x.TgZ(4,"strong"),x._uU(5),x.qZA(),x.qZA()}if(2&e){const e=t.$implicit;x.xp6(2),x.hij(" ",e.Ref_Type," "),x.xp6(1),x.hij("-",e.Ref_Tag,"-- "),x.xp6(2),x.AsE(" ",e.Balance," ",e.AmtType," ")}}function wn(e,t){if(1&e&&(x.TgZ(0,"a"),x._uU(1),x.qZA()),2&e){const e=t.item;x.xp6(1),x.Oqu(e.LN)}}function bn(e,t){if(1&e){const e=x.EpF();x.ynx(0),x.TgZ(1,"tr"),x.TgZ(2,"td",46),x.TgZ(3,"div"),x.TgZ(4,"input",47,48),x.NdJ("selectedindex",function(t){return x.CHM(e),x.oxw(3).onVoucherDateSelect(t)}),x.qZA(),x.qZA(),x.qZA(),x.TgZ(6,"td",46),x.TgZ(7,"div"),x.TgZ(8,"ng-select",49,50),x.NdJ("ngModelChange",function(t){return x.CHM(e).$implicit.LedDet=t})("ngModelChange",function(){x.CHM(e);const t=x.oxw().index,i=x.oxw(2);return i.calculateBank(t),i.finalcalculation(t)}),x.YNc(10,In,1,0,"ng-template",51),x.qZA(),x.qZA(),x.TgZ(11,"div",52),x.YNc(12,Ln,6,4,"a",53),x.qZA(),x.qZA(),x.TgZ(13,"td",54),x.TgZ(14,"a",55),x.NdJ("click",function(){const t=x.CHM(e).index,i=x.oxw().index;return x.oxw(2).openReferencepopup(i,t)}),x._uU(15," Reference "),x.qZA(),x.qZA(),x.TgZ(16,"td",46),x.TgZ(17,"input",56,57),x.NdJ("ngModelChange",function(t){return x.CHM(e).$implicit.DrAmt=t})("change",function(){x.CHM(e);const t=x.oxw().index;return x.oxw(2).finalcalculation(t)}),x.qZA(),x.qZA(),x.TgZ(19,"td",58),x.TgZ(20,"ng-select",59,60),x.NdJ("ngModelChange",function(t){return x.CHM(e).$implicit.TaxLedger=t})("change",function(){x.CHM(e);const t=x.oxw().index;return x.oxw(2).finalcalculation(t)}),x.YNc(22,wn,2,1,"ng-template",61),x.qZA(),x.qZA(),x.TgZ(23,"td",46),x.TgZ(24,"input",62,57),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw().$implicit.Narr=t}),x.qZA(),x.qZA(),x.TgZ(26,"td",63),x._uU(27),x.qZA(),x.TgZ(28,"td",64),x.TgZ(29,"a",65),x.NdJ("click",function(){x.CHM(e);const t=x.oxw().index;return x.oxw(2).deleteLedger(t)}),x._UZ(30,"i",66),x.qZA(),x.qZA(),x.qZA(),x.BQk()}if(2&e){const e=t.$implicit,i=x.oxw(),n=i.index,r=i.$implicit,o=x.oxw(2);x.xp6(4),x.MGl("name","ChkDt_",n,""),x.MGl("id","ChkDt_",n,""),x.Q6J("tabindex",e.TabIndex)("startDate",r.VDt)("index",n),x.xp6(4),x.MGl("name","Ledger_",e.Index,""),x.Q6J("tabIndex",e.TabIndex)("virtualScroll",!0)("items",o.ToLedger)("ngModel",e.LedDet)("loading",o.companyLedgerService.loading),x.xp6(4),x.Q6J("ngForOf",o.getreference(e.LedDet,n)),x.xp6(2),x.Q6J("tabIndex",e.TabIndex),x.xp6(3),x.MGl("name","amt__",e.Index,""),x.MGl("id","amt__",e.Index,""),x.Q6J("tabIndex",e.TabIndex)("ngModel",e.DrAmt),x.xp6(3),x.MGl("name","TaxLedger_",e.Index,""),x.Q6J("tabIndex",e.TabIndex)("multiple",!0)("items",o.TaxLedger)("ngModel",e.TaxLedger)("loading",o.companyLedgerService.loading),x.xp6(4),x.MGl("name","Narr__",e.Index,""),x.MGl("id","Narr__",e.Index,""),x.Q6J("tabIndex",e.TabIndex)("ngModel",r.Narr),x.xp6(3),x.hij(" ",r.TotalAmt," "),x.xp6(2),x.Q6J("tabIndex",e.TabIndex)}}function Cn(e,t){if(1&e&&(x.ynx(0),x.YNc(1,bn,31,29,"ng-container",44),x.BQk()),2&e){const e=t.$implicit;x.xp6(1),x.Q6J("ngForOf",e.VDet)}}function qn(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",37),x.TgZ(1,"div",38),x.TgZ(2,"table",39),x.TgZ(3,"thead"),x.TgZ(4,"tr"),x.TgZ(5,"th",40),x._uU(6," Voucher Date"),x.qZA(),x.TgZ(7,"th",40),x._uU(8," Select Account"),x.qZA(),x.TgZ(9,"th",41),x._uU(10," Reference"),x.qZA(),x.TgZ(11,"th",42),x.TgZ(12,"span"),x._uU(13,"Amount"),x.qZA(),x.qZA(),x.TgZ(14,"th",42),x._uU(15,"Tax"),x.qZA(),x.TgZ(16,"th",42),x._uU(17,"Narration"),x.qZA(),x.TgZ(18,"th",42),x._uU(19,"Total Amount"),x.qZA(),x.TgZ(20,"th",41),x._uU(21,"Actions"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(22,"tbody",null,43),x.YNc(24,Cn,2,1,"ng-container",44),x.qZA(),x.qZA(),x.qZA(),x.TgZ(25,"div"),x.TgZ(26,"input",45),x.NdJ("click",function(){return x.CHM(e),x.oxw().adddNewTransaction()}),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw();x.xp6(24),x.Q6J("ngForOf",e.VoucherMasters),x.xp6(2),x.Q6J("tabIndex",500)}}function Sn(e,t){1&e&&(x.TgZ(0,"div",4),x.TgZ(1,"div",68),x.TgZ(2,"button",69,70),x._uU(4," Save "),x.qZA(),x.qZA(),x.qZA())}function Mn(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"Ref. type is required"),x.qZA())}function yn(e,t){if(1&e&&(x.TgZ(0,"div",35),x.YNc(1,Mn,2,0,"div",36),x.qZA()),2&e){x.oxw();const e=x.MAs(3);x.xp6(1),x.Q6J("ngIf",e.errors.required)}}function Nn(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"required"),x.qZA())}function Dn(e,t){if(1&e&&(x.TgZ(0,"div",35),x.YNc(1,Nn,2,0,"div",36),x.qZA()),2&e){x.oxw();const e=x.MAs(2);x.xp6(1),x.Q6J("ngIf",e.errors.required)}}const _n=function(e){return{"is-invalid":e}};function Un(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"td"),x.TgZ(1,"input",104,105),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw().$implicit.Ref_Tag=t}),x.qZA(),x.YNc(3,Dn,2,1,"div",17),x.qZA()}if(2&e){const e=x.MAs(2),t=x.oxw(),i=t.index,n=t.$implicit;x.oxw(3);const r=x.MAs(2);x.xp6(1),x.MGl("name","refTag__",i,""),x.Q6J("ngClass",x.VKq(5,_n,r.submitted&&e.invalid))("disabled","AgainstRef"==n.Ref_Type||"OnAccount"==n.Ref_Type)("ngModel",n.Ref_Tag),x.xp6(2),x.Q6J("ngIf",r.submitted&&e.invalid)}}function kn(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"td"),x.TgZ(1,"input",106,107),x.NdJ("selected",function(t){return x.CHM(e),x.oxw().$implicit.DueDate=t}),x.qZA(),x.qZA()}if(2&e){const e=x.MAs(2),t=x.oxw(),i=t.index,n=t.$implicit;x.oxw(3);const r=x.MAs(2);x.xp6(1),x.MGl("name","refdate__",i,""),x.MGl("id","refdate__",i,""),x.Q6J("disabled","AgainstRef"==n.Ref_Type||"OnAccount"==n.Ref_Type)("ngClass",x.VKq(5,_n,r.submitted&&e.invalid))("startDate",n.DueDate)}}function Jn(e,t){if(1&e&&x._uU(0),2&e){const e=t.item;x.HOy(" ",e.Ref_Type,"- ",e.Ref_Tag,"- ",e.Dr>0?e.Dr:e.Cr,"",e.Dr>0?"Dr":"Cr"," ")}}function Vn(e,t){if(1&e&&(x._uU(0),x.TgZ(1,"b"),x._uU(2," Available Balance "),x.qZA(),x._uU(3)),2&e){const e=t.item;x.HOy(" ",e.Ref_Type,"- ",e.Ref_Tag,"- ",e.Dr>0?e.Dr:e.Cr,"",e.Dr>0?"Dr":"Cr"," - "),x.xp6(3),x.AsE("-",e.OrgBalance>0?e.OrgBalance:-1*e.OrgBalance,"",e.OrgBalance>0?"Dr":"Cr"," ")}}function Rn(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"ng-select",110,111),x.NdJ("ngModelChange",function(t){return x.CHM(e),x.oxw(2).$implicit.Agnst_Ref_Id=t})("change",function(t){x.CHM(e);const i=x.oxw(2).$implicit;return x.oxw(4).onAgainstRefChange(t,i)}),x.YNc(2,Jn,1,4,"ng-template",22),x.YNc(3,Vn,4,6,"ng-template",61),x.qZA()}if(2&e){const e=x.oxw(2),t=e.index,i=e.$implicit,n=x.oxw(4);x.MGl("name","agReferences",t,""),x.Q6J("items",n.LedagainstRefList)("ngModel",i.Agnst_Ref_Id)}}function Qn(e,t){if(1&e&&(x.TgZ(0,"td",108),x.YNc(1,Rn,4,3,"ng-select",109),x.qZA()),2&e){const e=x.oxw().$implicit;x.xp6(1),x.Q6J("ngIf","AgainstRef"==e.Ref_Type)}}function Fn(e,t){1&e&&(x.TgZ(0,"div"),x._uU(1,"required"),x.qZA())}function En(e,t){if(1&e&&(x.TgZ(0,"div",35),x.YNc(1,Fn,2,0,"div",36),x.qZA()),2&e){x.oxw();const e=x.MAs(18);x.xp6(1),x.Q6J("ngIf",e.errors.required)}}function Hn(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"tr",90),x.TgZ(1,"td"),x.TgZ(2,"ng-select",91,92),x.NdJ("ngModelChange",function(t){return x.CHM(e).$implicit.Ref_Type=t}),x.TgZ(4,"ng-option",93),x._uU(5,"New Ref"),x.qZA(),x.TgZ(6,"ng-option",94),x._uU(7,"OnAccount"),x.qZA(),x.TgZ(8,"ng-option",95),x._uU(9,"Advance"),x.qZA(),x.TgZ(10,"ng-option",96),x._uU(11,"AgainstRef"),x.qZA(),x.qZA(),x.YNc(12,yn,2,1,"div",17),x.qZA(),x.YNc(13,Un,4,7,"td",36),x.YNc(14,kn,3,7,"td",36),x.YNc(15,Qn,2,1,"td",97),x.TgZ(16,"td"),x.TgZ(17,"input",98,99),x.NdJ("change",function(){const t=x.CHM(e).$implicit;return x.oxw(4).onReferenceAmountChange(t)})("ngModelChange",function(t){return x.CHM(e).$implicit.Balance=t}),x.qZA(),x.YNc(19,En,2,1,"div",17),x.qZA(),x.TgZ(20,"td"),x.TgZ(21,"ng-select",100),x.NdJ("ngModelChange",function(t){return x.CHM(e).$implicit.AmtType=t}),x.TgZ(22,"ng-option",101),x._uU(23,"DR"),x.qZA(),x.TgZ(24,"ng-option",102),x._uU(25,"CR"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(26,"td"),x.TgZ(27,"a",103),x.NdJ("click",function(){const t=x.CHM(e).$implicit;return x.oxw(4).RemoveReference(t.Index)}),x._UZ(28,"i",66),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=t.$implicit,i=t.index,n=x.MAs(3),r=x.MAs(18);x.oxw(3);const o=x.MAs(2);x.xp6(2),x.MGl("name","rafdrp",i,""),x.Q6J("disabled","AgainstRef"!=e.Ref_Type&&e.UIDN>0)("ngModel",e.Ref_Type)("ngClass",x.VKq(14,_n,o.submitted&&n.invalid)),x.xp6(10),x.Q6J("ngIf",o.submitted&&n.invalid),x.xp6(1),x.Q6J("ngIf","AgainstRef"!=e.Ref_Type),x.xp6(1),x.Q6J("ngIf","AgainstRef"!=e.Ref_Type),x.xp6(1),x.Q6J("ngIf","AgainstRef"==e.Ref_Type),x.xp6(2),x.MGl("name","Refamt__",i,""),x.Q6J("ngModel",e.Balance)("ngClass",x.VKq(16,_n,o.submitted&&r.invalid)),x.xp6(2),x.Q6J("ngIf",o.submitted&&r.invalid),x.xp6(2),x.MGl("name","AmtType__",i,""),x.Q6J("ngModel",e.AmtType)}}function On(e,t){if(1&e&&(x.TgZ(0,"table",87,88),x.TgZ(2,"thead"),x.TgZ(3,"tr"),x.TgZ(4,"th"),x._uU(5,"Ref. Method"),x.qZA(),x.TgZ(6,"th"),x._uU(7,"Ref. Tag"),x.qZA(),x.TgZ(8,"th"),x._uU(9,"Due Date"),x.qZA(),x.TgZ(10,"th"),x._uU(11,"Amount"),x.qZA(),x.TgZ(12,"th"),x._uU(13,"Dr/Cr"),x.qZA(),x.TgZ(14,"th"),x._uU(15,"Action"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(16,"tbody"),x.YNc(17,Hn,29,18,"tr",89),x.qZA(),x.qZA()),2&e){const e=x.oxw(3);x.xp6(17),x.Q6J("ngForOf",e.getreferenceforpopup())}}function Pn(e,t){if(1&e&&(x.TgZ(0,"div",85),x.YNc(1,On,18,1,"table",86),x.qZA()),2&e){const e=x.oxw(2);x.xp6(1),x.Q6J("ngIf",!e.companyLedgerService.IsMobileview)}}function Gn(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",71),x.TgZ(1,"form",72,73),x.NdJ("ngSubmit",function(){x.CHM(e);const t=x.MAs(2),i=x.oxw();return t.form.valid&&i.Savereference()}),x.TgZ(3,"div",74),x.TgZ(4,"div",75),x.TgZ(5,"h4",76),x._uU(6,"Add/Edit Reference "),x.qZA(),x.TgZ(7,"button",77),x.NdJ("click",function(){x.CHM(e);const t=x.oxw(),i=x.MAs(32);return t.showReferencepopup=!1,i.hide()}),x.TgZ(8,"span",78),x._uU(9,"\xd7"),x.qZA(),x.qZA(),x.qZA(),x.TgZ(10,"div",79),x.YNc(11,Pn,2,1,"div",80),x.TgZ(12,"button",81),x.NdJ("click",function(){return x.CHM(e),x.oxw().addNewreference()}),x._uU(13,"Add new row"),x.qZA(),x.qZA(),x.TgZ(14,"div",82),x.TgZ(15,"button",83),x._uU(16,"Save Changes"),x.qZA(),x.TgZ(17,"button",84),x.NdJ("click",function(){x.CHM(e);const t=x.oxw(),i=x.MAs(32);return t.showReferencepopup=!1,i.hide()}),x._uU(18,"Close"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()}if(2&e){const e=x.oxw();x.xp6(11),x.Q6J("ngIf",e.curReference.length>0)}}const $n=[],Bn=[{path:"",data:{title:"Transactions"},children:[{path:"challan",component:Dt,data:{title:"Challan List",ViewType:"View",component:"ChallanListComponent"},canActivate:[tn.i]},{path:"challan/:label",component:Dt,data:{title:"Challan List - Billwise",ViewType:"View",component:"ChallanListComponent"},canActivate:[tn.i]},{path:"challan/:id",component:F.N,data:{title:"Add/Edit Challan",ViewType:"View",component:"ChallanAddeditComponent"},canActivate:[tn.i]},{path:"daybook",component:Ut.C,data:{title:"Day Book",ViewType:"View",component:"AccountListComponent"},canActivate:[tn.i]},{path:"ledger",component:Ut.C,data:{title:"Ledger Report",ViewType:"View",component:"AccountListComponent"},canActivate:[tn.i]},{path:"group",component:Ut.C,data:{title:"Group Report",ViewType:"View",component:"AccountListComponent"},canActivate:[tn.i]},{path:"finalize",component:Ut.C,data:{title:"Finalize Report",ViewType:"View",component:"AccountListComponent"},canActivate:[tn.i]},{path:"restorevoucher",component:Ut.C,data:{title:"voucher History",ViewType:"View",component:"AccountListComponent"},canActivate:[tn.i]},{path:"hiddenvoucher",component:Ut.C,data:{title:"Hidden Vouchers",ViewType:"View",component:"AccountListComponent"},canActivate:[tn.i]},{path:"daybook/:ledgerid",component:Ut.C,data:{title:"DayBook",ViewType:"View",component:"AccountListComponent"},canActivate:[tn.i]},{path:"accountadd",component:(()=>{class e{constructor(e,t,i,n){this.accountService=e,this.companyLedgerService=t,this.alertService=i,this.router=n,this.vouchertypeclass="",this.taxledgerDetails=[],this.VoucherMasters=[],this.FinalVoucherMasters=[],this.VoucherIndex=0,this.AccountText="Select Ledger",this.httpfunction=new m.r,this.bankDetails=[],this.curReference=[],this.allagainstRefList=[],this.modalReferenceIndex=0,this.showReferencepopup=!1,this.modalDrAmt=0,this.modalCrAmt=0,this.VoucherId=0,this.Total="0.0 Dr",this.TotalTax="0.0 Dr",this.GrandTotal="0.0 Dr",this.RoundOFFTotal="0.0 Dr",this.Totalroundoff=0,this.IsRoundOff=!1,this.ReferendeIndex=0,this.modalLedger=null,this.LedagainstRefList=[],this.IsShowLedger=!1}ngOnInit(){null!=this.serachcontrol&&null!=this.serachcontrol&&this.serachcontrol.focus(),this.companyLedgerService.GetAllledaccount(!0);var e=new c.VN,t=new c.eK;t.TabIndex=t.Index+21,e.VDet=[],e.VDet.push(t),this.VoucherMasters.push(e),this.Refsubscription=this.accountService.resultObs.subscribe(()=>{this.allagainstRefList=this.allagainstRefList.concat(this.accountService.result),this.setcurrentreference()})}ngOnDestroy(){null!=this.Refsubscription&&this.Refsubscription.unsubscribe()}setcurrentreference(){this.LedagainstRefList=JSON.parse(JSON.stringify(this.allagainstRefList.filter(e=>e.L_Id==this.curReferenceedger&&e.VoucherMaster_PK_Id!=this.VoucherId)));for(let t=0;t<this.LedagainstRefList.length;t++){const i=this.LedagainstRefList[t];i.Balance<0&&(i.Balance=-1*i.Balance),i.OrgBalance=i.Balance;var e=this.getreferenceforpopup().filter(e=>e.Agnst_VoucherMst_Id==i.voucherMasterId&&e.Agnst_Ref_Id==i.UIDN);null!=e&&null!=e&&e.length>0&&(i.OrgBalance+=e[0].Dr>0?e[0].Dr:e[0].Cr,e[0].OrgBalance=i.OrgBalance)}}getreferenceforpopup(){return this.curReference.filter(e=>1!=e.operationType)}adddNewTransaction(){if(!this.httpfunction.IsMobileview()){let i=this.VoucherMasters.length-1;if(null!=this.VoucherMasters[i].VDet[0].LedDet&&null!=this.VoucherMasters[i].VDet[0].LedDet&&null!=this.VoucherMasters[i].VDet[0].DrAmt&&null!=this.VoucherMasters[i].VDet[0].DrAmt&&0!=this.VoucherMasters[i].VDet[0].DrAmt){this.VoucherIndex=this.VoucherIndex+1;var e=new c.VN,t=new c.eK;t.Index=this.VoucherIndex,t.TabIndex=this.VoucherIndex+21,e.VDet=[],e.VDet.push(t),this.VoucherMasters.push(e)}}}isNumeric(e){return null!=e&&/^[-+]?(\d+|\d+\.\d*|\d*\.\d+)$/.test(e.toString())}getNumeric(e){return this.isNumeric(e)?(e=parseFloat(e),parseFloat(e.toFixed(2))):parseFloat("0")}SelectVoucherType(){this.accountVoucherType.toLowerCase()==d.$f.Purchase.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.DebitNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.ReceiptNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase()?this.AccountText="Party Name":this.accountVoucherType.toLowerCase()==d.$f.Sales.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.CreditNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.DeliveryNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()?this.AccountText="Customer":this.accountVoucherType.toLowerCase()==d.$f.Receipt.toLowerCase()?this.AccountText="Receipt In Account":this.accountVoucherType.toLowerCase()==d.$f.Payment.toLowerCase()?this.AccountText="Payment From":this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()?this.AccountText="Deposit To":this.accountVoucherType.toLowerCase()==d.$f.Contra.toLowerCase()&&(this.AccountText="Deposit In");let e=JSON.parse(this.httpfunction.getStorage("VoucherType"));this.IsShowLedger=e.filter(e=>e.NA.toUpperCase()==this.accountVoucherType.toUpperCase())[0].IsShowLed,this.getFromLedger(),this.getToLedger(),this.getTaxLedger()}getFromLedger(){this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DeliveryNote.toLocaleLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()?(this.FromLedger=this.companyLedgerService.result.filter(e=>1==e.IsSL&&0==e.IsGrp&&1==e.St),this.IsShowLedger&&(this.FromLedger=this.companyLedgerService.result.filter(e=>0==e.IsGrp&&1==e.St))):this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.ReceiptNote.toLocaleLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase()?(this.FromLedger=this.companyLedgerService.result.filter(e=>1==e.IsPU&&0==e.IsGrp&&1==e.St),this.IsShowLedger&&(this.FromLedger=this.companyLedgerService.result.filter(e=>0==e.IsGrp&&1==e.St))):this.accountVoucherType.toLocaleLowerCase()==d.$f.Payment.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Receipt.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Contra.toLocaleLowerCase()?this.FromLedger=this.companyLedgerService.result.filter(e=>(1==e.IsBank||1==e.IsCash)&&0==e.IsGrp&&1==e.St):this.accountVoucherType.toLocaleLowerCase()==d.$f.Journal.toLocaleLowerCase()&&(this.FromLedger=this.companyLedgerService.result.filter(e=>0==e.IsGrp&&1==e.St))}getToLedger(){this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DeliveryNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.SalesOrder.toLocaleLowerCase()?this.ToLedger=this.companyLedgerService.result.filter(e=>(1==e.IsBank||1==e.IsCash||1==e.IsSD)&&0==e.IsGrp&&1==e.St):this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.ReceiptNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.PurchaseOrder.toLocaleLowerCase()?this.ToLedger=this.companyLedgerService.result.filter(e=>(1==e.IsBank||1==e.IsCash||1==e.IsSC)&&0==e.IsGrp&&1==e.St):this.accountVoucherType.toLocaleLowerCase()==d.$f.Payment.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Receipt.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Journal.toLocaleLowerCase()?this.ToLedger=this.companyLedgerService.result.filter(e=>0==e.IsGrp&&1==e.St):this.accountVoucherType.toLocaleLowerCase()==d.$f.Contra.toLocaleLowerCase()&&(this.ToLedger=this.companyLedgerService.result.filter(e=>(1==e.IsBank||1==e.IsCash)&&0==e.IsGrp&&1==e.St))}getTaxLedger(){this.TaxLedger=this.companyLedgerService.result.filter(e=>1==e.isTL&&0==e.IsGrp&&1==e.St)}getreference(e,t){if(null!=e)return null!=e&&null!=this.VoucherMasters[t]&&null!=this.VoucherMasters[t].referencemaster?this.VoucherMasters[t].referencemaster.filter(t=>t.L_Id==e.UIDN&&1!=t.operationType):null}openReferencepopup(e,t){if(this.curReferenceedger=null,this.curReference=[],-1==e)if(this.httpfunction.IsMobileview())if(this.accountVoucherType.toLowerCase()!=d.$f.Contra.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.Purchase.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.Sales.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.DebitNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.CreditNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.DeliveryNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.ReceiptNote.toLowerCase()){if(null==this.modalLedger||null==this.modalLedger)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.modalLedger.UIDN}else{if(null==this.companyLedgerService.singleresult)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.companyLedgerService.singleresult.UIDN}else{if(null==this.companyLedgerService.singleresult)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.companyLedgerService.singleresult.UIDN}else if(e>-1)if(this.httpfunction.IsMobileview())if(this.accountVoucherType.toLowerCase()!=d.$f.Contra.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.Purchase.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.Sales.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.DebitNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.CreditNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.DeliveryNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.ReceiptNote.toLowerCase()){if(null==this.modalLedger||null==this.modalLedger)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.modalLedger.UIDN}else{if(null==this.companyLedgerService.singleresult)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.companyLedgerService.singleresult.UIDN}else{if(null==this.VoucherMasters[e].VDet[t].LedDet||null==this.VoucherMasters[e].VDet[t].LedDet)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.VoucherMasters[e].VDet[t].LedDet.UIDN}null!=this.VoucherMasters[e].referencemaster&&this.VoucherMasters[e].referencemaster.length>0?this.httpfunction.IsMobileview()?e>-1?(this.curReference=JSON.parse(JSON.stringify(this.VoucherMasters[e].referencemaster.filter(t=>t.L_Id==this.curReferenceedger&&t.Index==e))),null!=this.curReference&&this.curReference.length>0||this.addNewreference()):this.addNewreference():(this.curReference=JSON.parse(JSON.stringify(this.VoucherMasters[e].referencemaster.filter(e=>e.L_Id==this.curReferenceedger))),null!=this.curReference&&this.curReference.length>0||this.addNewreference()):this.addNewreference(),0==this.allagainstRefList.filter(e=>e.L_Id==this.curReferenceedger&&e.VoucherMaster_PK_Id!=this.VoucherId).length&&(this.accountService.filterArg=new Qt.Jw,this.accountService.filterArg.LedgerId=this.curReferenceedger,this.accountService.filterArg.voucherMasterId=this.VoucherId,this.accountService.isGetSubscribe=!0,this.accountService.GetAgainstRefDetail()),this.modalReferenceIndex=e,this.showReferencepopup=!0,this.httpfunction.IsMobileview()||this.RefModal.show()}onAgainstRefChange(e,t){null!=t.Agnst_Ref_Id&&this.curReference.filter(t=>1!=t.operationType&&t.Agnst_Ref_Id==e.UIDN).length>1?(this.alertService.showError("Error","This reference is already in use as against reference. Please select another reference"),setTimeout(()=>{t.Agnst_Ref_Id=null,t.OrgBalance=0,t.Agnst_VoucherMst_Id=null},250)):(t.Balance=e.Balance,t.OrgBalance=e.OrgBalance,t.Agnst_VoucherMst_Id=e.VoucherMaster_PK_Id,t.AmtType=e.Cr>0?"Dr":"Cr")}Savereference(){let e=!0;var t=[];if(this.httpfunction.IsMobileview()){if(null!=this.VoucherMasters[this.modalReferenceIndex].referencemaster&&this.VoucherMasters[this.modalReferenceIndex].referencemaster.length>0)if(-1==this.modalReferenceIndex){var i=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id==this.curReferenceedger);let e=this.curReference.concat(i||[]);this.curReference=e}else if(this.modalReferenceIndex>-1){var n=this.VoucherMasters[this.modalReferenceIndex].referencemaster.findIndex(e=>e.Index==this.modalReferenceIndex);this.VoucherMasters[this.modalReferenceIndex].referencemaster[n]=this.curReference[0],this.curReference=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>void 0!==e)}if(this.curReference.length>0){let i=this.curReference.length;null!=this.VoucherMasters[this.modalReferenceIndex].referencemaster&&this.VoucherMasters[this.modalReferenceIndex].referencemaster.length>0&&-1==this.modalReferenceIndex&&(t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id!=this.curReferenceedger));for(let n=0;n<i;n++){if("Dr"==this.curReference[n].AmtType?(this.curReference[n].Dr=this.getNumeric(this.curReference[n].Balance),this.curReference[n].Cr=0):(this.curReference[n].Cr=this.getNumeric(this.curReference[n].Balance),this.curReference[n].Dr=0),"AgainstRef"==this.curReference[n].Ref_Type){let t=this.getNumeric(this.curReference[n].OrgBalance);t<0&&(t*=-1),this.getNumeric(this.curReference[n].Balance)>t&&(e=!1)}t.push(this.curReference[n])}this.modalDrAmt=this.TotalAmount,this.VoucherMasters[this.modalReferenceIndex].referencemaster=t}else t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id!=this.curReferenceedger),this.VoucherMasters[this.modalReferenceIndex].referencemaster=t}else if(this.curReference.length>0){let i=this.curReference.length;null!=this.VoucherMasters[this.modalReferenceIndex].referencemaster&&this.VoucherMasters[this.modalReferenceIndex].referencemaster.length>0&&(t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id!=this.curReferenceedger));for(let n=0;n<i;n++){if("Dr"==this.curReference[n].AmtType?(this.curReference[n].Dr=this.getNumeric(this.curReference[n].Balance),this.curReference[n].Cr=0):(this.curReference[n].Cr=this.getNumeric(this.curReference[n].Balance),this.curReference[n].Dr=0),"AgainstRef"==this.curReference[n].Ref_Type){let t=this.getNumeric(this.curReference[n].OrgBalance);t<0&&(t*=-1),this.getNumeric(this.curReference[n].Balance)>t&&(e=!1)}t.push(this.curReference[n])}this.VoucherMasters[this.modalReferenceIndex].referencemaster=t}else t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id!=this.curReferenceedger),this.VoucherMasters[this.modalReferenceIndex].referencemaster=t;e?(this.showReferencepopup=!1,this.httpfunction.IsMobileview()||this.RefModal.hide(),this.calculateAmount(this.modalReferenceIndex),this.finalcalculation(this.modalReferenceIndex),this.httpfunction.IsMobileview()||setTimeout(()=>{},200)):this.alertService.showError("Error","Against reference should not have more amount than the outstanding amount")}calculateAmount(e){if(null!=this.VoucherMasters[this.modalReferenceIndex].referencemaster&&null!=this.VoucherMasters[this.modalReferenceIndex].referencemaster){let r=null;if(this.httpfunction.IsMobileview())if(null!=this.modalLedger&&null!=this.modalLedger){r=this.modalLedger;var t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id==this.modalLedger.UIDN&&1!=e.operationType)}else r=this.companyLedgerService.singleresult,t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id==r.UIDN&&1!=e.operationType);else null!=this.VoucherMasters[e]&&this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&e.LedDet.UIDN==this.curReferenceedger).length>0?(r=this.VoucherMasters[e].VDet.filter(e=>e.LedDet.UIDN==this.curReferenceedger)[0],t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id==r.LedDet.UIDN&&1!=e.operationType)):(r=this.companyLedgerService.singleresult,t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id==r.UIDN&&1!=e.operationType));var i=0,n=0;for(let e=0;e<t.length;e++)n+=t[e].Dr,i+=t[e].Cr;r.DrAmt=n-i,r.DrAmt<0&&(r.DrAmt=-1*r.DrAmt),this.httpfunction.IsMobileview()&&(this.modalDrAmt=r.DrAmt),this.httpfunction.IsMobileview()?null!=this.VoucherMasters[e]&&this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&e.LedDet.UIDN==this.curReferenceedger).length>0||((this.accountVoucherType.toLowerCase()==d.$f.DebitNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.CreditNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Sales.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Purchase.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase())&&this.VoucherMasters[e].VDet.length>0&&null!=this.VoucherMasters[e].VDet&&(this.VoucherMasters[e].VDet[0].DrAmt=r.DrAmt),this.modalDrAmt=r.DrAmt,this.modalDrAmt<0&&(this.modalDrAmt=-1*r.DrAmt)):null!=this.VoucherMasters[e]&&this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&e.LedDet.UIDN==this.curReferenceedger).length>0||(this.VoucherMasters[e].VDet[0].DrAmt=r.DrAmt)}else{var r=0,o=null;null!=(o=this.VoucherMasters[e])&&null!=o&&(r=o.Disc,o.DrAmt=this.getNumeric(o.actqty*o.rate),null!=r&&(o.DrAmt=this.getNumeric(o.DrAmt-o.DrAmt*r/100)),o.DrAmt<0&&(o.DrAmt=-1*o.DrAmt))}}onReferenceAmountChange(e){"NewRef"==e.Ref_Type&&(e.Balance<e.Dr-e.OrgBalance||e.Balance<e.Cr-e.OrgBalance)&&(this.alertService.showError("Error","You can not reduce amount which is already paid as against reference"),e.Balance=e.Dr>0?e.Dr:e.Cr)}addNewreference(){let e=new rn.eS;e.Ref_Type=nn.l.NewRef,e.L_Id=this.curReferenceedger,e.AmtType=this.accountVoucherType.toLowerCase()==d.$f.Sales.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.DebitNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.DeliveryNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Payment.toLowerCase()?"Dr":this.accountVoucherType.toLowerCase()==d.$f.Purchase.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.CreditNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.ReceiptNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Receipt.toLowerCase()?"Cr":"Dr",e.operationType=0,this.ReferendeIndex=this.ReferendeIndex+1,e.Index=this.ReferendeIndex,this.curReference.push(e)}calculateBank(e){var t=new Array,i=null;let n=0;if(this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()){if(null==this.VoucherMasters[e].VDet||null==this.VoucherMasters[e].VDet)return}else if(null==this.companyLedgerService.singleresult||null==this.companyLedgerService.singleresult)return;if(this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()){if(this.VoucherMasters[e].VDet[0].LedDet.IsBank){for(let t=0;t<this.VoucherMasters[e].VDet.length;t++)n+=this.getNumeric(this.VoucherMasters[e].VDet[t].DrAmt);(r=new c.eK).LId=this.companyLedgerService.singleresult.UIDN,r.L_Name=this.companyLedgerService.singleresult.LN,r.LedDet=new d.dJ,r.LedDet.UIDN=this.companyLedgerService.singleresult.UIDN,r.LedDet.LN=this.companyLedgerService.singleresult.LN,r.LedDet.IsBank=this.companyLedgerService.singleresult.IsBank,n>0?r.DrAmt=n:(r.CrAmt=n,r.CrAmt<0&&(r.CrAmt=-1*r.CrAmt)),null!=this.VoucherMasters[e].VDet[0].TaxLedger&&null!=this.VoucherMasters[e].VDet[0].TaxLedger&&this.VoucherMasters[e].VDet[0].TaxLedger.length>0&&(r.TaxLedger=this.VoucherMasters[e].VDet[0].TaxLedger),t.push(JSON.parse(JSON.stringify(r)))}}else if(this.companyLedgerService.singleresult.IsBank){for(let t=0;t<this.VoucherMasters[e].VDet.length;t++)n+=this.getNumeric(this.VoucherMasters[e].VDet[t].DrAmt);var r;(r=new c.eK).LId=this.companyLedgerService.singleresult.UIDN,r.L_Name=this.companyLedgerService.singleresult.LN,r.LedDet=new d.dJ,r.LedDet.UIDN=this.companyLedgerService.singleresult.UIDN,r.LedDet.LN=this.companyLedgerService.singleresult.LN,r.LedDet.IsBank=this.companyLedgerService.singleresult.IsBank,n>0?r.DrAmt=n:(r.CrAmt=n,r.CrAmt<0&&(r.CrAmt=-1*r.CrAmt)),t.push(JSON.parse(JSON.stringify(r)))}i=this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()?JSON.parse(JSON.stringify(this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt&&1==e.LedDet.IsBank))):JSON.parse(JSON.stringify(this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt)));for(let c=0;c<i.length;c++)i[c].DrAmt<0?(i[c].DrAmt=-1*i[c].DrAmt,i[c].CrAmt=0):(i[c].CrAmt=i[c].DrAmt,i[c].DrAmt=0);if((t=t.concat(i?JSON.parse(JSON.stringify(i)):[])).length>0){this.VoucherMasters[e].bankDetails=[],this.bankDetails=[];for(var o=0;o<t.length;o++){let i=0;var a=0,l=null;if((t[o].DrAmt>0||t[o].CrAmt>0)&&1==t[o].LedDet.IsBank&&(i=2,a=t[o].LedDet.UIDN,l=t[o].LedDet.LN),i>0){var s=null;if(2==i){if(s=new Array,0==t[o].DrAmt||null==t[o].DrAmt){if(this.accountVoucherType.toLowerCase()==d.$f.Contra.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Payment.toLowerCase())var u=t.filter(e=>e.LedDet.UIDN!=a&&e.DrAmt>0)[0];else u=t.filter(e=>e.LedDet.UIDN!=a&&0==e.LedDet.IsBank&&e.DrAmt>0)[0];null!=u&&null!=u&&s.push(u)}else null!=(u=this.accountVoucherType.toLowerCase()==d.$f.Contra.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Payment.toLowerCase()?t.filter(e=>e.LedDet.UIDN!=a&&e.CrAmt>0)[0]:this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()?t.filter(e=>e.LedDet.UIDN!=a&&e.DrAmt>0)[0]:this.accountVoucherType?t.filter(e=>null==e.InventoryDetails).filter(e=>e.LedDet.UIDN!=a)[0]:t.filter(e=>e.LedDet.UIDN!=a&&0==e.LedDet.IsBank&&e.CrAmt>0)[0])&&null!=u&&s.push(u);let i=new c.eK;var g=t[o];let n=0;if(i.DrAmt=this.getNumeric(g.DrAmt),null!=g.TaxLedger&&null!=g.TaxLedger)for(let e=0;e<g.TaxLedger.length;e++)1==g.TaxLedger[e].IsInclusive?(n+=this.getNumeric(g.DrAmt*g.TaxLedger[e].TR/100),i.DrAmt=i.DrAmt-this.getNumeric(g.DrAmt*g.TaxLedger[e].TR/100)):i.DrAmt=i.DrAmt+this.getNumeric(g.DrAmt*g.TaxLedger[e].TR/100);for(var h=0;h<s.length;h++){var p=this.bankDetails.filter(e=>e.BLId==a&&e.LId==s[h].LedDet.UIDN);let i=this.getNumeric(0==t[o].DrAmt||null==t[o].DrAmt?0:t[o].DrAmt),r=this.getNumeric(0==t[o].DrAmt||null==t[o].DrAmt?t[o].CrAmt:0);if(null!=s[h].TaxLedger&&null!=s[h].TaxLedger)for(let e=0;e<s[h].TaxLedger.length;e++)0==r?1==s[h].TaxLedger[e].IsInclusive?(n+=this.getNumeric(s[h].CrAmt*s[h].TaxLedger[e].TR/100),i-=this.getNumeric(s[h].CrAmt*s[h].TaxLedger[e].TR/100)):i+=this.getNumeric(s[h].CrAmt*s[h].TaxLedger[e].TR/100):1==s[h].TaxLedger[e].IsInclusive?(n+=this.getNumeric(s[h].DrAmt*s[h].TaxLedger[e].TR/100),r-=this.getNumeric(s[h].DrAmt*s[h].TaxLedger[e].TR/100)):r+=this.getNumeric(s[h].DrAmt*s[h].TaxLedger[e].TR/100);if(p.length>0)p[0].Led_Dr=this.getNumeric(p[0].Led_Dr)+this.getNumeric(i);else{let t=new c.oy;if(t.BankName="",t.TType="Cheque/DD",this.httpfunction.IsMobileview()&&(t.TType="0"),t.ChkDt=new Date,t.ChkNo="",t.BRecoDt=null,null!=this.VoucherMasters[e].bankDetails&&null!=this.VoucherMasters[e].bankDetails){var f=this.VoucherMasters[e].bankDetails.filter(e=>e.BLId==a&&e.LId==s[h].LedDet.UIDN);0==f.length&&(f=this.VoucherMasters[e].bankDetails.filter(e=>(e.BLId==a||e.LId==s[h].LedDet.UIDN)&&e.Led_Dr==i)),0==f.length&&(f=this.VoucherMasters[e].bankDetails.filter(e=>(e.BLId==a||e.LId==s[h].LedDet.UIDN)&&e.Led_Dr==s[h].DrAmt)),f.length>0&&(t.BankName=f[0].BankName,t.TType=f[0].TType,t.ChkDt=f[0].ChkDt,t.ChkNo=f[0].ChkNo,t.BRecoDt=f[0].BRecoDt,f[0].Led_Dr=i)}t.InclusiveAmount=n,t.BLId=a,t.BL_Name=l,t.LId=s[h].LedDet.UIDN,t.L_Name=s[h].LedDet.LN,this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()?(t.Led_Dr=parseFloat(r.toFixed(2)),t.Led_Cr=parseFloat(i.toFixed(2))):(t.Led_Dr=parseFloat(i.toFixed(2)),t.Led_Cr=parseFloat(r.toFixed(2))),t.bankTabIndex=this.bankDetails.length+1010,this.bankDetails.push(t),this.VoucherMasters[e].bankDetails=this.bankDetails}}}}}}}DebitOrCreditByCategory(e,t){let i="";if(this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()&&1==t)return"CREDIT";if(this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()&&0==t)return"DEBIT";if(this.accountVoucherType.toLowerCase()==d.$f.DebitNote.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.Sales.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.DeliveryNote.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()&&0==t)return"DEBIT";if(this.accountVoucherType.toLowerCase()==d.$f.DebitNote.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.Sales.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.DeliveryNote.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()&&1==t)return"CREDIT";if(this.accountVoucherType.toLowerCase()==d.$f.CreditNote.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.Purchase.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.ReceiptNote.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase()&&0==t)return"CREDIT";if(this.accountVoucherType.toLowerCase()==d.$f.CreditNote.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.Purchase.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.ReceiptNote.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase()&&1==t)return"DEBIT";i=this.accountVoucherType.toLowerCase()==d.$f.Receipt.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Contra.toLowerCase()?"Increase":"Decrease",t&&(i="Decrease"==i?"Increase":"Decrease");var n="";if("Increase"==i)switch(e){case"Assets":case"Expenses":n="DEBIT";break;case"Liability":case"Income":n="CREDIT"}else switch(e){case"Assets":case"Expenses":n="CREDIT";break;case"Liability":case"Income":n="DEBIT"}return n}finalcalculation(e){if(null==this.companyLedgerService.singleresult||null==this.companyLedgerService.singleresult)return;var t=this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt);let i=0,n=0,r=0,o=0,a=0;for(let l=0;l<t.length;l++){let e=null;e=this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()?this.DebitOrCreditByCategory(this.VoucherMasters[l].VDet[0].L_Cat,!0):this.DebitOrCreditByCategory(this.companyLedgerService.singleresult.Cat,!0);let s=0,c=0;if(t[l].LedDet.isTL?"DEBIT"==e?this.getNumeric(t[l].DrAmt)<0?r+=this.getNumeric(-1*t[l].DrAmt):o+=this.getNumeric(t[l].DrAmt):this.getNumeric(t[l].DrAmt)<0?o+=this.getNumeric(-1*t[l].DrAmt):r+=this.getNumeric(t[l].DrAmt):"DEBIT"==e?this.getNumeric(t[l].DrAmt)<0?(c=this.getNumeric(-1*t[l].DrAmt),i+=this.getNumeric(c)):(s=this.getNumeric(t[l].DrAmt),n+=this.getNumeric(s)):this.getNumeric(t[l].DrAmt)<0?(s=this.getNumeric(-1*t[l].DrAmt),n+=this.getNumeric(s)):(c=this.getNumeric(t[l].DrAmt),i+=this.getNumeric(c)),null!=t[l].TaxLedger&&null!=t[l].TaxLedger)for(let i=0;i<t[l].TaxLedger.length;i++)s>0&&(o+=this.getNumeric(s*t[l].TaxLedger[i].TR/100),t[l].TaxLedger[i].IsInclusive&&(a+=this.getNumeric(s*t[l].TaxLedger[i].TR/100))),c>0&&(r+=this.getNumeric(c*t[l].TaxLedger[i].TR/100),t[l].TaxLedger[i].IsInclusive&&(a+=this.getNumeric(c*t[l].TaxLedger[i].TR/100)));let u=n-i,g=o-r;this.Total=u>0?parseFloat((u-1*a).toString()).toFixed(2)+" Dr":parseFloat((-1*u-1*a).toString()).toFixed(2)+" Cr",this.TotalTax=g>0?parseFloat((1*g).toString()).toFixed(2)+" Dr":parseFloat((-1*g*1).toString()).toFixed(2)+" Cr",this.GrandTotal=u+g>0?this.Totalroundoff>0?parseFloat((1*(u+g-a-this.Totalroundoff)).toString()).toFixed(2)+" Dr":parseFloat((1*(u+g-this.Totalroundoff-a)).toString()).toFixed(2)+" Dr":this.Totalroundoff>0?parseFloat((1*(-1*(u+g)-a-this.Totalroundoff)).toString()).toFixed(2)+" Cr":parseFloat((1*(-1*(u+g)-this.Totalroundoff-a)).toString()).toFixed(2)+" Cr"}this.VoucherMasters[e].TotalAmt=Number(this.GrandTotal.replace("Cr","").replace("Dr","")),this.calculateBank(e)}onVoucherDateSelect(e){this.VoucherMasters[e.index].VDt=e.startDate}IsvalidDate(e){if(null!=this.VoucherMasters[e].VDt&&null!=this.VoucherMasters[e].VDt){var t=this.httpfunction.getCompanyvariale();return!(moment(t.StDt).format("YYYY-MM-DD")>moment(this.VoucherMasters[e].VDt).format("YYYY-MM-DD")&&(this.alertService.showError("Error","Voucher date must be greater than a company creation date: "+moment(this.companyLedgerService.getCompanyData.StDt).format("YYYY-MM-DD")+"."),1))}return!1}GenerateTableLedger(e,t){if(0==t){this.taxledgerDetails=[];var i=new c.eK;let t=null;return t=this.DebitOrCreditByCategory(this.comapny_LedgerAccount.Cat,!0),i.isMainled=!1,i.LId=e.LedDet.UIDN,i.L_Name=e.LedDet.LN,i.L_PId=e.LedDet.PI,i.L_Cat=e.LedDet.Cat,i.L_anc=e.LedDet.ancestor,i.CrAmt=e.DrAmt,i.deletedreference=e.deletedreference,i.TT=e.TT,i.TTA=e.TTA,i.challan=e.challan,i.IsBank=e.LedDet.IsBank,i.TCN=e.TCN,"DEBIT"==t?(i.CrAmt=0,i.DrAmt=this.getNumeric(e.DrAmt),this.getNumeric(e.DrAmt)<0&&(i.CrAmt=-1*this.getNumeric(e.DrAmt),i.DrAmt=0)):(i.DrAmt=0,i.CrAmt=this.getNumeric(e.DrAmt),this.getNumeric(e.DrAmt)<0&&(i.DrAmt=-1*this.getNumeric(e.DrAmt),i.CrAmt=0)),i.InventoryId=0,i.Quantity=0,i.UnitCost=0,i.IsTax=!1,null!=e.TaxLedger&&null!=e.TaxLedger&&e.TaxLedger.length>0?(i.TaxLedger=e.TaxLedger,i.TaxLedgerId=0,i.TaxRate=0):(i.TaxLedgerId=0,i.TaxRate=0),this.taxledgerDetails.push(i),this.taxledgerDetails}if(this.taxledgerDetails=[],null!=e.TaxLedger&&null!=e.TaxLedger){for(let t=0;t<e.TaxLedger.length;t++){let i=null;i=this.DebitOrCreditByCategory(this.comapny_LedgerAccount.Cat,!0);var n=new c.eK;n.isMainled=!1,n.IsTax=!0,n.LId=e.TaxLedger[t].UIDN,n.L_Name=e.TaxLedger[t].LN,n.L_PId=e.TaxLedger[t].PI,n.L_Cat=e.TaxLedger[t].Cat,n.L_anc=e.TaxLedger[t].ancestor,n.TaxLedgerId=e.TaxLedger[t].UIDN,n.TaxRate=e.TaxLedger[t].TR,n.isInclusive=e.TaxLedger[t].IsInclusive,null!=e.InventoryDetails&&null!=e.InventoryDetails&&(n.InventoryId=e.InventoryDetails.UIDN),"DEBIT"==i?(n.DrAmt=parseFloat((e.DrAmt*e.TaxLedger[t].TR/100).toFixed(2)),n.CrAmt=0):(n.CrAmt=parseFloat((e.DrAmt*e.TaxLedger[t].TR/100).toFixed(2)),n.DrAmt=0),this.taxledgerDetails.push(n)}return this.taxledgerDetails}return null}deleteLedger(e){this.VoucherMasters.splice(e,1)}RemoveReference(e){var t=this.curReference.findIndex(t=>t.Index==e);if(this.httpfunction.IsMobileview())if(0==this.curReference[t].operationType){var i=this.VoucherMasters[this.modalReferenceIndex].referencemaster.findIndex(e=>e.Index==this.modalReferenceIndex);this.VoucherMasters[this.modalReferenceIndex].referencemaster.splice(i,1),this.curReference.splice(t,1)}else"NewRef"==this.curReference[t].Ref_Type&&this.curReference[t].Balance>this.curReference[t].OrgBalance?this.alertService.showError("Error","This reference already have against reference. Please delete against reference first"):(i=this.VoucherMasters[this.modalReferenceIndex].referencemaster.findIndex(e=>e.Index==this.modalReferenceIndex),this.VoucherMasters[this.modalReferenceIndex].referencemaster[i].operationType=1,this.curReference[t].operationType=1);else 0==this.curReference[t].operationType?this.curReference.splice(t,1):"NewRef"==this.curReference[t].Ref_Type&&this.curReference[t].Balance>this.curReference[t].OrgBalance?this.alertService.showError("Error","This reference already have against reference. Please delete against reference first"):this.curReference[t].operationType=1;this.calculateAmount(this.modalReferenceIndex),this.finalcalculation(this.modalReferenceIndex)}onSubmit(){this.form.valid&&this.formvalid()}formvalid(){this.FinalVoucherMasters=[];let e=1;for(let t=0;t<this.VoucherMasters.length;t++)this.IsvalidDate(t)?this.form.valid&&(null!=this.VoucherMasters[t].VDt&&this.VoucherMasters[t].VDet.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt).length>0?(this.FinalVoucherMasters[t]=new c.VN,this.AddUpdateVoucher(t),e=0):(e+=1,this.alertService.showInfo("Info","Please enter proper detail in account."))):(e+=1,this.alertService.showInfo("Info","Please enter proper detail in account."));0==e&&this.accountService.addQuickVoucher(this.FinalVoucherMasters).subscribe(e=>{this.router.navigate(["/transactions/daybook"])},()=>{})}AddVoucher(e){this.accountService.waitforMessage=!1,this.accountService.isPopUpMessage=!1,this.accountVoucherType.toLowerCase()!=d.$f.Contra.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.Payment.toLowerCase()&&(this.FinalVoucherMasters[e].VDet=this.FinalVoucherMasters[e].VDet.sort((e,t)=>e.isMainled===t.isMainled?0:e.isMainled?-1:1)),this.FinalVoucherMasters[e].referencemaster=this.VoucherMasters[e].referencemaster}AddUpdateVoucher(e){let t=null,i=[];this.comapny_LedgerAccount=null;let n=this.VoucherMasters[e].VDet;this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()?(t=n.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt&&0!=e.DrAmt),this.comapny_LedgerAccount=n.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt&&0!=e.DrAmt)[0].LedDet,i=i.concat(t?JSON.parse(JSON.stringify(t)):[]),i[0].LedDet=this.companyLedgerService.singleresult):(i=n.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt&&0!=e.DrAmt),this.comapny_LedgerAccount=this.companyLedgerService.singleresult),this.FinalVoucherMasters[e].VT=this.accountVoucherType,this.FinalVoucherMasters[e].Narr=this.VoucherMasters[e].Narr,this.FinalVoucherMasters[e].VDt=this.VoucherMasters[e].VDt,this.FinalVoucherMasters[e].VDet=[];var r=new c.eK;r.LId=this.comapny_LedgerAccount.UIDN,r.L_Name=this.comapny_LedgerAccount.LN,r.L_PId=this.comapny_LedgerAccount.PI,r.L_Cat=this.comapny_LedgerAccount.Cat,r.L_anc=this.comapny_LedgerAccount.ancestor,r.challan=this.comapny_LedgerAccount.challan,r.TaxLedgerId=0,r.TaxRate=0,r.InventoryId=0,r.Quantity=0,r.UnitCost=0,r.IsTax=!1,r.isMainled=!0,r.IsBank=this.comapny_LedgerAccount.IsBank;let o=!0;for(let l=0;l<i.length;l++){let t=this.GenerateTableLedger(i[l],!1);if(this.FinalVoucherMasters[e].STA=null==i[l].State?JSON.parse(this.httpfunction.getStorage("_company")).Ste:i[l].State,null!=i[l].TaxLedger&&null!=i[l].TaxLedger&&(this.taxxxledger=this.GenerateTableLedger(i[l],!0),null!=t[0].TaxLedger))for(let e=0;e<t[0].TaxLedger.length;e++)t[0].TaxLedger[e].IsInclusive&&(t[0].DrAmt>0?t[0].DrAmt=t[0].DrAmt-this.getNumeric(t[0].DrAmt*t[0].TaxLedger[e].TR/100):t[0].CrAmt=t[0].CrAmt-this.getNumeric(t[0].CrAmt*t[0].TaxLedger[e].TR/100));if(null!=i[l].TaxLedger&&null!=i[l].TaxLedger&&null!=this.taxxxledger&&null!=this.taxxxledger)for(let i=0;i<this.taxxxledger.length;i++)this.taxxxledger[i].TaxLedgerId=t[0].LId,this.FinalVoucherMasters[e].VDet.push(this.taxxxledger[i]);if(null==t){o=!1;break}this.FinalVoucherMasters[e].VDet.push(t[0])}var a=this.FinalVoucherMasters[e].VDet.find(e=>1==e.isMainled);if(null==a&&null==a)for(let l=0;l<this.FinalVoucherMasters[e].VDet.length;l++)if(null==this.FinalVoucherMasters[e].VDet){o=!1;break}if(0==i.length&&(o=!1),o){let t=0,i=0,n=null;if(n=this.DebitOrCreditByCategory(this.comapny_LedgerAccount.Cat,!1),"DEBIT"==n){for(let i=0;i<this.FinalVoucherMasters[e].VDet.length;i++)t+=parseFloat(this.FinalVoucherMasters[e].VDet[i].CrAmt.toFixed(2)),t-=parseFloat(this.FinalVoucherMasters[e].VDet[i].DrAmt.toFixed(2));t=parseFloat(t.toFixed(2)),t>0?(r.CrAmt=0,r.DrAmt=t):(r.DrAmt=0,r.CrAmt=-1*t)}else{for(let t=0;t<this.FinalVoucherMasters[e].VDet.length;t++)i+=parseFloat(this.FinalVoucherMasters[e].VDet[t].DrAmt.toFixed(2)),i-=parseFloat(this.FinalVoucherMasters[e].VDet[t].CrAmt.toFixed(2));i=parseFloat(i.toFixed(2)),t>0?(r.DrAmt=0,r.CrAmt=i):(r.CrAmt=0,r.DrAmt=-1*i)}this.FinalVoucherMasters[e].VDet.push(r);for(let r=0;r<this.FinalVoucherMasters[e].VDet.length;r++)parseFloat(this.FinalVoucherMasters[e].VDet[r].DrAmt.toFixed(2))<0?(this.FinalVoucherMasters[e].VDet[r].CrAmt=-1*parseFloat(this.FinalVoucherMasters[e].VDet[r].DrAmt.toFixed(2)),this.FinalVoucherMasters[e].VDet[r].DrAmt=0):parseFloat(this.FinalVoucherMasters[e].VDet[r].CrAmt.toFixed(2))<0&&(this.FinalVoucherMasters[e].VDet[r].DrAmt=-1*parseFloat(this.FinalVoucherMasters[e].VDet[r].CrAmt.toFixed(2)),this.FinalVoucherMasters[e].VDet[r].CrAmt=0);t=0,i=0;for(let r=0;r<this.FinalVoucherMasters[e].VDet.length;r++)i+=parseFloat(this.FinalVoucherMasters[e].VDet[r].DrAmt.toFixed(2)),t+=parseFloat(this.FinalVoucherMasters[e].VDet[r].CrAmt.toFixed(2));t=parseFloat(t.toFixed(2)),i=parseFloat(i.toFixed(2)),t!=i?this.alertService.showError("Error","Debit and Credit amount is not matched, Please select proper Account."):(this.FinalVoucherMasters[e].ActionId=0,this.AddBankdetails(e))}else this.alertService.showError("Error","Please enter proper debit or credit amount for reference.")}AddBankdetails(e){let t=!1;var i=this.VoucherMasters[e].bankDetails;for(let r=0;r<i.length;r++){let o=i[r],a=o.Led_Cr>0?o.Led_Cr:o.Led_Dr;var n=this.FinalVoucherMasters[e].VDet.filter(e=>e.LId==o.BLId);let l=0;for(let t=0;t<n.length;t++)if(l+=n[t].CrAmt>0?null==o.InclusiveAmount&&null==o.InclusiveAmount?this.getNumeric(n[t].CrAmt):this.getNumeric(n[t].CrAmt)-o.InclusiveAmount:null==o.InclusiveAmount&&null==o.InclusiveAmount?this.getNumeric(n[t].DrAmt):this.getNumeric(n[t].DrAmt)-o.InclusiveAmount,null!=n[t].TaxLedger&&null!=n[t].TaxLedger)for(let i=0;i<n[t].TaxLedger.length;i++){let r=null,o=null;o=n[t].TaxLedger[i],r=this.FinalVoucherMasters[e].VDet.filter(e=>e.LId==o.UIDN&&e.TaxLedgerId==n[t].LId&&1==e.IsTax)[0],n[t].CrAmt>0?r.isInclusive?l-=this.getNumeric(r.CrAmt):l+=this.getNumeric(r.CrAmt):r.isInclusive?l-=this.getNumeric(r.DrAmt):l+=this.getNumeric(r.DrAmt)}if(a!=l){t=!0;break}}t?this.alertService.showError("Error","Bank amount is not matched with the voucher amount. Please enter proper amount"):(this.FinalVoucherMasters[e].bankDetails=this.VoucherMasters[e].bankDetails,this.finalSave(e))}finalSave(e){this.FinalVoucherMasters[e].CI=this.accountService.getCompanyId,this.FinalVoucherMasters[e].SI=this.accountService.getSignupId;let t=this.httpfunction.getStorage("_roledata");t&&"null"!=t&&null!=t&&JSON.parse(this.httpfunction.getStorage("_roledata"));let i=JSON.parse(this.httpfunction.getStorage("_company"));null!=i.CL&&null!=i&&i.CL.length>0&&(this.FinalVoucherMasters[e].logoname=i.CL[0].name),this.AddVoucher(e)}}return e.\u0275fac=function(t){return new(t||e)(x.Y36(s.B),x.Y36(o.Q),x.Y36(C.Rq),x.Y36(w.F0))},e.\u0275cmp=x.Xpm({type:e,selectors:[["app-account"]],viewQuery:function(e,t){if(1&e&&(x.Gf(on,5),x.Gf(an,5),x.Gf(ln,7,l.w9),x.Gf(sn,7)),2&e){let e;x.iGM(e=x.CRH())&&(t.form=e.first),x.iGM(e=x.CRH())&&(t.ITableRef=e.first),x.iGM(e=x.CRH())&&(t.serachcontrol=e.first),x.iGM(e=x.CRH())&&(t.RefModal=e.first)}},features:[x._Bn([o.Q])],decls:34,vars:27,consts:[[3,"ngClass"],[1,"card"],["name","form","novalidate","",3,"ScrollToInvalid","ngSubmit"],["f","ngForm"],[1,"row"],[1,"md-form","col-4"],["for","Voucher"],["autofocus","","selectOnTab","true","name","vtype","id","vtype","placeholder","Select Voucher",3,"tabIndex","ngClass","ngModel","ngModelChange","change"],["vtype","ngModel"],["value","Sales"],["value","Purchase",4,"ngIf"],["value","Receipt",4,"ngIf"],["value","Payment",4,"ngIf"],["value","Credit Note",4,"ngIf"],["value","Debit Note",4,"ngIf"],["value","Receipt Note",4,"ngIf"],["value","Delivery Note",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"col-4"],["for","AccountText"],["selectOnTab","true","dropdownPosition","bottom","required","","name","FLedger","bindLabel","LN",3,"tabIndex","virtualScroll","items","ngModel","ngClass","loading","placeholder","ngModelChange"],["led","","FLedger","ngModel"],["ng-label-tmp",""],["class","col-md-12 p-0",4,"ngIf"],["class","row",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalRef","aria-hidden","true",1,"modalNew","fade"],["RefModal","bs-modal"],["class","modal-lg","role","document","id","myModalRef",4,"ngIf"],["value","Purchase"],["value","Receipt"],["value","Payment"],["value","Credit Note"],["value","Debit Note"],["value","Receipt Note"],["value","Delivery Note"],[1,"invalid-feedback"],[4,"ngIf"],[1,"col-md-12","p-0"],[1,"my-custom-scrollbar"],[1,"table","table-bordered","table-account"],[1,"text-left"],["scope","col",1,"text-center"],["scope","col",1,"text-left"],["voucherrow",""],[4,"ngFor","ngForOf"],["type","button","value","Add Item",1,"btn","btn-primary","btn-sm","lighten-3",3,"tabIndex","click"],["scope","row",1,"text-left"],["autofocus","","type","text","appDatepicker","","placeholder","Select Voucher Date",1,"form-control",3,"tabindex","name","startDate","index","id","selectedindex"],["ChkDt",""],["autofocus","","dropdownPosition","bottom","bindLabel","LN","placeholder","Select Account","selectOnTab","true","appendTo","body",1,"maxpanel",3,"tabIndex","virtualScroll","items","name","ngModel","loading","ngModelChange"],["toled",""],["ng-header-tmp",""],[1,"clearfix","text-left","ml-2","font-italic","font-weight-light"],["href","javascript:void(0)",3,"click",4,"ngFor","ngForOf"],["scope","row",1,"text-center"],["href","javascript:void(0)",1,"btn","btn-link",3,"tabIndex","click"],["type","number","placeholder","Enter Amount","pattern","^-?\\s*(?:\\d+|\\d*\\.\\d+)?\\s*$",1,"form-control",2,"min-width","75px",3,"tabIndex","name","ngModel","id","ngModelChange","change"],["dramt",""],["scope","row"],["selectOnTab","true","appendTo","body","dropdownPosition","bottom","bindLabel","LN","placeholder","Select Tax Account",1,"maxpanel",2,"min-width","140px",3,"tabIndex","multiple","items","name","ngModel","loading","ngModelChange","change"],["toTax",""],["ng-option-tmp",""],["type","text","placeholder","Enter Narration",1,"form-control",2,"min-width","75px",3,"tabIndex","name","ngModel","id","ngModelChange"],["scope","row",1,"text-left","pt-1","pl-2",2,"min-width","75px"],["scope","row",1,"text-center",2,"background","white"],["href","javascript:void(0)","title","Delete Ledger","placement","bottom",2,"text-decoration","none",3,"tabIndex","click"],[1,"fas","fa-trash","text-danger","mr-1"],["href","javascript:void(0)",3,"click"],["id","formbtnContainer",1,"col-sm-12","p-0","text-right"],["tabindex","1020","type","submit","name","btnsubmit","id","btnsubmit",1,"btn","btn-primary"],["btnsubmit",""],["role","document","id","myModalRef",1,"modal-lg"],["role","form",3,"ngSubmit"],["frefitem","ngForm"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","table-responsive refTable",4,"ngIf"],["type","button",1,"btn","btn-link","p-0","m-0",3,"click"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-primary"],["type","button",1,"btn","btn-sm","btn-dark",3,"click"],[1,"table-responsive","refTable"],["class","table table-account table-bordered",4,"ngIf"],[1,"table","table-account","table-bordered"],["refTable",""],["class","md-form",4,"ngFor","ngForOf"],[1,"md-form"],["required","","appendTo","body","placeholder","Select Ref Type",2,"width","130px",3,"name","disabled","ngModel","ngClass","ngModelChange"],["RefType","ngModel"],["value","NewRef"],["value","OnAccount"],["value","Advance"],["value","AgainstRef"],["colspan","2",4,"ngIf"],["type","number","required","","placeholder","Enter Amount",1,"accText","form-control",2,"width","130px",3,"name","ngModel","ngClass","change","ngModelChange"],["Refamt","ngModel"],["placeholder","Select","appendTo","body",2,"min-width","65px",3,"name","ngModel","ngModelChange"],["value","Dr"],["value","Cr"],["href","javascript:void(0)",2,"text-decoration","none",3,"click"],["type","text","required","","placeholder","Reference Tag",1,"form-control","accText",2,"min-width","130px",3,"ngClass","disabled","name","ngModel","ngModelChange"],["refTag","ngModel"],["type","text","appDatepicker","","autocomplete","none",1,"form-control","readonlydate",2,"width","85px",3,"disabled","ngClass","startDate","name","id","selected"],["refdate",""],["colspan","2"],["style","min-width:200px;","selectOnTab","true","appendTo","body","bindLabel","SN","placeholder","Select Reference","bindValue","UIDN",3,"items","name","ngModel","ngModelChange","change",4,"ngIf"],["selectOnTab","true","appendTo","body","bindLabel","SN","placeholder","Select Reference","bindValue","UIDN",2,"min-width","200px",3,"items","name","ngModel","ngModelChange","change"],["agReferences",""]],template:function(e,t){if(1&e){const e=x.EpF();x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"form",2,3),x.NdJ("ngSubmit",function(){return x.CHM(e),x.MAs(3).form.valid&&t.onSubmit()}),x.TgZ(4,"div",4),x.TgZ(5,"div",5),x.TgZ(6,"label",6),x._uU(7," Voucher"),x.qZA(),x.TgZ(8,"ng-select",7,8),x.NdJ("ngModelChange",function(e){return t.accountVoucherType=e})("change",function(){return t.SelectVoucherType()}),x.TgZ(10,"ng-option",9),x._uU(11," Sales"),x.qZA(),x.YNc(12,cn,2,0,"ng-option",10),x.YNc(13,dn,2,0,"ng-option",11),x.YNc(14,un,2,0,"ng-option",12),x.YNc(15,gn,2,0,"ng-option",13),x.YNc(16,hn,2,0,"ng-option",14),x.YNc(17,pn,2,0,"ng-option",15),x.YNc(18,fn,2,0,"ng-option",16),x.qZA(),x.YNc(19,Zn,2,1,"div",17),x.qZA(),x.TgZ(20,"div",18),x.TgZ(21,"label",19),x._uU(22,"Select Ledger"),x.qZA(),x.TgZ(23,"ng-select",20,21),x.NdJ("ngModelChange",function(e){return t.companyLedgerService.singleresult=e}),x.YNc(26,Tn,1,1,"ng-template",22),x.qZA(),x.YNc(27,vn,2,1,"div",17),x.qZA(),x.qZA(),x.TgZ(28,"div",4),x.YNc(29,qn,27,2,"div",23),x.qZA(),x.YNc(30,Sn,5,0,"div",24),x.qZA(),x.qZA(),x.TgZ(31,"div",25,26),x.YNc(33,Gn,19,1,"div",27),x.qZA(),x.qZA()}if(2&e){const e=x.MAs(3),i=x.MAs(9),n=x.MAs(25);x.Q6J("ngClass",t.vouchertypeclass),x.xp6(8),x.Q6J("tabIndex",1)("ngClass",x.VKq(23,_n,e.submitted&&i.invalid))("ngModel",t.accountVoucherType),x.xp6(4),x.Q6J("ngIf","CRM"!=t.accountService.getCompanyData.Type),x.xp6(1),x.Q6J("ngIf","CRM"!=t.accountService.getCompanyData.Type),x.xp6(1),x.Q6J("ngIf","CRM"!=t.accountService.getCompanyData.Type),x.xp6(1),x.Q6J("ngIf","CRM"!=t.accountService.getCompanyData.Type),x.xp6(1),x.Q6J("ngIf","CRM"!=t.accountService.getCompanyData.Type),x.xp6(1),x.Q6J("ngIf","Trading"==t.accountService.getCompanyData.Type),x.xp6(1),x.Q6J("ngIf","Trading"==t.accountService.getCompanyData.Type),x.xp6(1),x.Q6J("ngIf",e.submitted&&i.invalid),x.xp6(4),x.s9C("placeholder",t.AccountText),x.Q6J("tabIndex",2)("virtualScroll",!0)("items",t.FromLedger)("ngModel",t.companyLedgerService.singleresult)("ngClass",x.VKq(25,_n,e.submitted&&n.invalid))("loading",t.companyLedgerService.loading),x.xp6(4),x.Q6J("ngIf",e.submitted&&n.invalid),x.xp6(2),x.Q6J("ngIf",!t.accountService.IsMobileview),x.xp6(1),x.Q6J("ngIf",!t.accountService.isMobile),x.xp6(3),x.Q6J("ngIf",t.showReferencepopup)}},directives:[n.mk,D._Y,D.JL,D.F,U.u,l.w9,_.x,D.JJ,D.On,l.xv,n.O5,D.Q7,l.bb,N.oB,n.sg,E.q,l.A3,D.wV,D.Fj,D.c5,l.Z2],styles:[""]}),e})(),data:{title:"Add Transaction",ViewType:"View",component:"AccountComponent"},canActivate:[tn.i]},{path:"accountaddedit/:id",component:_t.L,data:{title:"Add Transaction",ViewType:"View",component:"AccountAddeditComponent"},canActivate:[tn.i]},{path:"account/:Type",component:_t.L,data:{title:"Add Transaction",ViewType:"View",component:"AccountAddeditComponent"},canActivate:[tn.i]},{path:"account/:Type/:Id",component:_t.L,data:{title:"Edit Transaction",ViewType:"View",component:"AccountAddeditComponent"},canActivate:[tn.i]},{path:"ledgerList",component:Wi,data:{title:"Ledger List",ViewType:"View",component:"CompanyledgerListComponent"},canActivate:[tn.i]},{path:"ledgeradd/:parentid/:group",component:kt.k,data:{title:"Add/Edit Ledger",ViewType:"View",component:"CompanyledgerAddeditComponent"},canActivate:[tn.i]},{path:"ledgeredit/:cmpledgerid",component:kt.k,data:{title:"Add/Edit Ledger",ViewType:"View",component:"CompanyledgerAddeditComponent"},canActivate:[tn.i]},{path:"bankstatement",component:en,data:{title:"Bank Statement",ViewType:"View",component:"BankstatementComponent"},canActivate:[tn.i]}]}];let Yn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.oAB({type:e}),e.\u0275inj=x.cJS({imports:[[w.Bz.forChild(Bn)],w.Bz]}),e})();var jn=i(26246);let Kn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=x.oAB({type:e}),e.\u0275inj=x.cJS({providers:[$n],imports:[[n.ez,Yn,O.Lr,L.Pc.forRoot(),jn.p.forRoot()]]}),e})()}}]);