"use strict";(self.webpackChunkaccoubtbook=self.webpackChunkaccoubtbook||[]).push([[5393],{65393:function(e,t,i){i.r(t),i.d(t,{TransactionsModule:function(){return jn}});var n=i(38583),r=i(64762),o=i(78980),a=i(42005),l=i(58679),s=i(84659),c=i(18454),d=i(66203),u=i(34450),g=i(18374),h=i(75075),p=i(39478),f=i(84306),m=i(27541),Z=i(32364),T=i(24498),A=i(82316),v=i(33018),x=i(89525),I=i(92859),L=i(44667),w=i(12868),b=i(89401),C=i(37919),q=i(91113),S=i(25575),M=i(48429),y=i(43647),N=i(3679),D=i(6642),_=i(66496),U=i(85895),k=i(10743),J=i(87520),V=i(21974),R=i(65452),Q=i(82929),F=i(3001),H=i(53321),E=i(44633),O=i(14868);const P=["toled"],G=["ChallanModal"],B=["BillModal"],Y=["BillModalMobile"],j=["SearchModal"],K=["purled"],z=["taxLedger"],W=["LedgerHistoryModal"],X=["fbill"],ee=["ionInfinitescroll"],te=["ionvscroll"],ie=["ImageModal"],ne=["myInqImportedDataViewModal"];function re(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"a"),v._uU(1),v.qZA(),v.TgZ(2,"a",126),v.TgZ(3,"i",127),v.NdJ("click",function(){const t=v.CHM(e).item;return v.oxw(2).OpenLedgerHistoryPopUp(t.UIDN)}),v.qZA(),v.qZA()}if(2&e){const e=t.item;v.xp6(1),v.Oqu(e.LN)}}function oe(e,t){if(1&e&&(v.TgZ(0,"small",128),v._uU(1),v.qZA()),2&e){const e=v.oxw(2);v.xp6(1),v.AsE(" Loaded ",e.siteService.result.length," of ",e.siteService.totalItems," ")}}function ae(e,t){if(1&e&&(v.TgZ(0,"small",128),v._uU(1),v.qZA()),2&e){const e=v.oxw(2);v.xp6(1),v.AsE(" Loaded ",e.inventoryService.result.length," of ",e.inventoryService.totalItems," ")}}function le(e,t){if(1&e&&(v.TgZ(0,"small",128),v._uU(1),v.qZA()),2&e){const e=v.oxw(2);v.xp6(1),v.AsE(" Loaded ",e.taskService.result.length," of ",e.taskService.totalItems," ")}}function se(e,t){if(1&e&&(v.TgZ(0,"small",128),v._uU(1),v.qZA()),2&e){const e=v.oxw(2);v.xp6(1),v.AsE(" Loaded ",e.subtaskService.result.length," of ",e.subtaskService.totalItems," ")}}function ce(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",102),v.TgZ(1,"ul",103),v.TgZ(2,"li",104),v.TgZ(3,"button",105),v.NdJ("click",function(){return v.CHM(e),v.oxw().goback()}),v._UZ(4,"i",106),v.qZA(),v.qZA(),v.TgZ(5,"li",107),v.TgZ(6,"ng-select",108,109),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw().searchLedger=t}),v.YNc(8,re,4,1,"ng-template",59),v.qZA(),v.qZA(),v.TgZ(9,"li",110),v.TgZ(10,"button",111),v.NdJ("click",function(){return v.CHM(e),v.oxw().FilterData()}),v._UZ(11,"span",112),v.TgZ(12,"span",113),v._uU(13,"Search"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(14,"li",107),v.TgZ(15,"div",114),v.NdJ("isOpenChange",function(t){return v.CHM(e),v.oxw().change(t)}),v.TgZ(16,"button",115),v._UZ(17,"span",116),v.TgZ(18,"span",113),v._uU(19,"Filter"),v.qZA(),v.qZA(),v.TgZ(20,"div",117),v.NdJ("click",function(e){return e.stopPropagation()}),v.TgZ(21,"form",45,118),v.NdJ("ngSubmit",function(){return v.CHM(e),v.oxw().FilterData()}),v.TgZ(23,"div",119),v.TgZ(24,"div",120),v.TgZ(25,"label",55),v._uU(26,"Site"),v.qZA(),v.TgZ(27,"ng-select",60),v.NdJ("scrollToEnd",function(){return v.CHM(e),v.oxw().siteService.ScrollDown()})("ngModelChange",function(t){return v.CHM(e),v.oxw().siteService.singleresult=t}),v.YNc(28,oe,2,2,"ng-template",58),v.qZA(),v.qZA(),v.TgZ(29,"div",120),v.TgZ(30,"label",61),v._uU(31,"Inventory"),v.qZA(),v.TgZ(32,"ng-select",62),v.NdJ("scrollToEnd",function(){return v.CHM(e),v.oxw().inventoryService.ScrollDown()})("ngModelChange",function(t){return v.CHM(e),v.oxw().inventoryService.singleresult=t}),v.YNc(33,ae,2,2,"ng-template",58),v.qZA(),v.qZA(),v.TgZ(34,"div",120),v.TgZ(35,"label",63),v._uU(36,"Task"),v.qZA(),v.TgZ(37,"ng-select",64),v.NdJ("scrollToEnd",function(){return v.CHM(e),v.oxw().taskService.ScrollDown()})("ngModelChange",function(t){return v.CHM(e),v.oxw().taskService.singleresult=t}),v.YNc(38,le,2,2,"ng-template",58),v.qZA(),v.qZA(),v.TgZ(39,"div",120),v.TgZ(40,"label",65),v._uU(41,"Sub Task"),v.qZA(),v.TgZ(42,"ng-select",66),v.NdJ("scrollToEnd",function(){return v.CHM(e),v.oxw().subtaskService.ScrollDown()})("ngModelChange",function(t){return v.CHM(e),v.oxw().subtaskService.singleresult=t}),v.YNc(43,se,2,2,"ng-template",58),v.qZA(),v.qZA(),v.TgZ(44,"div",121),v.TgZ(45,"label",67),v._uU(46,"Challan No"),v.qZA(),v.TgZ(47,"input",68,69),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw().challanfilterNo=t}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(49,"div",122),v.TgZ(50,"button",123),v.NdJ("click",function(t){v.CHM(e);const i=v.oxw();return i.clearfilterandloadnewdata(),i.toggleDropdown(t)}),v._uU(51," Clear Filter "),v.qZA(),v.TgZ(52,"button",124),v.NdJ("click",function(t){return v.CHM(e),v.oxw().toggleDropdown(t)}),v._UZ(53,"i",125),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw();v.xp6(6),v.Q6J("virtualScroll",!0)("items",e.ChallanLedger)("ngModel",e.searchLedger)("loading",e.ledgerService.loading),v.xp6(9),v.Q6J("isOpen",e.status.isOpen),v.xp6(5),v.ekj("show",e.status.isOpen),v.xp6(7),v.Q6J("virtualScroll",!0)("items",e.siteService.result)("ngModel",e.siteService.singleresult)("loading",e.siteService.loading),v.xp6(5),v.Q6J("virtualScroll",!0)("items",e.inventoryService.result)("ngModel",e.inventoryService.singleresult)("loading",e.inventoryService.loading),v.xp6(5),v.Q6J("virtualScroll",!0)("items",e.taskService.result)("ngModel",e.taskService.singleresult)("loading",e.taskService.loading),v.xp6(5),v.Q6J("virtualScroll",!0)("items",e.subtaskService.result)("ngModel",e.subtaskService.singleresult)("loading",e.subtaskService.loading),v.xp6(5),v.Q6J("ngModel",e.challanfilterNo)}}function de(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",129),v.TgZ(1,"ul",103),v.TgZ(2,"li",130),v.TgZ(3,"ion-icon",131),v.NdJ("click",function(){return v.CHM(e),v.oxw().goback()}),v.qZA(),v.qZA(),v.TgZ(4,"li",130),v.TgZ(5,"ion-icon",132),v.NdJ("click",function(){return v.CHM(e),v.oxw().advSearchM()}),v.qZA(),v.qZA(),v.TgZ(6,"li",133),v.TgZ(7,"div",134),v.TgZ(8,"strong"),v._uU(9,"Challan List"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(10,"li",135),v.TgZ(11,"ion-icon",136),v.NdJ("click",function(t){return v.CHM(e),v.oxw().sortPopover(t)}),v.qZA(),v.qZA(),v.qZA(),v.qZA()}}function ue(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",142),v.TgZ(1,"div",143),v.TgZ(2,"div",144),v.TgZ(3,"strong"),v._uU(4,"Challan List"),v.qZA(),v.qZA(),v.TgZ(5,"div",145),v.TgZ(6,"label",146),v.TgZ(7,"input",52),v.NdJ("change",function(){return v.CHM(e),v.oxw(2).FilterData()})("ngModelChange",function(t){return v.CHM(e),v.oxw(2).isChallanPending=t}),v.qZA(),v._UZ(8,"span",53),v.qZA(),v.TgZ(9,"span",147),v._uU(10,"Pending Challan"),v.qZA(),v.qZA(),v.TgZ(11,"div",148),v.TgZ(12,"div",149),v._uU(13),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(2);v.xp6(7),v.Q6J("ngModel",e.isChallanPending),v.xp6(6),v.Oqu(e.challanService.currentShowing)}}function ge(e,t){if(1&e&&(v.TgZ(0,"span",181),v._uU(1),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(1),v.hij("voucher no :",e.ChlnVNo,"")}}function he(e,t){if(1&e&&(v.TgZ(0,"span",181),v._uU(1),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(1),v.hij("amount : ",e.VAmount,"")}}function pe(e,t){if(1&e&&(v.TgZ(0,"a",183),v.NdJ("click",function(e){return e.stopPropagation()}),v._uU(1),v.qZA()),2&e){const e=t.index;v.s9C("href",t.$implicit.src,v.LSH),v.xp6(1),v.hij("Challan-",e+1," ")}}function fe(e,t){if(1&e&&(v.TgZ(0,"div"),v.YNc(1,pe,2,2,"a",182),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(1),v.Q6J("ngForOf",e.UpI)}}function me(e,t){1&e&&(v.TgZ(0,"span",184),v._uU(1,"Billed"),v.qZA())}function Ze(e,t){1&e&&(v.TgZ(0,"span",185),v._uU(1,"Bill Pending"),v.qZA())}function Te(e,t){if(1&e&&(v.TgZ(0,"tr"),v.TgZ(1,"td"),v._uU(2),v.qZA(),v.TgZ(3,"td"),v._uU(4),v.qZA(),v.TgZ(5,"td"),v._uU(6),v.qZA(),v.TgZ(7,"td"),v._uU(8),v.qZA(),v.TgZ(9,"td"),v._uU(10),v.qZA(),v.TgZ(11,"td"),v._uU(12),v.qZA(),v.TgZ(13,"td"),v._uU(14),v.ALo(15,"indianCurrency"),v.qZA(),v.qZA()),2&e){const e=t.$implicit;v.xp6(2),v.Oqu(e.InvNm),v.xp6(2),v.Oqu(e.InvHei),v.xp6(2),v.Oqu(e.InvWid),v.xp6(2),v.Oqu(e.InvLen),v.xp6(2),v.Oqu(e.InvQty),v.xp6(2),v.Oqu(e.InvRt),v.xp6(2),v.Oqu(v.lcZ(15,7,e.TtlAmt))}}function Ae(e,t){if(1&e&&(v.TgZ(0,"table",186),v.TgZ(1,"tr"),v.TgZ(2,"th"),v._uU(3,"Inventory Name"),v.qZA(),v.TgZ(4,"th"),v._uU(5,"Height"),v.qZA(),v.TgZ(6,"th"),v._uU(7,"Width"),v.qZA(),v.TgZ(8,"th"),v._uU(9,"Length"),v.qZA(),v.TgZ(10,"th"),v._uU(11,"QTY"),v.qZA(),v.TgZ(12,"th"),v._uU(13,"Rate"),v.qZA(),v.TgZ(14,"th"),v._uU(15,"Amount"),v.qZA(),v.qZA(),v.YNc(16,Te,16,9,"tr",187),v.qZA()),2&e){const e=v.oxw(),t=e.index,i=e.$implicit,n=v.oxw(3);v.Q6J("hidden",!n.showNestedTable[t]),v.xp6(16),v.Q6J("ngForOf",i.ChallanInv)}}function ve(e,t){if(1&e){const e=v.EpF();v.ynx(0,167),v.TgZ(1,"tr",168),v.NdJ("keydown.enter",function(){const t=v.CHM(e).$implicit;return v.oxw(3).editOnArrowEvent(t.UIDN)})("keydown.arrowdown",function(){const t=v.CHM(e).index;return v.oxw(3).challanService.arrowDownEvent(t+151)})("keydown.arrowup",function(){const t=v.CHM(e).index;return v.oxw(3).challanService.arrowUpEvent(t+149)})("click",function(){const t=v.CHM(e).index;return v.oxw(3).toggleNestedTable(t)}),v.TgZ(2,"td"),v.TgZ(3,"div",152),v.TgZ(4,"input",169),v.NdJ("ngModelChange",function(t){return v.CHM(e).$implicit.Ick=t}),v.qZA(),v._UZ(5,"label",170),v.qZA(),v.qZA(),v.TgZ(6,"td"),v._uU(7),v.qZA(),v.TgZ(8,"td"),v.TgZ(9,"a",171),v.NdJ("clickAllowed",function(){const t=v.CHM(e).$implicit;return v.oxw(3).openChallanpopup(t.UIDN)}),v._uU(10),v.qZA(),v.qZA(),v.TgZ(11,"td"),v._UZ(12,"dateformatter",172),v.qZA(),v.TgZ(13,"td"),v._uU(14),v.qZA(),v.TgZ(15,"td"),v._uU(16),v._UZ(17,"br"),v.TgZ(18,"span",173),v._uU(19),v.qZA(),v.qZA(),v.TgZ(20,"td"),v._uU(21),v.qZA(),v.TgZ(22,"td"),v._uU(23),v.qZA(),v.TgZ(24,"td"),v._uU(25),v._UZ(26,"br"),v.YNc(27,ge,2,1,"span",174),v.YNc(28,he,2,1,"span",174),v.qZA(),v.TgZ(29,"td"),v.YNc(30,fe,2,1,"div",13),v.qZA(),v.TgZ(31,"td"),v.YNc(32,me,2,0,"span",175),v.YNc(33,Ze,2,0,"span",176),v.qZA(),v.TgZ(34,"td"),v.TgZ(35,"a",177),v.NdJ("clickAllowed",function(){const t=v.CHM(e).$implicit;return v.oxw(3).challanService.delete(t.UIDN)}),v._UZ(36,"i",178),v.qZA(),v.qZA(),v.qZA(),v.TgZ(37,"tr"),v.TgZ(38,"td",179),v.YNc(39,Ae,17,2,"table",180),v.qZA(),v.qZA(),v.BQk()}if(2&e){const e=t.$implicit,i=t.index,n=v.oxw(3);v.ekj("rowselected",e.billSelected),v.xp6(1),v.s9C("tabindex",i+150),v.xp6(3),v.MGl("id","item_",i,""),v.Q6J("checked",e.Ick)("ngModel",e.Ick),v.xp6(1),v.MGl("for","item_",i,""),v.xp6(2),v.hij(" ",e.SrNo," "),v.xp6(2),v.Q6J("SignupId",n.SignupId)("UserId",n.UserId),v.xp6(1),v.hij(" ",e.CN," "),v.xp6(2),v.s9C("dateValue",e.MtD),v.xp6(2),v.Oqu(e.StNm),v.xp6(2),v.hij(" ",e.TNm," "),v.xp6(3),v.hij(" ",e.SbTNm,""),v.xp6(2),v.Oqu(e.LdNm),v.xp6(2),v.Oqu(e.UsrNm),v.xp6(2),v.hij(" ",e.Narr,""),v.xp6(2),v.Q6J("ngIf",null!=e.ChlnVNo),v.xp6(1),v.Q6J("ngIf",null!=e.VAmount),v.xp6(2),v.Q6J("ngIf",null!=e.UpI&&e.UpI.length>0),v.xp6(2),v.Q6J("ngIf",1==e.IsBd),v.xp6(1),v.Q6J("ngIf",0==e.IsBd),v.xp6(2),v.Q6J("SignupId",n.SignupId)("UserId",n.UserId),v.xp6(4),v.Q6J("ngIf",null!=e.ChallanInv&&e.ChallanInv.length>0)}}function xe(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"table",150),v.TgZ(1,"thead",151),v.TgZ(2,"tr"),v.TgZ(3,"th"),v.TgZ(4,"div",152),v.TgZ(5,"input",153),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw(2).selectedAll=t})("change",function(t){return v.CHM(e),v.oxw(2).selectAllchange(t)}),v.qZA(),v._UZ(6,"label",154),v.qZA(),v.qZA(),v.TgZ(7,"th",155),v._uU(8,"Sr No"),v.qZA(),v.TgZ(9,"th",156),v._uU(10,"Challan No"),v.qZA(),v.TgZ(11,"th",157),v._uU(12,"Date"),v.qZA(),v.TgZ(13,"th",158),v._uU(14,"Site"),v.qZA(),v.TgZ(15,"th",159),v._uU(16,"Task/Sub Task"),v.qZA(),v.TgZ(17,"th",160),v._uU(18,"Ledger"),v.qZA(),v.TgZ(19,"th",161),v._uU(20,"User Name"),v.qZA(),v.TgZ(21,"th",162),v._uU(22,"Narration"),v.qZA(),v.TgZ(23,"th"),v._uU(24,"Attachment"),v.qZA(),v.TgZ(25,"th",163),v._uU(26,"Bill Status"),v.qZA(),v.TgZ(27,"th"),v._uU(28,"Action"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(29,"tbody",164,165),v.YNc(31,ve,40,26,"ng-container",166),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(2);v.xp6(5),v.Q6J("checked",e.selectedAll)("ngModel",e.selectedAll),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(4),v.Q6J("dirsort",e.challanService),v.xp6(6),v.Q6J("ngForOf",e.challanService.result)}}function Ie(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",142),v.TgZ(1,"div",143),v.TgZ(2,"div",144),v.TgZ(3,"strong"),v._uU(4,"Challan List"),v.qZA(),v.qZA(),v.TgZ(5,"div",145),v.TgZ(6,"label",146),v.TgZ(7,"input",52),v.NdJ("change",function(){return v.CHM(e),v.oxw(3).FilterData()})("ngModelChange",function(t){return v.CHM(e),v.oxw(3).isChallanPending=t}),v.qZA(),v._UZ(8,"span",53),v.qZA(),v.TgZ(9,"span",147),v._uU(10,"Pending Challan"),v.qZA(),v.qZA(),v.TgZ(11,"div",148),v.TgZ(12,"div",149),v._uU(13),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(3);v.xp6(7),v.Q6J("ngModel",e.isChallanPending),v.xp6(6),v.Oqu(e.challanService.currentShowing)}}function Le(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",188),v.YNc(1,Ie,14,2,"div",138),v.TgZ(2,"table",189),v.TgZ(3,"thead",151),v.TgZ(4,"tr"),v.TgZ(5,"th"),v.TgZ(6,"div",152),v.TgZ(7,"input",153),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw(2).selectedAll=t})("change",function(t){return v.CHM(e),v.oxw(2).selectAllchange(t)}),v.qZA(),v._UZ(8,"label",154),v.qZA(),v.qZA(),v.TgZ(9,"th",155),v._uU(10,"Sr No"),v.qZA(),v.TgZ(11,"th",156),v._uU(12,"Challan No"),v.qZA(),v.TgZ(13,"th",157),v._uU(14,"Date"),v.qZA(),v.TgZ(15,"th",159),v._uU(16,"Task"),v.qZA(),v.TgZ(17,"th",190),v._uU(18,"Inventory"),v.qZA(),v.TgZ(19,"th",160),v._uU(20,"Ledger"),v.qZA(),v.TgZ(21,"th",158),v._uU(22,"Site"),v.qZA(),v.TgZ(23,"th",161),v._uU(24,"User Name"),v.qZA(),v.TgZ(25,"th",191),v._uU(26,"Quantity"),v.qZA(),v.TgZ(27,"th",192),v._uU(28,"Rate/ Unit"),v.qZA(),v.TgZ(29,"th",193),v._uU(30,"Total Amount"),v.qZA(),v.TgZ(31,"th",162),v._uU(32,"Narration"),v.qZA(),v.TgZ(33,"th"),v._uU(34,"challan copy"),v.qZA(),v.TgZ(35,"th",163),v._uU(36,"Bill Status"),v.qZA(),v.TgZ(37,"th"),v._uU(38,"Action"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(2);v.xp6(1),v.Q6J("ngIf",0==(e.challanService.isMobile||e.challanService.IsMobileview)),v.xp6(6),v.Q6J("checked",e.selectedAll)("ngModel",e.selectedAll),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(2),v.Q6J("dirsort",e.challanService),v.xp6(4),v.Q6J("dirsort",e.challanService)}}function we(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",137),v.YNc(1,ue,14,2,"div",138),v.TgZ(2,"div",139),v.NdJ("scrolled",function(t){return v.CHM(e),v.oxw().onChallanScroll(t)}),v.YNc(3,xe,32,12,"table",140),v.qZA(),v.YNc(4,Le,39,16,"div",141),v.qZA()}if(2&e){const e=v.oxw();v.xp6(1),v.Q6J("ngIf",0==(e.challanService.isMobile||e.challanService.IsMobileview)),v.xp6(1),v.Q6J("scrollWindow",!0),v.xp6(1),v.Q6J("ngIf",e.challanService.result.length>0),v.xp6(1),v.Q6J("ngIf",e.challanService.result.length>0)}}function be(e,t){if(1&e&&(v.TgZ(0,"ion-col",214),v.TgZ(1,"div",181),v._uU(2," Sr no:"),v.qZA(),v._uU(3),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(3),v.hij(" ",e.SrNo," ")}}function Ce(e,t){if(1&e&&(v.TgZ(0,"ion-col",214),v.TgZ(1,"div",181),v._uU(2," Challan No:"),v.qZA(),v._uU(3),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(3),v.hij(" ",e.CN," ")}}function qe(e,t){if(1&e&&(v.TgZ(0,"ion-col",214),v.TgZ(1,"div",181),v._uU(2," Username:"),v.qZA(),v._uU(3),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(3),v.hij(" ",e.UsrNm," ")}}function Se(e,t){if(1&e&&(v.TgZ(0,"ion-col",214),v.TgZ(1,"div",181),v._uU(2," Ledger:"),v.qZA(),v._uU(3),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(3),v.hij(" ",e.LdNm," ")}}function Me(e,t){1&e&&(v.TgZ(0,"span",184),v._uU(1,"Billed"),v.qZA())}function ye(e,t){1&e&&(v.TgZ(0,"span",185),v._uU(1,"Bill Pending"),v.qZA())}function Ne(e,t){if(1&e&&(v.TgZ(0,"ion-col",204),v._uU(1),v.ALo(2,"indianCurrency"),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(1),v.hij(" Amt: ",v.lcZ(2,1,e.TA)," ")}}function De(e,t){if(1&e&&(v.TgZ(0,"ion-col",214),v.TgZ(1,"div",181),v._uU(2," Site:"),v.qZA(),v._uU(3),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(3),v.hij(" ",e.StNm," ")}}function _e(e,t){if(1&e&&(v.TgZ(0,"ion-col",214),v.TgZ(1,"div",181),v._uU(2," Narration:"),v.qZA(),v._uU(3),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(3),v.hij(" ",e.Narr," ")}}function Ue(e,t){if(1&e&&(v.TgZ(0,"ion-col",215),v.TgZ(1,"div",181),v._uU(2," Task:"),v.qZA(),v._uU(3),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(3),v.hij(" ",e.TNm," ")}}function ke(e,t){if(1&e&&(v.TgZ(0,"ion-col",216),v.TgZ(1,"div",181),v._uU(2," Inventory:"),v.qZA(),v._uU(3),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(3),v.hij(" ",e.InvNm," ")}}function Je(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"ion-col",217),v.TgZ(1,"a",218),v.NdJ("click",function(){v.CHM(e);const t=v.oxw().$implicit;return v.oxw(2).generateBillPopupMobile(t.UIDN)}),v._uU(2," Generate Bill "),v.qZA(),v.qZA()}}function Ve(e,t){if(1&e&&(v.TgZ(0,"a",221),v.NdJ("click",function(e){return e.stopPropagation()}),v._uU(1),v.qZA()),2&e){const e=t.index;v.s9C("href",t.$implicit.src,v.LSH),v.xp6(1),v.hij("Challan-",e+1," ")}}function Re(e,t){if(1&e&&(v.TgZ(0,"ion-col",219),v.YNc(1,Ve,2,2,"a",220),v._UZ(2,"br"),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(1),v.Q6J("ngForOf",e.UpI)}}function Qe(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"a",222),v.NdJ("clickAllowed",function(){v.CHM(e);const t=v.oxw().$implicit;return v.oxw(2).openChallanpopup(t.UIDN)}),v._UZ(1,"ion-icon",223),v.qZA()}if(2&e){const e=v.oxw(3);v.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}const Fe=function(){return[]};function He(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"ion-card"),v.TgZ(1,"ion-row"),v.YNc(2,be,4,1,"ion-col",202),v.YNc(3,Ce,4,1,"ion-col",202),v.YNc(4,qe,4,1,"ion-col",202),v.YNc(5,Se,4,1,"ion-col",202),v.TgZ(6,"ion-col",203),v.YNc(7,Me,2,0,"span",175),v.YNc(8,ye,2,0,"span",176),v.qZA(),v.qZA(),v.TgZ(9,"ion-row"),v.TgZ(10,"ion-col"),v._UZ(11,"dateformatter",172),v.qZA(),v.TgZ(12,"ion-col",204),v._uU(13),v.qZA(),v.TgZ(14,"ion-col",204),v._uU(15),v.qZA(),v.YNc(16,Ne,3,3,"ion-col",205),v.qZA(),v.TgZ(17,"ion-row"),v.YNc(18,De,4,1,"ion-col",202),v.YNc(19,_e,4,1,"ion-col",202),v.YNc(20,Ue,4,1,"ion-col",206),v.qZA(),v.TgZ(21,"ion-row"),v.YNc(22,ke,4,1,"ion-col",207),v.YNc(23,Je,3,0,"ion-col",208),v.YNc(24,Re,3,1,"ion-col",209),v.TgZ(25,"ion-col",210),v.YNc(26,Qe,2,2,"a",211),v.TgZ(27,"a",212),v.NdJ("clickAllowed",function(){const t=v.CHM(e).$implicit;return v.oxw(2).challanService.delete(t.UIDN)}),v._UZ(28,"ion-icon",213),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=t.$implicit,i=v.oxw(2);v.xp6(2),v.Q6J("ngIf",null!=e.SrNo),v.xp6(1),v.Q6J("ngIf",null!=e.CN),v.xp6(1),v.Q6J("ngIf",null!=e.UsrNm),v.xp6(1),v.Q6J("ngIf",null!=e.LdNm),v.xp6(2),v.Q6J("ngIf",1==e.IsBd),v.xp6(1),v.Q6J("ngIf",0==e.IsBd),v.xp6(3),v.s9C("dateValue",e.MtD),v.xp6(2),v.hij(" QTY: ",e.Qty," "),v.xp6(2),v.hij(" Rate: ",e.UA," "),v.xp6(1),v.Q6J("ngIf",null!=e.TA),v.xp6(2),v.Q6J("ngIf",null!=e.StNm),v.xp6(1),v.Q6J("ngIf",null!=e.Narr),v.xp6(1),v.Q6J("ngIf",null!=e.TNm),v.xp6(2),v.Q6J("ngIf",null!=e.InvNm),v.xp6(1),v.Q6J("ngIf",0==e.IsBd),v.xp6(1),v.Q6J("ngIf",e.UpI!=v.DdM(19,Fe)),v.xp6(2),v.Q6J("ngIf",!e.IsBd),v.xp6(1),v.Q6J("SignupId",i.SignupId)("UserId",i.UserId)}}function Ee(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",164),v.TgZ(1,"ion-content"),v.TgZ(2,"ion-refresher",194),v.NdJ("ionRefresh",function(t){return v.CHM(e),v.oxw().doRefresh(t)}),v._UZ(3,"ion-refresher-content",195),v.qZA(),v.TgZ(4,"ion-virtual-scroll",196,197),v.YNc(6,He,29,20,"ion-card",198),v.qZA(),v.TgZ(7,"ion-infinite-scroll",199,200),v.NdJ("ionInfinite",function(t){return v.CHM(e),v.oxw().onChallanScroll(t)}),v._UZ(9,"ion-infinite-scroll-content",201),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw();v.Udp("height",e.challanService.mobileContainer),v.xp6(4),v.Q6J("items",e.challanService.result),v.xp6(5),v.s9C("loadingText",e.challanService.nextloading)}}function Oe(e,t){1&e&&(v.TgZ(0,"ion-card",225),v.TgZ(1,"ion-row"),v.TgZ(2,"ion-col"),v._UZ(3,"ion-skeleton-text",226),v.qZA(),v.TgZ(4,"ion-col",227),v._UZ(5,"ion-skeleton-text",228),v.qZA(),v.qZA(),v.TgZ(6,"ion-row"),v.TgZ(7,"ion-col"),v._UZ(8,"ion-skeleton-text",229),v.qZA(),v.TgZ(9,"ion-col",227),v._UZ(10,"ion-skeleton-text",230),v.qZA(),v.qZA(),v.TgZ(11,"ion-row"),v.TgZ(12,"ion-col"),v._UZ(13,"ion-skeleton-text",226),v.qZA(),v.TgZ(14,"ion-col",227),v._UZ(15,"ion-skeleton-text",228),v.qZA(),v.qZA(),v.TgZ(16,"ion-row"),v.TgZ(17,"ion-col"),v._UZ(18,"ion-skeleton-text",229),v.qZA(),v.TgZ(19,"ion-col"),v._UZ(20,"ion-skeleton-text",229),v.qZA(),v.TgZ(21,"ion-col"),v._UZ(22,"ion-skeleton-text",231),v.qZA(),v.TgZ(23,"ion-col",227),v._UZ(24,"ion-skeleton-text",232),v.qZA(),v.qZA(),v.qZA())}function Pe(e,t){if(1&e&&(v.TgZ(0,"div"),v.YNc(1,Oe,25,0,"ion-card",224),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.Q6J("ngForOf",e.challanService.noImageRepeat)}}function $e(e,t){1&e&&(v.TgZ(0,"tr"),v.TgZ(1,"td",234),v._UZ(2,"ion-skeleton-text",228),v.qZA(),v.TgZ(3,"td"),v._UZ(4,"ion-skeleton-text",226),v.qZA(),v.TgZ(5,"td"),v._UZ(6,"ion-skeleton-text",226),v.qZA(),v.TgZ(7,"td"),v._UZ(8,"ion-skeleton-text",226),v.qZA(),v.TgZ(9,"td"),v._UZ(10,"ion-skeleton-text",226),v.qZA(),v.TgZ(11,"td"),v._UZ(12,"ion-skeleton-text",226),v.qZA(),v.TgZ(13,"td"),v._UZ(14,"ion-skeleton-text",226),v.qZA(),v.TgZ(15,"td"),v._UZ(16,"ion-skeleton-text",226),v.qZA(),v.TgZ(17,"td"),v._UZ(18,"ion-skeleton-text",226),v.qZA(),v.TgZ(19,"td"),v._UZ(20,"ion-skeleton-text",226),v.qZA(),v.TgZ(21,"td"),v._UZ(22,"ion-skeleton-text",226),v.qZA(),v.TgZ(23,"td",235),v._UZ(24,"ion-skeleton-text",226),v.qZA(),v.TgZ(25,"td"),v._UZ(26,"ion-skeleton-text",226),v.qZA(),v.TgZ(27,"td"),v._UZ(28,"ion-skeleton-text",226),v.qZA(),v.TgZ(29,"td"),v._UZ(30,"ion-skeleton-text",226),v.qZA(),v.qZA())}function Ge(e,t){if(1&e&&(v.TgZ(0,"div"),v.TgZ(1,"table",233),v.TgZ(2,"thead",151),v.TgZ(3,"tr"),v.TgZ(4,"th",234),v._UZ(5,"ion-skeleton-text",228),v.qZA(),v.TgZ(6,"th"),v._UZ(7,"ion-skeleton-text",226),v.qZA(),v.TgZ(8,"th"),v._UZ(9,"ion-skeleton-text",226),v.qZA(),v.TgZ(10,"th"),v._UZ(11,"ion-skeleton-text",226),v.qZA(),v.TgZ(12,"th"),v._UZ(13,"ion-skeleton-text",226),v.qZA(),v.TgZ(14,"th"),v._UZ(15,"ion-skeleton-text",226),v.qZA(),v.TgZ(16,"th"),v._UZ(17,"ion-skeleton-text",226),v.qZA(),v.TgZ(18,"th"),v._UZ(19,"ion-skeleton-text",226),v.qZA(),v.TgZ(20,"th"),v._UZ(21,"ion-skeleton-text",226),v.qZA(),v.TgZ(22,"th"),v._UZ(23,"ion-skeleton-text",226),v.qZA(),v.TgZ(24,"th"),v._UZ(25,"ion-skeleton-text",226),v.qZA(),v.TgZ(26,"th",235),v._UZ(27,"ion-skeleton-text",226),v.qZA(),v.TgZ(28,"th"),v._UZ(29,"ion-skeleton-text",226),v.qZA(),v.TgZ(30,"th"),v._UZ(31,"ion-skeleton-text",226),v.qZA(),v.TgZ(32,"th"),v._UZ(33,"ion-skeleton-text",226),v.qZA(),v.qZA(),v.qZA(),v.TgZ(34,"tbody",164),v.YNc(35,$e,31,0,"tr",187),v.qZA(),v.qZA(),v.qZA()),2&e){const e=v.oxw();v.xp6(35),v.Q6J("ngForOf",e.challanService.noImageRepeat)}}function Be(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div"),v._UZ(1,"div",237),v._UZ(2,"br"),v.TgZ(3,"div",238),v._uU(4,"Add your first record by clicking in below button. "),v._UZ(5,"br"),v._UZ(6,"br"),v.TgZ(7,"input",239),v.NdJ("clickAllowed",function(){return v.CHM(e),v.oxw(2).openChallanpopup("add")}),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(2);v.xp6(7),v.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Ye(e,t){if(1&e&&(v.TgZ(0,"div",236),v._UZ(1,"br"),v._UZ(2,"br"),v.YNc(3,Be,8,2,"div",13),v._UZ(4,"br"),v._UZ(5,"br"),v.qZA()),2&e){const e=v.oxw();v.xp6(3),v.Q6J("ngIf",e.noDataImage)}}function je(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"app-challan-addedit",240),v.NdJ("ChallanredirectAction",function(t){return v.CHM(e),v.oxw().onChallanSubmit(t)}),v.qZA()}if(2&e){const e=v.oxw();v.Q6J("ChallanredirectOnCancel",!1)("ChallanId",e.ChallanId)}}function Ke(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"Purchase Ledger is required"),v.qZA())}function ze(e,t){if(1&e&&(v.TgZ(0,"div",270),v.YNc(1,Ke,2,0,"div",13),v.qZA()),2&e){v.oxw();const e=v.MAs(21);v.xp6(1),v.Q6J("ngIf",e.errors.required)}}function We(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"Date is required"),v.qZA())}function Xe(e,t){if(1&e&&(v.TgZ(0,"div",270),v.YNc(1,We,2,0,"div",13),v.qZA()),2&e){v.oxw();const e=v.MAs(32);v.xp6(1),v.Q6J("ngIf",e.errors.required)}}function et(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"Quantity is required"),v.qZA())}function tt(e,t){if(1&e&&(v.TgZ(0,"div",270),v.YNc(1,et,2,0,"div",13),v.TgZ(2,"div",277),v._uU(3," Quantity should contain only numbers "),v.qZA(),v.qZA()),2&e){v.oxw();const e=v.MAs(3);v.xp6(1),v.Q6J("ngIf",e.errors.required),v.xp6(1),v.Q6J("hidden",!e.hasError("pattern"))}}function it(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"Unit price is required"),v.qZA())}function nt(e,t){if(1&e&&(v.TgZ(0,"div",270),v.YNc(1,it,2,0,"div",13),v.TgZ(2,"div",277),v._uU(3," Unit price should contain only numbers "),v.qZA(),v.qZA()),2&e){v.oxw();const e=v.MAs(7);v.xp6(1),v.Q6J("ngIf",e.errors.required),v.xp6(1),v.Q6J("hidden",!e.hasError("pattern"))}}function rt(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1," Total amount is required "),v.qZA())}function ot(e,t){if(1&e&&(v.TgZ(0,"div",270),v.YNc(1,rt,2,0,"div",13),v.TgZ(2,"div",277),v._uU(3," Total amount should contain only numbers "),v.qZA(),v.qZA()),2&e){v.oxw();const e=v.MAs(11);v.xp6(1),v.Q6J("ngIf",e.errors.required),v.xp6(1),v.Q6J("hidden",!e.hasError("pattern"))}}const at=function(e){return{"is-invalid":e}};function lt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"tr",264),v.TgZ(1,"td",265),v.TgZ(2,"input",271,272),v.NdJ("change",function(){const t=v.CHM(e).$implicit,i=v.oxw(2);return i.calculationPurchase(),i.calculateTotal(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.InvQty=t}),v.qZA(),v.YNc(4,tt,4,2,"div",255),v.qZA(),v.TgZ(5,"td",266),v.TgZ(6,"input",273,274),v.NdJ("change",function(){const t=v.CHM(e).$implicit,i=v.oxw(2);return i.calculationPurchase(),i.calculateTotal(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.InvRt=t}),v.qZA(),v.YNc(8,nt,4,2,"div",255),v.qZA(),v.TgZ(9,"td",266),v.TgZ(10,"input",275,276),v.NdJ("change",function(){return v.CHM(e),v.oxw(2).calculationPurchase()})("ngModelChange",function(t){return v.CHM(e).$implicit.TtlAmt=t}),v.qZA(),v.YNc(12,ot,4,2,"div",255),v.qZA(),v.qZA()}if(2&e){const e=t.$implicit,i=t.index,n=v.MAs(3),r=v.MAs(7),o=v.MAs(11);v.oxw();const a=v.MAs(15);v.xp6(2),v.MGl("name","qty__",i,""),v.Q6J("ngClass",v.VKq(12,at,a.submitted&&n.invalid))("ngModel",e.InvQty),v.xp6(2),v.Q6J("ngIf",a.submitted&&n.invalid),v.xp6(2),v.MGl("name","UA__",i,""),v.Q6J("ngClass",v.VKq(14,at,a.submitted&&r.invalid))("ngModel",e.InvRt),v.xp6(2),v.Q6J("ngIf",a.submitted&&r.invalid),v.xp6(2),v.MGl("name","TA__",i,""),v.Q6J("ngClass",v.VKq(16,at,a.submitted&&o.invalid))("ngModel",e.TtlAmt),v.xp6(2),v.Q6J("ngIf",a.submitted&&o.invalid)}}function st(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",241),v.TgZ(1,"div",242),v.TgZ(2,"div",41),v.TgZ(3,"h4",243),v._uU(4,"Generate Bill"),v.qZA(),v.TgZ(5,"h4",244),v._uU(6),v.qZA(),v.TgZ(7,"button",43),v.NdJ("click",function(){return v.CHM(e),v.oxw(),v.MAs(39).hide()}),v.TgZ(8,"span",44),v._uU(9,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(10,"div",83),v.TgZ(11,"div",245),v.TgZ(12,"div",246),v.TgZ(13,"div",247),v.TgZ(14,"form",248,249),v.NdJ("ngSubmit",function(){v.CHM(e);const t=v.MAs(15),i=v.oxw();return t.form.valid&&i.onGenerateBill()}),v.TgZ(16,"div",250),v.TgZ(17,"div",251),v.TgZ(18,"label",252),v._uU(19,"Select Purchase Account"),v.qZA(),v.TgZ(20,"ng-select",253,254),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw().purLedger=t}),v.qZA(),v.YNc(22,ze,2,1,"div",255),v.qZA(),v.TgZ(23,"div",251),v.TgZ(24,"label",256),v._uU(25,"Select Tax Account"),v.qZA(),v.TgZ(26,"ng-select",257,258),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw().TaxLed=t})("change",function(){return v.CHM(e),v.oxw().calculationPurchase()}),v.qZA(),v.qZA(),v.TgZ(28,"div",251),v.TgZ(29,"label",259),v._uU(30,"Purchase Date"),v.qZA(),v.TgZ(31,"input",260,261),v.NdJ("selected",function(t){return v.CHM(e),v.oxw().onDateSelect(t)}),v.qZA(),v.YNc(33,Xe,2,1,"div",255),v.qZA(),v.TgZ(34,"div",262),v.TgZ(35,"table",263),v.TgZ(36,"thead"),v.TgZ(37,"tr",264),v.TgZ(38,"th",265),v._uU(39,"Qty"),v.qZA(),v.TgZ(40,"th",266),v._uU(41,"Rate/Unit"),v.qZA(),v.TgZ(42,"th",266),v._uU(43,"Total"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(44,"tbody"),v.YNc(45,lt,13,18,"tr",267),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(46,"div",268),v.TgZ(47,"a",269),v.NdJ("click",function(){v.CHM(e);const t=v.oxw();return v.MAs(39).hide(),t.cleardata()}),v._uU(48,"Cancel"),v.qZA(),v.TgZ(49,"button",93),v._uU(50," Generate Bill "),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.MAs(15),t=v.MAs(21),i=v.MAs(32),n=v.oxw();v.xp6(6),v.hij("Total: ",n.totamount,""),v.xp6(14),v.Q6J("virtualScroll",!0)("ngClass",v.VKq(14,at,e.submitted&&t.invalid))("items",n.purchaseLedger)("ngModel",n.purLedger)("loading",n.ledgerService.loading),v.xp6(2),v.Q6J("ngIf",e.submitted&&t.invalid),v.xp6(4),v.Q6J("items",n.TaxLedger)("ngModel",n.TaxLed)("loading",n.ledgerService.loading),v.xp6(5),v.Q6J("startDate",n.VDt)("ngClass",v.VKq(16,at,e.submitted&&i.invalid)),v.xp6(2),v.Q6J("ngIf",i.invalid),v.xp6(12),v.Q6J("ngForOf",n.selectedchns)}}function ct(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"Purchase Ledger is required"),v.qZA())}function dt(e,t){if(1&e&&(v.TgZ(0,"div",270),v.YNc(1,ct,2,0,"div",13),v.qZA()),2&e){v.oxw();const e=v.MAs(19);v.xp6(1),v.Q6J("ngIf",e.errors.required)}}function ut(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"Date is required"),v.qZA())}function gt(e,t){if(1&e&&(v.TgZ(0,"div",270),v.YNc(1,ut,2,0,"div",13),v.qZA()),2&e){v.oxw();const e=v.MAs(30);v.xp6(1),v.Q6J("ngIf",e.errors.required)}}function ht(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"Quantity is required"),v.qZA())}function pt(e,t){if(1&e&&(v.TgZ(0,"div",270),v.YNc(1,ht,2,0,"div",13),v.TgZ(2,"div",277),v._uU(3," Quantity should contain only numbers "),v.qZA(),v.qZA()),2&e){v.oxw();const e=v.MAs(5);v.xp6(1),v.Q6J("ngIf",e.errors.required),v.xp6(1),v.Q6J("hidden",!e.hasError("pattern"))}}function ft(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"Unit price is required"),v.qZA())}function mt(e,t){if(1&e&&(v.TgZ(0,"div",270),v.YNc(1,ft,2,0,"div",13),v.TgZ(2,"div",277),v._uU(3," Unit price should contain only numbers "),v.qZA(),v.qZA()),2&e){v.oxw();const e=v.MAs(9);v.xp6(1),v.Q6J("ngIf",e.errors.required),v.xp6(1),v.Q6J("hidden",!e.hasError("pattern"))}}function Zt(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1," Total amount is required "),v.qZA())}function Tt(e,t){if(1&e&&(v.TgZ(0,"div",270),v.YNc(1,Zt,2,0,"div",13),v.TgZ(2,"div",277),v._uU(3," Total amount should contain only numbers "),v.qZA(),v.qZA()),2&e){v.oxw();const e=v.MAs(13);v.xp6(1),v.Q6J("ngIf",e.errors.required),v.xp6(1),v.Q6J("hidden",!e.hasError("pattern"))}}function At(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"tr",264),v.TgZ(1,"td",283),v._uU(2),v.qZA(),v.TgZ(3,"td",281),v.TgZ(4,"input",271,272),v.NdJ("change",function(){const t=v.CHM(e).$implicit,i=v.oxw(2);return i.calculationPurchase(),i.calculateTotal(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.Qty=t}),v.qZA(),v.YNc(6,pt,4,2,"div",255),v.qZA(),v.TgZ(7,"td",282),v.TgZ(8,"input",273,274),v.NdJ("change",function(){const t=v.CHM(e).$implicit,i=v.oxw(2);return i.calculationPurchase(),i.calculateTotal(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.UA=t}),v.qZA(),v.YNc(10,mt,4,2,"div",255),v.qZA(),v.TgZ(11,"td",282),v.TgZ(12,"input",275,276),v.NdJ("change",function(){return v.CHM(e),v.oxw(2).calculationPurchase()})("ngModelChange",function(t){return v.CHM(e).$implicit.TA=t}),v.qZA(),v.YNc(14,Tt,4,2,"div",255),v.qZA(),v.qZA()}if(2&e){const e=t.$implicit,i=t.index,n=v.MAs(5),r=v.MAs(9),o=v.MAs(13);v.oxw();const a=v.MAs(11);v.xp6(2),v.Oqu(e.CN),v.xp6(2),v.MGl("name","qty__",i,""),v.Q6J("ngClass",v.VKq(13,at,a.submitted&&n.invalid))("ngModel",e.Qty),v.xp6(2),v.Q6J("ngIf",a.submitted&&n.invalid),v.xp6(2),v.MGl("name","UA__",i,""),v.Q6J("ngClass",v.VKq(15,at,a.submitted&&r.invalid))("ngModel",e.UA),v.xp6(2),v.Q6J("ngIf",a.submitted&&r.invalid),v.xp6(2),v.MGl("name","TA__",i,""),v.Q6J("ngClass",v.VKq(17,at,a.submitted&&o.invalid))("ngModel",e.TA),v.xp6(2),v.Q6J("ngIf",a.submitted&&o.invalid)}}function vt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",39),v.TgZ(1,"div",278),v.TgZ(2,"div",41),v.TgZ(3,"h4",243),v._uU(4,"Generate Bill"),v.qZA(),v.TgZ(5,"h4",244),v._uU(6),v.qZA(),v.TgZ(7,"button",43),v.NdJ("click",function(){return v.CHM(e),v.oxw(),v.MAs(42).hide()}),v.TgZ(8,"span",44),v._uU(9,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(10,"form",248,249),v.NdJ("ngSubmit",function(){v.CHM(e);const t=v.MAs(11),i=v.oxw();return t.form.valid&&i.onGenerateBill()}),v.TgZ(12,"div",279),v.TgZ(13,"div",143),v.TgZ(14,"div",143),v.TgZ(15,"div",280),v.TgZ(16,"label",252),v._uU(17,"Select Purchase Account"),v.qZA(),v.TgZ(18,"ng-select",253,254),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw().purLedger=t}),v.qZA(),v.YNc(20,dt,2,1,"div",255),v.qZA(),v.TgZ(21,"div",280),v.TgZ(22,"label",256),v._uU(23,"Select Tax Account"),v.qZA(),v.TgZ(24,"ng-select",257,258),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw().TaxLed=t})("change",function(){return v.CHM(e),v.oxw().calculationPurchase()}),v.qZA(),v.qZA(),v.TgZ(26,"div",280),v.TgZ(27,"label",259),v._uU(28,"Purchase Date"),v.qZA(),v.TgZ(29,"input",260,261),v.NdJ("selected",function(t){return v.CHM(e),v.oxw().onDateSelect(t)}),v.qZA(),v.YNc(31,gt,2,1,"div",255),v.qZA(),v.TgZ(32,"div",262),v.TgZ(33,"table",263),v.TgZ(34,"thead"),v.TgZ(35,"tr",264),v.TgZ(36,"th",281),v._uU(37,"#No"),v.qZA(),v.TgZ(38,"th",281),v._uU(39,"Qty"),v.qZA(),v.TgZ(40,"th",282),v._uU(41,"Rate/Unit"),v.qZA(),v.TgZ(42,"th",282),v._uU(43,"Total"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(44,"tbody"),v.YNc(45,At,15,19,"tr",267),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(46,"nav",70),v.TgZ(47,"ul",71),v.TgZ(48,"li",72),v.TgZ(49,"button",94),v.NdJ("click",function(){v.CHM(e);const t=v.oxw();return v.MAs(42).hide(),t.cleardata()}),v._uU(50,"Close"),v.qZA(),v.qZA(),v.TgZ(51,"li",75),v.TgZ(52,"button",93),v._uU(53,"Generate Bill"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.MAs(11),t=v.MAs(19),i=v.MAs(30),n=v.oxw();v.xp6(6),v.hij("Total: ",n.totamount,""),v.xp6(12),v.Q6J("virtualScroll",!0)("ngClass",v.VKq(14,at,e.submitted&&t.invalid))("items",n.purchaseLedger)("ngModel",n.purLedger)("loading",n.ledgerService.loading),v.xp6(2),v.Q6J("ngIf",e.submitted&&t.invalid),v.xp6(4),v.Q6J("items",n.TaxLedger)("ngModel",n.TaxLed)("loading",n.ledgerService.loading),v.xp6(5),v.Q6J("startDate",n.VDt)("ngClass",v.VKq(16,at,e.submitted&&i.invalid)),v.xp6(2),v.Q6J("ngIf",i.invalid),v.xp6(14),v.Q6J("ngForOf",n.selectedchalans)}}function xt(e,t){if(1&e&&v._UZ(0,"app-ledgerhistory",284),2&e){const e=v.oxw();v.Q6J("LedgId",e._LedgerId)("IsCallasPopup",!0)}}function It(e,t){if(1&e&&(v.TgZ(0,"small",128),v._uU(1),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.AsE(" Loaded ",e.ledgerService.result.length," of ",e.ledgerService.totalItems," ")}}function Lt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"a"),v._uU(1),v.qZA(),v.TgZ(2,"a",126),v.TgZ(3,"i",127),v.NdJ("click",function(){const t=v.CHM(e).item;return v.oxw().OpenLedgerHistoryPopUp(t.UIDN)}),v.qZA(),v.qZA()}if(2&e){const e=t.item;v.xp6(1),v.Oqu(e.LN)}}function wt(e,t){if(1&e&&(v.TgZ(0,"small",128),v._uU(1),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.AsE(" Loaded ",e.siteService.result.length," of ",e.siteService.totalItems," ")}}function bt(e,t){if(1&e&&(v.TgZ(0,"small",128),v._uU(1),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.AsE(" Loaded ",e.inventoryService.result.length," of ",e.inventoryService.totalItems," ")}}function Ct(e,t){if(1&e&&(v.TgZ(0,"small",128),v._uU(1),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.AsE(" Loaded ",e.taskService.result.length," of ",e.taskService.totalItems," ")}}function qt(e,t){if(1&e&&(v.TgZ(0,"small",128),v._uU(1),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.AsE(" Loaded ",e.subtaskService.result.length," of ",e.subtaskService.totalItems," ")}}function St(e,t){1&e&&(v.TgZ(0,"thead",151),v.TgZ(1,"tr"),v.TgZ(2,"th",291),v._uU(3,"Comments"),v.qZA(),v.TgZ(4,"th",292),v._uU(5,"Challan No"),v.qZA(),v.TgZ(6,"th",292),v._uU(7,"Challan Sr No"),v.qZA(),v.TgZ(8,"th",292),v._uU(9,"Challan Date"),v.qZA(),v.TgZ(10,"th",292),v._uU(11,"Task Name"),v.qZA(),v.TgZ(12,"th",292),v._uU(13,"Sub Task Name"),v.qZA(),v.TgZ(14,"th",293),v._uU(15,"Inventory Name"),v.qZA(),v.TgZ(16,"th",292),v._uU(17,"Site Name"),v.qZA(),v.TgZ(18,"th",292),v._uU(19,"Unit Name"),v.qZA(),v.TgZ(20,"th",293),v._uU(21,"Ledger Name"),v.qZA(),v.TgZ(22,"th",293),v._uU(23,"Tax Account"),v.qZA(),v.TgZ(24,"th",292),v._uU(25,"Length"),v.qZA(),v.TgZ(26,"th",292),v._uU(27,"Height"),v.qZA(),v.TgZ(28,"th",292),v._uU(29,"Width"),v.qZA(),v.TgZ(30,"th",292),v._uU(31,"Rate/Unit"),v.qZA(),v.TgZ(32,"th",292),v._uU(33,"Quantity"),v.qZA(),v.TgZ(34,"th",292),v._uU(35,"Total Amount"),v.qZA(),v.TgZ(36,"th",292),v._uU(37,"Vehicle No"),v.qZA(),v.TgZ(38,"th",292),v._uU(39,"Narration"),v.qZA(),v.qZA(),v.qZA())}function Mt(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"tr"),v.TgZ(2,"td",294),v._uU(3),v.qZA(),v.TgZ(4,"td"),v.TgZ(5,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.ChallanName=t}),v.qZA(),v.qZA(),v.TgZ(6,"td"),v.TgZ(7,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.ChallanSrNo=t}),v.qZA(),v.qZA(),v.TgZ(8,"td"),v.TgZ(9,"input",296,297),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("selected",function(t){const i=v.CHM(e),n=i.index,r=i.$implicit;return v.oxw(2).ChnDtSelect(t,n,r)}),v.qZA(),v.qZA(),v.TgZ(11,"td"),v.TgZ(12,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.TaskName=t}),v.qZA(),v.qZA(),v.TgZ(13,"td"),v.TgZ(14,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.SubTaskName=t}),v.qZA(),v.qZA(),v.TgZ(15,"td"),v.TgZ(16,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.InventoryName=t}),v.qZA(),v.qZA(),v.TgZ(17,"td"),v.TgZ(18,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.SiteName=t}),v.qZA(),v.qZA(),v.TgZ(19,"td"),v.TgZ(20,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.UnitName=t}),v.qZA(),v.qZA(),v.TgZ(21,"td"),v.TgZ(22,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.LedgerName=t}),v.qZA(),v.qZA(),v.TgZ(23,"td"),v.TgZ(24,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.TaxAcName=t}),v.qZA(),v.qZA(),v.TgZ(25,"td"),v.TgZ(26,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.Length=t}),v.qZA(),v.qZA(),v.TgZ(27,"td"),v.TgZ(28,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.Height=t}),v.qZA(),v.qZA(),v.TgZ(29,"td"),v.TgZ(30,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.Width=t}),v.qZA(),v.qZA(),v.TgZ(31,"td"),v.TgZ(32,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.RateOrUnit=t}),v.qZA(),v.qZA(),v.TgZ(33,"td"),v.TgZ(34,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.Quantity=t}),v.qZA(),v.qZA(),v.TgZ(35,"td"),v.TgZ(36,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.TotalAmount=t}),v.qZA(),v.qZA(),v.TgZ(37,"td"),v.TgZ(38,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.VehicleNo=t}),v.qZA(),v.qZA(),v.TgZ(39,"td"),v.TgZ(40,"input",295),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.Narration=t}),v.qZA(),v.qZA(),v.qZA(),v.BQk()}if(2&e){const e=t.$implicit,i=t.index;v.xp6(1),v.ekj("negative",e.invalidProp)("positive",e.RepeatContactProp),v.xp6(2),v.hij(" ",e.comments," "),v.xp6(2),v.MGl("name","ChallanNo_",i,""),v.MGl("id","ChallanNo_",i,""),v.Q6J("ngModel",e.ChallanName),v.xp6(2),v.MGl("name","ChallanSrNo_",i,""),v.MGl("id","ChallanSrNo_",i,""),v.Q6J("ngModel",e.ChallanSrNo),v.xp6(2),v.MGl("name","ChallanDate_",i,""),v.MGl("id","ChallanDate_",i,""),v.Q6J("startDate",e.ChallanDate),v.xp6(3),v.MGl("name","TaskName_",i,""),v.MGl("id","TaskName_",i,""),v.Q6J("ngModel",e.TaskName),v.xp6(2),v.MGl("name","SubTaskName_",i,""),v.MGl("id","SubTaskName_",i,""),v.Q6J("ngModel",e.SubTaskName),v.xp6(2),v.MGl("name","InventoryName_",i,""),v.MGl("id","InventoryName_",i,""),v.Q6J("ngModel",e.InventoryName),v.xp6(2),v.MGl("name","SiteName_",i,""),v.MGl("id","SiteName_",i,""),v.Q6J("ngModel",e.SiteName),v.xp6(2),v.MGl("name","UnitName_",i,""),v.MGl("id","UnitName_",i,""),v.Q6J("ngModel",e.UnitName),v.xp6(2),v.MGl("name","LedgerName_",i,""),v.MGl("id","LedgerName_",i,""),v.Q6J("ngModel",e.LedgerName),v.xp6(2),v.MGl("name","TaxAcName_",i,""),v.MGl("id","TaxAcName_",i,""),v.Q6J("ngModel",e.TaxAcName),v.xp6(2),v.MGl("name","Length_",i,""),v.MGl("id","Length_",i,""),v.Q6J("ngModel",e.Length),v.xp6(2),v.MGl("name","Height_",i,""),v.MGl("id","Height_",i,""),v.Q6J("ngModel",e.Height),v.xp6(2),v.MGl("name","Width_",i,""),v.MGl("id","Width_",i,""),v.Q6J("ngModel",e.Width),v.xp6(2),v.MGl("name","RateOrUnit_",i,""),v.MGl("id","RateOrUnit_",i,""),v.Q6J("ngModel",e.RateOrUnit),v.xp6(2),v.MGl("name","Quantity_",i,""),v.MGl("id","Quantity_",i,""),v.Q6J("ngModel",e.Quantity),v.xp6(2),v.MGl("name","TotalAmount_",i,""),v.MGl("id","TotalAmount_",i,""),v.Q6J("ngModel",e.TotalAmount),v.xp6(2),v.MGl("name","VehicleNo_",i,""),v.MGl("id","VehicleNo_",i,""),v.Q6J("ngModel",e.VehicleNo),v.xp6(2),v.MGl("name","Narration_",i,""),v.MGl("id","Narration_",i,""),v.Q6J("ngModel",e.Narration)}}function yt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",285),v.TgZ(1,"virtual-scroller",286,287),v.NdJ("vsUpdate",function(){return v.CHM(e),v.oxw().changeDetectorRef.detectChanges()}),v.TgZ(3,"table",288),v.YNc(4,St,40,0,"thead",289),v.TgZ(5,"tbody",164,165),v.YNc(7,Mt,41,59,"ng-container",290),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.MAs(2),t=v.oxw(),i=v.MAs(145);v.xp6(1),v.Q6J("executeRefreshOutsideAngularZone",!0)("items",t.importeddataAPI)("parentScroll",i),v.xp6(3),v.Q6J("ngIf",t.importeddataAPI.length>0),v.xp6(3),v.Q6J("ngForOf",e.viewPortItems)("ngForTrackBy",t.ImportTrackByFunction)}}let Nt=(()=>{class e{constructor(e,t,i,n,r,o,a,l,s,c,d,u,g,h,p){this.challanService=e,this.filterService=t,this.popoverController=i,this.route=n,this.page=r,this.inventoryService=o,this.taskService=a,this.subtaskService=l,this.siteService=s,this.ledgerService=c,this.router=d,this.changeDetectorRef=u,this.location=g,this.accountService=h,this.alert=p,this.noDataImage=!1,this.Sbtaskselector=[],this.Taskselector=[],this.Invselector=[],this.Siteselector=[],this.Ledgerselector=[],this.importeddataAPI=[],this.inValidEntry=[],this.isSubmited=!1,this.isBusy=!0,this._sgId=0,this.popupwindow="",this.isList=!0,this.isChallanPending=!0,this.isScrollEnabled=!0,this.ChallanLedger=[],this.searchLedger=null,this.showChallanModal=!1,this.showLedgHistory=!1,this.showNestedTable=[],this.ChallanId="",this.status={isOpen:!1},this.selectedchns=[],this.selectedchalans=[],this.showBillModal=!1,this.TaxLedger=[],this.purchaseLedger=[],this.totamount=0,this._LedgerId=0,this.currentScrollPosition=0,this.chalanFilter=new f.yz,this.selectedAll=!1,this.httpfunction=new m.r,this.sortarray=[{order:this.challanService.sortorder,column:"ChallanNo",title:"By Challan No"},{order:this.challanService.sortorder,column:"MaterialDate",title:"By Date"},{order:this.challanService.sortorder,column:"TaskName",title:"By Task Name"},{order:this.challanService.sortorder,column:"Name",title:"By Inventory Name"},{order:this.challanService.sortorder,column:"LedgerName",title:"By Ledger Name"},{order:this.challanService.sortorder,column:"SiteName",title:"By Site Name"},{order:this.challanService.sortorder,column:"TotalAmount",title:"By Total Amount"},{order:this.challanService.sortorder,column:"IsBilled",title:"By Bill Status"}],this.SignupId=this.challanService.getSignupId,this.UserId=this.challanService.GetUserId,this.isList=!0,this.challanService.ExportColumn=[{title:"CNo",dataKey:"CN",size:40},{title:"Task",dataKey:"TNm",size:100},{title:"Sub Task",dataKey:"SbTNm",size:80},{title:"Inventory",dataKey:"InvNm",size:100},{title:"Unit",dataKey:"UntNm",size:80},{title:"Ledger",dataKey:"LdNm",size:120},{title:"Site",dataKey:"StNm",size:100},{title:"Qty",dataKey:"Qty",size:40},{title:"Amount",dataKey:"UA",size:50},{title:"Total Amount",dataKey:"TA",size:50},{title:"Narration",dataKey:"Narr",size:150}],this.challanService.Orientationtype=1,this.challanService.ExportName="Challan_List",this.challanService.ExportCompanyName=this.challanService.getCompanyData.CN}onPopState(e){this.isList||(this.isList=!this.isList),this.showChallanModal?this.showChallanModal=!this.showChallanModal:this.showLedgHistory&&(this.showLedgHistory=!this.showLedgHistory)}onLedgHistoryScroll(){0==this.showLedgHistory&&this.challanService.ScrollDown(),0==this.showChallanModal&&this.challanService.ScrollDown()}doRefresh(e){this.filterService.updatedata(!0,"Challan List"),this.challanService.refreshEvent=e.target,this.FilterData()}ngOnInit(){setTimeout(()=>{this.challanService.arrowDownEvent(150==this.challanService.selectedRowIndex||0==this.challanService.selectedRowIndex?150:this.challanService.selectedRowIndex)},500),setTimeout(()=>{this.filterService.changeFilter(!0,!0,"Challan List"),null!=this.serachcontrol&&this.serachcontrol.focus()},200),this.SignupId=this.challanService.getSignupId,this.UserId=this.challanService.GetUserId,this.route.params.subscribe(e=>{null!=e.label&&(this.isChallanPending="Billed"!=e.label)});let e={LedgerId:0};e.IsPending=this.isChallanPending,this.challanService.filterArg=e,this.challanService.GetAlldata(),this.challanService.refreshEvent=null,this.challanService.isGetSubscribe=!0,this.challanSubscription=this.challanService.resultObs.subscribe(()=>{setTimeout(()=>{document.scrollingElement.scrollTop=scrollposition,this.challanService.arrowDownEvent(this.challanService.selectedRowIndex),scrollposition=0},250),1==this.isBusy&&(this.isBusy=!1),0==this.challanService.result.length&&(this.noDataImage=!0)}),0==this.inventoryService.result.length&&this.inventoryService.GetAlldata(),0==this.taskService.result.length&&this.taskService.GetAlldata(),0==this.subtaskService.result.length&&this.subtaskService.GetAlldata(),0==this.siteService.result.length&&this.siteService.GetAllsitesforsInventoryUsage(),this.ledgerService.isGetSubscribe=!0,this.ledgerService.GetAlldataforChallan(!0),this.subscription=this.ledgerService.resultObs.subscribe(e=>{this.ChallanLedger=this.ledgerService.result.filter(e=>(1==e.IsBank||1==e.IsCash||1==e.IsSC||1==e.IsSD)&&0==e.IsGrp&&1==e.St),this.purchaseLedger=this.ledgerService.result.filter(e=>1==e.IsPU&&0==e.IsGrp&&1==e.St),this.TaxLedger=this.ledgerService.result.filter(e=>1==e.isTL&&0==e.IsGrp&&1==e.St)}),this.httpfunction.scrolltop(),this.isScrollEnabled=!0}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe(),null!=this.challanSubscription&&this.challanSubscription.unsubscribe(),null!=this.Sitesubscription&&this.Sitesubscription.unsubscribe(),null!=this.Invesubscription&&this.Invesubscription.unsubscribe(),null!=this.tasksubscription&&this.tasksubscription.unsubscribe(),null!=this.Sbtasksubscription&&this.Sbtasksubscription.unsubscribe()}onChallanScroll(e){0==this.showChallanModal&&(null!=this.infiniteScroll&&(this.challanService.mobileinfinitescroll=this.infiniteScroll,this.challanService.mobilevirtualscroll=this.virtualScroll,this.challanService.refreshEvent=e.target),this.challanService.ScrollDown())}FilterData(){let e="0",t=0,i=0,n=0,r=0;return null!=this.searchLedger&&null!=this.searchLedger&&(e=this.searchLedger.UIDN),null!=this.siteService.singleresult&&null!=this.siteService.singleresult&&(t=this.siteService.singleresult),null!=this.inventoryService.singleresult&&null!=this.inventoryService.singleresult&&(r=this.inventoryService.singleresult),null!=this.taskService.singleresult&&null!=this.taskService.singleresult&&(i=this.taskService.singleresult),null!=this.subtaskService.singleresult&&null!=this.subtaskService.singleresult&&(n=this.subtaskService.singleresult),this.chalanFilter.LedgerId=e,this.chalanFilter.ChallanNo=this.challanfilterNo,this.chalanFilter.SiteId=t,this.chalanFilter.InvId=r,this.chalanFilter.TaskId=i,this.chalanFilter.SbTaskId=n,this.chalanFilter.IsPending=this.isChallanPending,this.challanService.filterArg=this.chalanFilter,this.challanService.page=0,!1}onCheckedChange(e){this.isChallanPending=!this.isChallanPending,this.FilterData()}cleardata(){this.siteService.singleresult=null,this.inventoryService.singleresult=null,this.taskService.singleresult=null,this.subtaskService.singleresult=null,this.chalanFilter.LedgerId=null,this.challanfilterNo="",this.searchLedger=null,this.purLedger=null,this.TaxLed=null}clearfilterandloadnewdata(){this.cleardata(),this.FilterData()}change(e){this.status.isOpen=e}toggleDropdown(e){$("#adv-search").dropdown("hide")}exportheader(e){let t="All";new Date,null!=this.searchLedger&&null!=this.searchLedger&&(t=this.searchLedger.LN),this.challanService.filterHeader="  Ledger : "+t+" ",this.challanService.Export(e)}generateBillPopupMobile(e){this.selectedchalans=JSON.parse(JSON.stringify(this.challanService.result.filter(t=>t.UIDN==e)));let t=this.selectedchalans[0];if(0==this.selectedchalans.every(function(e){return e.LI===t.LI}))this.alert.showInfo("Error","All selected ledgers must be same.");else{for(var i=0;i<this.selectedchalans.length;i++)if(1==this.selectedchalans[i].IsBd)return this.alert.showInfo("Error","Selected ledger must be unbilled"),!1;0==this.showBillModal&&(this.showBillModal=!0),this.VDt=new Date,this.httpfunction.IsMobileview()?this.BillModalMobile.show():this.BillModal.show(),this.calculationPurchase(),setTimeout(()=>{this.purled.focus()},600)}}showgenerateBillpopup(){if(this.challanService.result.filter(e=>1==e.Ick||1==e.billSelected).length>0){this.selectedchalans=JSON.parse(JSON.stringify(this.challanService.result.filter(e=>1==e.Ick||1==e.billSelected))),this.selectedchns=JSON.parse(JSON.stringify(this.challanService.result.filter(e=>1==e.Ick||1==e.billSelected)[0].ChallanInv));let t=this.selectedchalans[0];if(0==this.selectedchalans.every(function(e){return e.LI===t.LI}))this.alert.showInfo("Error","All selected ledgers must be same.");else{for(var e=0;e<this.selectedchalans.length;e++)if(1==this.selectedchalans[e].IsBd)return this.alert.showInfo("Error","Selected ledger must be unbilled"),!1;0==this.showBillModal&&(this.showBillModal=!0),this.VDt=new Date,this.httpfunction.IsMobileview()?this.BillModalMobile.show():this.BillModal.show(),this.calculationPurchase(),setTimeout(()=>{this.purled.focus()},600)}}else this.alert.showError("Error","Please select atleast one record")}calculateTotal(e){e.TA=e.UA*e.Qty}calculationPurchase(){this.totamount=0;for(var e=0;e<this.selectedchns.length;e++)this.totamount+=this.selectedchns[e].TtlAmt;null!=this.TaxLed&&(this.totamount=this.totamount+parseFloat((this.totamount*this.TaxLed.TR/100).toFixed(2)))}onDateSelect(e){this.VDt=e,null!=this.taxLedger&&this.taxLedger.focus()}onGenerateBill(){this.challanService.buldupdate(this.selectedchns).subscribe(e=>{let t=e.data;this.accountService.singleresult=new c.VN,this.accountService.singleresult.CI=this.accountService.getCompanyId,this.accountService.singleresult.SI=this.accountService.getSignupId,this.accountService.singleresult.VT=d.$f.Purchase,this.accountService.singleresult.VDt=this.VDt,this.accountService.singleresult.Narr="Bill Generated from challan";let i=[],n=this.ledgerService.result.filter(e=>e.UIDN==this.selectedchalans[0].LI)[0],r=new c.eK;r.LId=n.UIDN,r.L_Name=n.LN,r.L_PId=n.PI,r.L_anc=n.ancestor,r.L_Cat=n.Cat,r.TaxLedgerId=0,r.IsTax=!1,r.challan=[];let o=0;for(var a=0;a<t.length;a++){o+=t[a].TA;let e=new c.qk;e.Amt=t[a].TA,e.ChId=t[a].UIDN,e.ChNo=t[a].CN,r.challan.push(e)}r.InventoryId=0,r.Quantity=0,r.DrAmt=0,r.isMainled=!0,r.CrAmt=null!=this.TaxLed?o+parseFloat((o*this.TaxLed.TR/100).toFixed(2)):o,i.push(r);let l=new c.eK;if(l.LId=this.purLedger.UIDN,l.L_Name=this.purLedger.LN,l.L_PId=this.purLedger.PI,l.L_anc=this.purLedger.ancestor,l.L_Cat=this.purLedger.Cat,l.IsTax=!1,null!=this.TaxLed&&(l.TaxLedgerId=this.TaxLed.UIDN,l.TaxRate=this.TaxLed.TR),l.InventoryId=0,l.Quantity=0,l.DrAmt=o,l.CrAmt=0,i.push(l),null!=this.TaxLed){let e=new c.eK;e.LId=this.TaxLed.UIDN,e.L_Name=this.TaxLed.LN,e.L_PId=this.TaxLed.PI,e.L_anc=this.TaxLed.ancestor,e.L_Cat=this.TaxLed.Cat,e.IsTax=!0,e.TaxLedgerId=this.TaxLed.UIDN,e.TaxRate=this.TaxLed.TR,e.InventoryId=0,e.Quantity=0,e.DrAmt=parseFloat((o*this.TaxLed.TR/100).toFixed(2)),e.CrAmt=0,i.push(e)}this.accountService.singleresult.VDet=i,this.accountService.waitforMessage=!0,this.accountService.messagebutton=["Ok"],this.accountService.add(this.accountService.singleresult).subscribe(e=>{this.httpfunction.IsMobileview()?this.BillModalMobile.hide():this.BillModal.hide(),this.FilterData(),this.cleardata()})})}goback(){this.location.back()}openChallanpopup(e){this.currentScrollPosition=document.scrollingElement.scrollTop,this.ChallanId=e,this.showChallanModal=!0,this.addurl("transactions/challan/"+e),this.isList=!1}onChallanSubmit(e){if(this.showChallanModal=!1,setTimeout(()=>{this.challanService.arrowDownEvent(this.challanService.selectedRowIndex),document.scrollingElement.scrollTop=this.currentScrollPosition},250),this.showLedgHistory=!1,this.showLedgHistory=!1,this.isList=!0,this.resetUrl(),null!=e){var t=this.challanService.result.findIndex(t=>t.UIDN==e.UIDN);if(t>=0)null!=e.UpI&&e.UpI.length>0&&(e.UpI=e.UpI.filter(e=>1!=e.operationType)),this.challanService.result[t]=e,this.challanService.result=JSON.parse(JSON.stringify(this.challanService.result));else{let t="";null!=this.searchLedger&&null!=this.searchLedger&&(t=this.searchLedger.UIDN);let i=!0;(1==this.isChallanPending&&e.IsBd==this.isChallanPending||""!=t&&e.LI!=t)&&(i=!1),i&&this.challanService.result.unshift(e),this.challanService.result=JSON.parse(JSON.stringify(this.challanService.result))}}}OpenLedgerHistoryPopUp(e){this.currentScrollPosition=document.scrollingElement.scrollTop,this._LedgerId=e,this.showLedgHistory=!0,this.addurl("reports/ledgerhistory"),this.isList=!1}onLedgHistoryHide(){this.showLedgHistory=!0,this.showLedgHistory=!1,this.isList=!0,this.resetUrl(),document.scrollingElement.scrollTop=this.currentScrollPosition,this._LedgerId=0}selectAllchange(e){this.challanService.result.forEach(function(t){t.Ick=e.target.checked})}resetUrl(){this.isList=!0;let e=this.router.url;this.route.params.subscribe(t=>{null!=t.id&&""!=t.id&&(e=e.replace("/"+t.id,"")),this.location.go(e)})}addurl(e){let t=e,i=this.router.url;i=i.substring(0,i.lastIndexOf("/")+0),i=i.substring(0,i.lastIndexOf("/")+0),this.route.params.subscribe(e=>{null!=e.id&&""!=e.id&&(i=i.replace("/"+e.id,"")),this.location.go(`${i}/${t}`)}),"reports/ledgerhistory"==e&&(i=i.substring(0,i.lastIndexOf("/")+0),i=i.substring(0,i.lastIndexOf("/")+0))}sortPopover(e){return(0,r.mG)(this,void 0,void 0,function*(){const t=yield this.popoverController.create({component:T.r,cssClass:"my-custom-class",event:e,translucent:!0,componentProps:{sortArray:this.sortarray,onClick:(e,i)=>{let n=new Z.p(e,i);this.challanService.sortdata=n,t.dismiss()}}});return yield t.present()})}advSearchM(){this._SearchModal.show()}editOnArrowEvent(e){this.httpfunction.RolebaseData("Chln")?this.openChallanpopup(e):this.alert.showInfo("Error","You do not have sufficient rights to perform this action. Please contact administrator.")}toggleExcelImport(){this._myImageModal.show()}onExcelAdd(e){this.excelfileData=[];for(let t=0;t<e.length;t++){let i=new A.Q;i.name=e[t].name,i.operationType=0,i.src=e[t].src,i.CompanyId=this.inventoryService.getCompanyId,i.SignupId=this.inventoryService.getSignupId,i.FileLength=e[t].size,i.ModifiedDate=new Date,i.CreatedDate=new Date,i.CreatedBy=this.inventoryService.userid,i.modifyBy=this.inventoryService.userid,this.excelfileData.push(i)}}CloseImagePopup(){this.excelfileData=[],this._myImageModal.hide()}ImportTrackByFunction(e){return e.Index}ValidateImportRow(e){e.comments="",(null==e.ApplicableFrom||""==e.ApplicableFrom)&&(e.comments+="Invalid Date \n"),e.invalidProp=""!=e.comments,this.inValidEntry=null,this.inValidEntry=this.importeddataAPI.filter(e=>1==e.invalidProp).length}onExcelSubmit(){null!=this.excelfileData&&this.excelfileData.length>0?this.challanService.ImportExcel(this.excelfileData).subscribe(e=>{if(null==e.data)return this.alert.showError("Error","Excel column names are incorrect. Please double check your excel column name with predefined format."),void(this.isSubmited=!0);""!=e.data&&null!=e.data?(this.importeddataAPI=e.data,this.inValidEntry=this.importeddataAPI.filter(e=>1==e.invalidProp).length,this._myImageModal.hide(),this._myInqImportedDataViewModal.show(),this.isSubmited=!0):(this._myImageModal.hide(),this.excelfileData=[])},()=>{this.alert.showError("Error","Error while File import.Please Correct Sheet")}):this.alert.showError("Error","Please select atleast one File")}ChlImportContinue(){var e=this.importeddataAPI.filter(e=>1==e.invalidProp);e.length>0?this.alert.showError("Error","Please modify grid records. we still have "+e.length+" invalid records"):this.importeddataAPI.length>0?this.challanService.ImportDatafromGrid(this.importeddataAPI).subscribe(e=>{e.data.length>0||(this._myImageModal.hide(),this._myInqImportedDataViewModal.hide(),this.alert.showSuccess("Error","Inventory(s) Imported successfully"))},()=>{this.alert.showError("Error","Error while File import.Please Correct Sheet")}):this.alert.showError("Error","Inventory Can't imported due to Missing required fields.")}toggleNestedTable(e){this.showNestedTable[e]=!this.showNestedTable[e]}ChnDtSelect(e,t,i){this.importeddataAPI[t].ChallanDate=e,this.ValidateImportRow(i)}}return e.\u0275fac=function(t){return new(t||e)(v.Y36(a.e),v.Y36(x.i),v.Y36(I.Dh),v.Y36(L.gz),v.Y36(w.T3),v.Y36(u.V),v.Y36(g.M),v.Y36(h.I),v.Y36(p.P),v.Y36(o.Q),v.Y36(L.F0),v.Y36(v.sBO),v.Y36(n.Ye),v.Y36(s.B),v.Y36(b.Rq))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-challan-list"]],viewQuery:function(e,t){if(1&e&&(v.Gf(P,5,l.w9),v.Gf(G,5),v.Gf(B,5),v.Gf(Y,5),v.Gf(j,5),v.Gf(K,5,l.w9),v.Gf(z,5,l.w9),v.Gf(W,5),v.Gf(X,5),v.Gf(ee,5),v.Gf(te,5),v.Gf(ie,5),v.Gf(ne,7)),2&e){let e;v.iGM(e=v.CRH())&&(t.serachcontrol=e.first),v.iGM(e=v.CRH())&&(t.challanModal=e.first),v.iGM(e=v.CRH())&&(t.BillModal=e.first),v.iGM(e=v.CRH())&&(t.BillModalMobile=e.first),v.iGM(e=v.CRH())&&(t._SearchModal=e.first),v.iGM(e=v.CRH())&&(t.purled=e.first),v.iGM(e=v.CRH())&&(t.taxLedger=e.first),v.iGM(e=v.CRH())&&(t._LedgerHistoryModal=e.first),v.iGM(e=v.CRH())&&(t.formbill=e.first),v.iGM(e=v.CRH())&&(t.infiniteScroll=e.first),v.iGM(e=v.CRH())&&(t.virtualScroll=e.first),v.iGM(e=v.CRH())&&(t._myImageModal=e.first),v.iGM(e=v.CRH())&&(t._myInqImportedDataViewModal=e.first)}},hostBindings:function(e,t){1&e&&v.NdJ("popstate",function(e){return t.onPopState(e)},!1,v.Jf7)},features:[v._Bn([s.B,a.e,o.Q,g.M,h.I,u.V,p.P])],decls:155,vars:47,consts:[[1,"card",3,"hidden"],["class","customsearch",4,"ngIf"],["class","customsearchM",4,"ngIf"],["id","tableSort",1,"dropdown-menu","arrow_box"],["sortcolumn","ChallanNo","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","MaterialDate","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","Quantity","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","UnitAmount","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","TotalAmount","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","Narration","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["sortcolumn","IsBilled","href","javascript:void(0)",1,"dropdown-item",3,"dirsort"],["class","table-responsive","id","tableContainer",4,"ngIf"],["id","tableContainerbody",3,"height",4,"ngIf"],[4,"ngIf"],["class","col-md-12 pl-0 pr-0",4,"ngIf"],[1,"add-panel",3,"toggleAction"],["id","add-panel-switch",1,"switch","text-right"],["tooltip","Print",1,"action-button","option","four","border-0","waves-effect","btn-pink","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-print"],["tooltip","Pdf",1,"action-button","option","three","border-0","waves-effect","btn-orange","btn-floating",3,"click"],["aria-hidden","true",1,"far","fa-file-pdf"],["tooltip","Export",1,"action-button","option","two","border-0","waves-effect","btn-default","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-download"],["tooltip","Import",1,"action-button","option","one","border-0","waves-effect","btn-purple","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-upload"],[1,"border-0","waves-effect","btn-dark","btn-floating","action-button","plus","abs"],["aria-hidden","true",1,"fas","fa-ellipsis-v"],["accesslevel","Add","mname","Chln","tooltip","Add New",1,"border-0","waves-effect","btn-primary","btn-floating",3,"appRole","SignupId","UserId","clickAllowed"],[1,"fas","fa-plus"],[3,"ChallanredirectOnCancel","ChallanId","ChallanredirectAction",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modalNew","fade",2,"width","30%"],["BillModal","bs-modal"],["class","modal-dialog halfview modal-lg","role","document",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade","bg-white"],["BillModalMobile","bs-modal"],["class","container-fluid p-0","style","height: 100%;background-color: white;",4,"ngIf"],[3,"LedgId","IsCallasPopup",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","SearchModal","aria-hidden","true",1,"modal","fade","bg-white",2,"z-index","99999"],["SearchModal","bs-modal"],[1,"container-fluid","p-0",2,"height","100%","background-color","white"],[1,"modal-content",2,"height","100%"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["role","form",3,"ngSubmit"],["f","ngForm"],[1,"container-fluid",2,"margin-bottom","70px"],[1,"row","mt-2"],[1,"md-form","col-md-3"],["name","isChallanPending"],[1,"c-switch","c-switch-pill","c-switch-primary","mb-2"],["type","checkbox","name","ChallanPending","id","ChallanPending",1,"c-switch-input",3,"ngModel","change","ngModelChange"],[1,"c-switch-slider"],[1,"md-form","col-md-3","col-sm-6"],["for","Site"],["autofocus","","selectOnTab","true","name","Ledger","bindLabel","LN","placeholder","Select Account",3,"virtualScroll","items","ngModel","loading","ngModelChange"],["toled2",""],["ng-header-tmp",""],["ng-option-tmp",""],["selectOnTab","true","name","Site","bindLabel","SN","bindValue","UIDN","placeholder","Select Site",3,"virtualScroll","items","ngModel","loading","scrollToEnd","ngModelChange"],["for","Inventory"],["selectOnTab","true","name","Site","bindLabel","InvN","bindValue","UIDN","placeholder","Select Inventory",3,"virtualScroll","items","ngModel","loading","scrollToEnd","ngModelChange"],["for","Task"],["selectOnTab","true","name","Site","bindLabel","TN","bindValue","UIDN","placeholder","Select Task",3,"virtualScroll","items","ngModel","loading","scrollToEnd","ngModelChange"],["for","SubTask"],["selectOnTab","true","name","Site","bindLabel","SN","bindValue","UIDN","placeholder","Select SubTask",3,"virtualScroll","items","ngModel","loading","scrollToEnd","ngModelChange"],["for","name"],["autofocus","","type","text","placeholder","Enter Challan No","name","chlnno","id","Vouchertxt",1,"form-control",3,"ngModel","ngModelChange"],["chlnno","ngModel"],[1,"navbar","fixed-bottom","navbar-expand-sm","navbar-dark","bg-light"],[1,"navbar-nav","ml-auto","d-flex","flex-row-reverse","bd-highlight"],[1,"nav-item","active"],["type","submit",1,"btn","btn-primary","pull-right",3,"click"],[1,"fas","fa-search","mr-2"],[1,"nav-item","active","mr-2"],["type","submit",1,"btn","btn-dark",3,"click"],["bsModal","","tabindex","-1","role","dsialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modalNew","fade",2,"width","90%"],["ImageModal","bs-modal"],["role","document",1,"modal-dialog","modal-md"],[1,"modal-content"],["novalidate","",3,"ScrollToInvalid","ngSubmit"],["frmImage","ngForm"],[1,"modal-body"],[1,"content"],[1,"container"],[1,"form-group","col-md-12","p-0"],[1,"input-group"],[1,"md-form","form-group","col-sm-12","p-0"],["maxFiles","1","required","","maxSize","2","fileExt","xls, xlsx",3,"filelist","uploadStatus"],["Importexcel",""],["target","_blank","href","https://api.accountbook24.com/sample/Challan-Import.xlsx",1,"col-sm-2"],[1,"modal-footer","mt-3"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-dark",3,"click"],["bsModal","","tabindex","-1","role","dsialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"fullModal","fade",2,"width","100%"],["myInqImportedDataViewModal","bs-modal"],["role","document",1,"modal-dialog1","modal-md"],["importcontainer",""],["class","card-body col-md-12","id","tableContainer",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[1,"customsearch"],[1,"c-header-nav"],[1,"mx-2","mb-3"],[1,"c-header-back",3,"click"],[1,"c-icon","c-icon-lg","cil-arrow-left"],[1,"mx-2"],["autofocus","","selectOnTab","true","appendTo","body","name","Ledger","bindLabel","LN","placeholder","Select Account",1,"maxpanel",3,"virtualScroll","items","ngModel","loading","ngModelChange"],["toled",""],[1,"mb-2"],["type","button",1,"btn","btnSmW","btn-primary",3,"click"],[1,"cil-search","btn-icon","mr-2"],[1,"none"],["dropdown","","role","group",1,"btn-group","mb-2",3,"isOpen","isOpenChange"],["type","button","id","dropdownMenuButton","id","adv-search","data-toggle","dropdown","aria-expanded","false",1,"btn","btn-primary","dropdown-toggle"],[1,"cil-filter","mr-2"],["aria-labelledby","adv-search","role","menu",1,"dropdown-menu","filterform",2,"min-width","35rem",3,"click"],["ffilter","ngForm"],[1,"row","m-0"],[1,"col-md-6","col-sm-12"],[1,"form-group","col-md-6","col-sm-12"],[1,"text-right","mr-2"],["type","submit",1,"btn","btn-primary","mr-2",3,"click"],["type","submit",1,"btn","btn-dark","pull-right",3,"click"],[1,"fas","fa-search"],["title","History","placement","bottom",1,"pl-2"],[1,"fas","fa-history","text-primary",3,"click"],[1,"form-text","text-muted"],[1,"customsearchM"],[1,"mr-1","mb-2","ml-2"],["name","chevron-back",3,"click"],["name","search","href","javascript:void(0)",3,"click"],[1,"mb-3","mt-1","LeftLi","text-center"],[1,"col","Font16","pl-1"],[1,"mr-3"],["name","filter-sharp",1,"pb-2",3,"click"],["id","tableContainer",1,"table-responsive"],["class","card-header p-1","id","formHeader",4,"ngIf"],["infinite-scroll","",3,"scrollWindow","scrolled"],["class","table table-bordered table-striped pointer-on-hover",3,"fxHeader",4,"ngIf"],["id","fxheaderDiv","class","table-responsive fxheaderDiv",4,"ngIf"],["id","formHeader",1,"card-header","p-1"],[1,"row"],[1,"col","PageNameFsize","pl-1"],[1,"text-right","pl-0","pr-0"],[1,"c-switch","c-switch-pill","c-switch-primary","float-right","mb-2"],[1,"mb-2","float-right","mr-2","small","mt-1","font-weight-bold"],[1,"pl-3","pr-1"],[1,"text-wrap","text-right"],[1,"table","table-bordered","table-striped","pointer-on-hover",3,"fxHeader"],["id","tableContainerHead"],[1,"form-check"],["type","checkbox","id","item_All",1,"form-check-input",3,"checked","ngModel","ngModelChange","change"],["for","item_All",1,"form-check-label"],["sortcolumn","ChallanSrNo",3,"dirsort"],["sortcolumn","ChallanNo",3,"dirsort"],["width","105px","sortcolumn","MaterialDate",3,"dirsort"],["sortcolumn","SiteName",3,"dirsort"],["sortcolumn","TaskName",3,"dirsort"],["sortcolumn","LedgerName",3,"dirsort"],["sortcolumn","UserName",3,"dirsort"],["sortcolumn","Narration",3,"dirsort"],["sortcolumn","IsBilled",3,"dirsort"],["id","tableContainerbody"],["container",""],["autofocus","",3,"rowselected",4,"ngFor","ngForOf"],["autofocus",""],[3,"tabindex","keydown.enter","keydown.arrowdown","keydown.arrowup","click"],["type","checkbox",1,"form-check-input",3,"checked","ngModel","id","ngModelChange"],[1,"form-check-label",3,"for"],["accesslevel","Edit","href","javascript:void(0)","mname","Chln",1,"btn","btn-link",3,"appRole","SignupId","UserId","clickAllowed"],[3,"dateValue"],[1,"font-xs"],["class","font-weight-bold small",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["href","javascript:void(0)","accesslevel","Delete","mname","Chln",1,"dropdown-item",3,"appRole","SignupId","UserId","clickAllowed"],[1,"fas","fa-trash","fa-lg","text-danger"],["colspan","25"],["class","table table-bordered",3,"hidden",4,"ngIf"],[1,"font-weight-bold","small"],["target","_blank",3,"href","click",4,"ngFor","ngForOf"],["target","_blank",3,"href","click"],[1,"badge","badge-success"],[1,"badge","badge-danger"],[1,"table","table-bordered",3,"hidden"],[4,"ngFor","ngForOf"],["id","fxheaderDiv",1,"table-responsive","fxheaderDiv"],["id","fxheadertable",1,"table","table-bordered","table-striped","text-center"],["sortcolumn","Name",3,"dirsort"],["sortcolumn","Quantity",3,"dirsort"],["sortcolumn","UnitAmount",3,"dirsort"],["sortcolumn","TotalAmount",3,"dirsort"],["slot","fixed",3,"ionRefresh"],["pullingText","Pull to refresh","refreshingSpinner","bubbles","refreshingText","Refreshing..."],["approxItemHeight","210px",3,"items"],["ionvscroll",""],[4,"virtualItem"],["threshold","100px",3,"ionInfinite"],["ionInfinitescroll",""],["loadingSpinner","bubbles",3,"loadingText"],["class","text-left",4,"ngIf"],["size","3",1,"text-right","pr-1","p-0"],["size","auto",1,"font-weight-bold","small","text-right"],["size","auto","class","font-weight-bold small text-right",4,"ngIf"],["class","text-right",4,"ngIf"],["class","text-left","size","4",4,"ngIf"],["class","pt-3","size","auto",4,"ngIf"],["size","3","class","pt-2 p-0","size","2.7",4,"ngIf"],[1,"text-right","mt-3"],["href","javascript:void(0)","href","javascript:void(0)","accesslevel","Edit","mname","Chln","class","card-link text-center",3,"appRole","SignupId","UserId","clickAllowed",4,"ngIf"],["href","javascript:void(0)","href","javascript:void(0)","accesslevel","Delete","mname","Chln",1,"card-link","text-center",3,"appRole","SignupId","UserId","clickAllowed"],["name","trash-outline","color","danger"],[1,"text-left"],[1,"text-right"],["size","4",1,"text-left"],["size","auto",1,"pt-3"],["href","javascript:void(0)",1,"btn","btn-link","p-0","text-small","font-weight-bold","text-wrap",3,"click"],["size","3","size","2.7",1,"pt-2","p-0"],["class","btn btn-link text-small font-weight-bold text-wrap","target","_blank",3,"href","click",4,"ngFor","ngForOf"],["target","_blank",1,"btn","btn-link","text-small","font-weight-bold","text-wrap",3,"href","click"],["href","javascript:void(0)","href","javascript:void(0)","accesslevel","Edit","mname","Chln",1,"card-link","text-center",3,"appRole","SignupId","UserId","clickAllowed"],["name","create-outline","color","primary"],["class","skCard",4,"ngFor","ngForOf"],[1,"skCard"],["animated","",2,"width","100%"],[2,"text-align","-webkit-right"],["animated","",2,"width","60%"],["animated","",2,"width","80%"],["animated","",2,"width","40%"],["animated","",2,"width","90%"],["animated","",2,"width","70%"],[1,"table","table-bordered","table-striped","text-center",3,"fxHeader"],[2,"width","20px"],[2,"width","200px"],[1,"col-md-12","pl-0","pr-0"],[1,"mx-auto","noDataImage"],[1,"text-center"],["type","button","value","Add New","accesslevel","Add","mname","Chln",1,"btn","btn-primary",3,"appRole","SignupId","UserId","clickAllowed"],[3,"ChallanredirectOnCancel","ChallanId","ChallanredirectAction"],["role","document",1,"modal-dialog","halfview","modal-lg"],["id","billContent",1,"modal-content"],[1,"modal-title","mr-4"],[1,"text-danger","pt-1"],[1,"col-sm-12","nopadding"],[1,"card"],[1,"card-body"],["name","form","novalidate","",3,"ScrollToInvalid","ngSubmit"],["fbill","ngForm"],["id","formContainer",1,"row","form-group"],[1,"md-form","form-group","col-sm-12","col-md-12"],["for","purled"],["required","","appendTo","body","name","purled","bindLabel","LN","placeholder","Select Purchase Account",3,"virtualScroll","ngClass","items","ngModel","loading","ngModelChange"],["purled","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","taxLedger"],["appendTo","body","name","taxLedger","bindLabel","LN","placeholder","Select Tax Account",3,"items","ngModel","loading","ngModelChange","change"],["taxLedger",""],["for","vdate"],["type","text","appDatepicker","","required","","id","vdate",1,"form-control",3,"startDate","ngClass","selected"],["vdate",""],[1,"col-12"],[1,"table","table-bordered","table-account"],[1,"d-flex","flex-wrap"],[1,"col-2","text-center"],[1,"col-4","text-right"],["class","d-flex flex-wrap",4,"ngFor","ngForOf"],["id","formbtnContainer",1,"col-sm-12","text-right","mr-2"],["href","javascript:void(0)",1,"btn","btn-dark","mr-2",3,"click"],[1,"invalid-feedback"],["type","text","required","","pattern","^-?\\s*(?:\\d+|\\d*\\.\\d+)?\\s*$","placeholder","Enter Qty",1,"form-control","text-center","accText",3,"ngClass","name","ngModel","change","ngModelChange"],["qty",""],["type","text","required","","pattern","^-?\\s*(?:\\d+|\\d*\\.\\d+)?\\s*$","placeholder","Enter Unit price",1,"form-control","text-right","accText",3,"ngClass","name","ngModel","change","ngModelChange"],["ua",""],["type","text","required","","pattern","^-?\\s*(?:\\d+|\\d*\\.\\d+)?\\s*$","placeholder","Total Amount",1,"form-control","text-right","accText",3,"ngClass","name","ngModel","change","ngModelChange"],["ta",""],[3,"hidden"],["id","billContent",1,"modal-content",2,"height","100%"],[1,"container-fluid"],[1,"md-form","col-sm-12","col-md-12"],[1,"col-3","text-center"],[1,"col-3","text-right"],[1,"col-3","text-center","pt-2"],[3,"LedgId","IsCallasPopup"],["id","tableContainer",1,"card-body","col-md-12"],[3,"executeRefreshOutsideAngularZone","items","parentScroll","vsUpdate"],["scrollImport",""],[1,"table","table-bordered","table-striped",3,"fxHeader"],["id","tableContainerHead",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[2,"min-width","225px","white-space","pre-line"],[2,"min-width","100px"],[2,"min-width","150px"],[2,"white-space","pre-line"],["autofocus","","type","text",1,"form-control",3,"ngModel","name","id","change","ngModelChange"],["autofocus","","type","text","autocomplete","none","appDatepicker","",1,"form-control",3,"startDate","name","id","change","selected"],["ChallanDate",""]],template:function(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",0),v.YNc(1,ce,54,24,"div",1),v.YNc(2,de,12,0,"div",2),v.TgZ(3,"div",3),v.TgZ(4,"a",4),v._uU(5," By No "),v.qZA(),v.TgZ(6,"a",5),v._uU(7," By Date "),v.qZA(),v.TgZ(8,"a",6),v._uU(9," By Quantity "),v.qZA(),v.TgZ(10,"a",7),v._uU(11," By Amount "),v.qZA(),v.TgZ(12,"a",8),v._uU(13," By Total Amount "),v.qZA(),v.TgZ(14,"a",9),v._uU(15," By Narration "),v.qZA(),v.TgZ(16,"a",10),v._uU(17," By Bill Status "),v.qZA(),v.qZA(),v.YNc(18,we,5,4,"div",11),v.YNc(19,Ee,10,4,"div",12),v.YNc(20,Pe,2,1,"div",13),v.YNc(21,Ge,36,1,"div",13),v.YNc(22,Ye,6,1,"div",14),v.TgZ(23,"div",15),v.TgZ(24,"div",16),v.TgZ(25,"button",17),v.NdJ("click",function(){return t.exportheader(1)}),v._UZ(26,"i",18),v.qZA(),v.TgZ(27,"button",19),v.NdJ("click",function(){return t.exportheader(2)}),v._UZ(28,"i",20),v.qZA(),v.TgZ(29,"button",21),v.NdJ("click",function(){return t.exportheader(3)}),v._UZ(30,"i",22),v.qZA(),v.TgZ(31,"button",23),v.NdJ("click",function(){return t.toggleExcelImport()}),v._UZ(32,"i",24),v.qZA(),v.TgZ(33,"button",25),v._UZ(34,"i",26),v.qZA(),v.TgZ(35,"button",27),v.NdJ("clickAllowed",function(){return t.openChallanpopup("add")}),v._UZ(36,"i",28),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.YNc(37,je,1,2,"app-challan-addedit",29),v.TgZ(38,"div",30,31),v.YNc(40,st,51,18,"div",32),v.qZA(),v.TgZ(41,"div",33,34),v.YNc(43,vt,54,18,"div",35),v.qZA(),v.YNc(44,xt,1,2,"app-ledgerhistory",36),v.TgZ(45,"div",37,38),v.TgZ(47,"div",39),v.TgZ(48,"div",40),v.TgZ(49,"div",41),v.TgZ(50,"h4",42),v._uU(51,"Advance Search "),v.qZA(),v.TgZ(52,"button",43),v.NdJ("click",function(){return t._SearchModal.hide()}),v.TgZ(53,"span",44),v._uU(54,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(55,"form",45,46),v.NdJ("ngSubmit",function(){return t.FilterData()}),v.TgZ(57,"div",47),v.TgZ(58,"div",48),v.TgZ(59,"div",49),v.TgZ(60,"label",50),v._uU(61,"Pending Challan"),v.qZA(),v._UZ(62,"br"),v.TgZ(63,"label",51),v.TgZ(64,"input",52),v.NdJ("change",function(){return t.FilterData()})("ngModelChange",function(e){return t.isChallanPending=e}),v.qZA(),v._UZ(65,"span",53),v.qZA(),v.qZA(),v.TgZ(66,"div",54),v.TgZ(67,"label",55),v._uU(68,"Select Account"),v.qZA(),v.TgZ(69,"ng-select",56,57),v.NdJ("ngModelChange",function(e){return t.searchLedger=e}),v.YNc(71,It,2,2,"ng-template",58),v.YNc(72,Lt,4,1,"ng-template",59),v.qZA(),v.qZA(),v.TgZ(73,"div",54),v.TgZ(74,"label",55),v._uU(75,"Site"),v.qZA(),v.TgZ(76,"ng-select",60),v.NdJ("scrollToEnd",function(){return t.siteService.ScrollDown()})("ngModelChange",function(e){return t.siteService.singleresult=e}),v.YNc(77,wt,2,2,"ng-template",58),v.qZA(),v.qZA(),v.TgZ(78,"div",54),v.TgZ(79,"label",61),v._uU(80,"Inventory"),v.qZA(),v.TgZ(81,"ng-select",62),v.NdJ("scrollToEnd",function(){return t.inventoryService.ScrollDown()})("ngModelChange",function(e){return t.inventoryService.singleresult=e}),v.YNc(82,bt,2,2,"ng-template",58),v.qZA(),v.qZA(),v.TgZ(83,"div",54),v.TgZ(84,"label",63),v._uU(85,"Task"),v.qZA(),v.TgZ(86,"ng-select",64),v.NdJ("scrollToEnd",function(){return t.taskService.ScrollDown()})("ngModelChange",function(e){return t.taskService.singleresult=e}),v.YNc(87,Ct,2,2,"ng-template",58),v.qZA(),v.qZA(),v.TgZ(88,"div",54),v.TgZ(89,"label",65),v._uU(90,"Sub Task"),v.qZA(),v.TgZ(91,"ng-select",66),v.NdJ("scrollToEnd",function(){return t.subtaskService.ScrollDown()})("ngModelChange",function(e){return t.subtaskService.singleresult=e}),v.YNc(92,qt,2,2,"ng-template",58),v.qZA(),v.qZA(),v.TgZ(93,"div",54),v.TgZ(94,"label",67),v._uU(95,"Challan No"),v.qZA(),v.TgZ(96,"input",68,69),v.NdJ("ngModelChange",function(e){return t.challanfilterNo=e}),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(98,"nav",70),v.TgZ(99,"ul",71),v.TgZ(100,"li",72),v.TgZ(101,"button",73),v.NdJ("click",function(e){return t.toggleDropdown(e),t._SearchModal.hide()}),v._UZ(102,"i",74),v._uU(103,"Search "),v.qZA(),v.qZA(),v.TgZ(104,"li",75),v.TgZ(105,"button",76),v.NdJ("click",function(e){return t.clearfilterandloadnewdata(),t.toggleDropdown(e),t._SearchModal.hide()}),v._uU(106," Clear Filter "),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(107,"div",77,78),v.TgZ(109,"div",79),v.TgZ(110,"div",80),v.TgZ(111,"div",41),v.TgZ(112,"h4",42),v._uU(113," Inventory Challan"),v.qZA(),v.TgZ(114,"button",43),v.NdJ("click",function(){return t.CloseImagePopup()}),v.TgZ(115,"span",44),v._uU(116,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(117,"form",81,82),v.NdJ("ngSubmit",function(){return v.CHM(e),v.MAs(118).form.valid&&t.onExcelSubmit()}),v.TgZ(119,"div",83),v.TgZ(120,"div",84),v.TgZ(121,"div",85),v.TgZ(122,"div",86),v.TgZ(123,"div",87),v.TgZ(124,"div",88),v.TgZ(125,"app-file-upload",89,90),v.NdJ("uploadStatus",function(e){return t.onExcelAdd(e)}),v.qZA(),v.TgZ(127,"a",91),v._uU(128," Download sample "),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(129,"div",92),v.TgZ(130,"button",93),v._uU(131,"Submit"),v.qZA(),v.TgZ(132,"button",94),v.NdJ("click",function(){return t.CloseImagePopup()}),v._uU(133,"Close"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(134,"div",95,96),v.TgZ(136,"div",97),v.TgZ(137,"div",80),v.TgZ(138,"div",41),v.TgZ(139,"h4",42),v._uU(140,"Imported Challan From Sheet "),v.qZA(),v.TgZ(141,"button",43),v.NdJ("click",function(){return v.CHM(e),v.MAs(135).hide()}),v.TgZ(142,"span",44),v._uU(143,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(144,"div",83,98),v.TgZ(146,"div",86),v.TgZ(147,"form",81,82),v.NdJ("ngSubmit",function(){return v.CHM(e),v.MAs(118).form.valid}),v.YNc(149,yt,8,6,"div",99),v.qZA(),v.qZA(),v.qZA(),v.TgZ(150,"div",100),v.TgZ(151,"button",101),v.NdJ("click",function(){return t.ChlImportContinue()}),v._uU(152,"Challan Import"),v.qZA(),v.TgZ(153,"button",94),v.NdJ("click",function(){return v.CHM(e),v.MAs(135).hide()}),v._uU(154,"Close"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}2&e&&(v.Udp("display",t.showChallanModal||t.showLedgHistory?"none":"block"),v.Q6J("hidden",!t.isList),v.xp6(1),v.Q6J("ngIf",!t.challanService.IsMobileview),v.xp6(1),v.Q6J("ngIf",t.challanService.IsMobileview),v.xp6(2),v.Q6J("dirsort",t.challanService),v.xp6(2),v.Q6J("dirsort",t.challanService),v.xp6(2),v.Q6J("dirsort",t.challanService),v.xp6(2),v.Q6J("dirsort",t.challanService),v.xp6(2),v.Q6J("dirsort",t.challanService),v.xp6(2),v.Q6J("dirsort",t.challanService),v.xp6(2),v.Q6J("dirsort",t.challanService),v.xp6(2),v.Q6J("ngIf",!t.challanService.IsMobileview),v.xp6(1),v.Q6J("ngIf",t.challanService.result.length>0&&t.challanService.IsMobileview),v.xp6(1),v.Q6J("ngIf",0==t.challanService.result.length&&!t.noDataImage&&t.challanService.IsMobileview),v.xp6(1),v.Q6J("ngIf",0==t.challanService.result.length&&!t.noDataImage&&!t.challanService.IsMobileview),v.xp6(1),v.Q6J("ngIf",0==t.challanService.result.length),v.xp6(13),v.Q6J("SignupId",t.SignupId)("UserId",t.UserId),v.xp6(2),v.Q6J("ngIf",t.showChallanModal),v.xp6(3),v.Q6J("ngIf",t.showBillModal),v.xp6(3),v.Q6J("ngIf",t.showBillModal),v.xp6(1),v.Q6J("ngIf",t.showLedgHistory),v.xp6(20),v.Q6J("ngModel",t.isChallanPending),v.xp6(5),v.Q6J("virtualScroll",!0)("items",t.ChallanLedger)("ngModel",t.searchLedger)("loading",t.ledgerService.loading),v.xp6(7),v.Q6J("virtualScroll",!0)("items",t.siteService.result)("ngModel",t.siteService.singleresult)("loading",t.siteService.loading),v.xp6(5),v.Q6J("virtualScroll",!0)("items",t.inventoryService.result)("ngModel",t.inventoryService.singleresult)("loading",t.inventoryService.loading),v.xp6(5),v.Q6J("virtualScroll",!0)("items",t.taskService.result)("ngModel",t.taskService.singleresult)("loading",t.taskService.loading),v.xp6(5),v.Q6J("virtualScroll",!0)("items",t.subtaskService.result)("ngModel",t.subtaskService.singleresult)("loading",t.subtaskService.loading),v.xp6(5),v.Q6J("ngModel",t.challanfilterNo),v.xp6(29),v.Q6J("filelist",t.excelfileData),v.xp6(24),v.Q6J("ngIf",t.isSubmited))},directives:[n.O5,C.n,q.e,S.i9,M.g,y.oB,N._Y,N.JL,N.F,N.Wl,D.x,N.JJ,N.On,l.w9,l.A3,l.Z2,N.Fj,_.u,U.Y,k.TO,I.gu,J.R,V.n,n.sg,R.a,I.W2,I.nJ,I.Wo,I.aJ,I.Rw,I.ju,I.MB,I.PM,I.Nd,I.wI,I.CK,Q.N,N.Q7,n.mk,F.q,N.c5,H.i,E.Vw],pipes:[O.s],styles:[".pointer-on-hover[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{cursor:pointer}"]}),e})();var Dt=i(28879),_t=i(86410),Ut=i(3359),kt=i(61362),Jt=i(49457),Vt=i(69521),Rt=i(65978),Qt=i(8746);const Ft=["frm"],Ht=["myModal"],Et=["Ledger"],Ot=["TransactionModal"],Pt=["ExportLedgModal"],$t=["SearchModal"],Gt=["LedgerHistoryModal"],Bt=["ionvscroll"],Yt=["ImageModal"],jt=["myInqImportedDataViewModal"];function Kt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"a"),v._uU(1),v.qZA(),v.TgZ(2,"a",92),v.TgZ(3,"i",93),v.NdJ("click",function(){const t=v.CHM(e).item;return v.oxw(2).OpenLedgerHistoryPopUp(t.UIDN)}),v.qZA(),v.qZA()}if(2&e){const e=t.item;v.xp6(1),v.Oqu(e.LN),v.xp6(1),v.Q6J("hidden",1==e.IsGrp)}}function zt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",87),v.TgZ(1,"a",94),v.NdJ("click",function(){return v.CHM(e),v.oxw(2).openChangeModal()}),v._uU(2," Change Group "),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(2);v.xp6(1),v.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Wt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",95),v.TgZ(1,"button",96),v.NdJ("clickAllowed",function(){return v.CHM(e),v.oxw(2).MultipleVoucherDelete()}),v._uU(2," Delete Multiple "),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(2);v.xp6(1),v.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Xt(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",75),v.TgZ(1,"form",76),v.NdJ("submit",function(){return v.CHM(e),v.oxw().FilterData()}),v.TgZ(2,"ul",77),v.TgZ(3,"li",78),v.TgZ(4,"button",79),v.NdJ("click",function(){return v.CHM(e),v.oxw().goback()}),v._UZ(5,"i",80),v.qZA(),v.qZA(),v.TgZ(6,"li",81),v.TgZ(7,"ng-select",82,38),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw().currentLedger=t}),v.YNc(9,Kt,4,2,"ng-template",39),v.qZA(),v.qZA(),v.TgZ(10,"li",83),v.TgZ(11,"button",84),v.NdJ("click",function(){return v.CHM(e),v.oxw().FilterData()}),v._UZ(12,"span",85),v.TgZ(13,"span",86),v._uU(14,"Search"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(15,"li",87),v.TgZ(16,"a",88),v.NdJ("click",function(){return v.CHM(e),v.oxw().exportForTally()}),v._uU(17," Export "),v.qZA(),v.qZA(),v.YNc(18,zt,3,2,"li",89),v.YNc(19,Wt,3,2,"li",90),v.TgZ(20,"li",91),v.TgZ(21,"a",88),v.NdJ("click",function(){return v.CHM(e),v.oxw().UnusedLedger()}),v._uU(22," UnUsed "),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw();v.xp6(7),v.Q6J("virtualScroll",!0)("items",e.companyLedgerService.result)("ngModel",e.currentLedger)("loading",e.companyLedgerService.loading),v.xp6(11),v.Q6J("ngIf",e.isMultipleLedgerDelete),v.xp6(1),v.Q6J("ngIf",e.isMultipleLedgerDelete)}}function ei(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",97),v.TgZ(1,"ul",77),v.TgZ(2,"li",98),v.TgZ(3,"ion-icon",99),v.NdJ("click",function(){return v.CHM(e),v.oxw().goback()}),v.qZA(),v.qZA(),v.TgZ(4,"li",98),v.TgZ(5,"ion-icon",100),v.NdJ("click",function(){return v.CHM(e),v.oxw().advSearchM()}),v.qZA(),v.qZA(),v.TgZ(6,"li",101),v.TgZ(7,"div",102),v.TgZ(8,"span"),v.TgZ(9,"strong"),v._uU(10,"Chart Of Accounts"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}}function ti(e,t){if(1&e&&(v.TgZ(0,"div",117),v._uU(1,"Total UnUsed Ledger "),v.TgZ(2,"b"),v._uU(3),v.qZA(),v.qZA()),2&e){const e=v.oxw(3);v.xp6(3),v.hij(" ",e.TotalUnusedLEdger,"")}}function ii(e,t){if(1&e&&(v.TgZ(0,"div",117),v._uU(1),v.qZA()),2&e){const e=v.oxw(3);v.xp6(1),v.hij(" ",e.companyLedgerService.currentShowing,"")}}function ni(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",107),v.TgZ(1,"div",108),v.TgZ(2,"div",109),v.TgZ(3,"strong"),v._uU(4,"Chart Of Account (Ledger List)"),v.qZA(),v.qZA(),v.TgZ(5,"div",110),v.TgZ(6,"label",111),v.TgZ(7,"input",112),v.NdJ("change",function(){return v.CHM(e),v.oxw(2).showLedgerOnly()})("ngModelChange",function(t){return v.CHM(e),v.oxw(2).OnlyLedgers=t}),v.qZA(),v._UZ(8,"span",22),v.qZA(),v.TgZ(9,"span",113),v._uU(10,"Show Ledger Only"),v.qZA(),v.qZA(),v.TgZ(11,"div",110),v.TgZ(12,"label",111),v.TgZ(13,"input",114),v.NdJ("change",function(){return v.CHM(e),v.oxw(2).showGroupsOnly()})("ngModelChange",function(t){return v.CHM(e),v.oxw(2).OnlyGroups=t}),v.qZA(),v._UZ(14,"span",22),v.qZA(),v.TgZ(15,"span",113),v._uU(16,"Show Group Only"),v.qZA(),v.qZA(),v.TgZ(17,"div",115),v.YNc(18,ti,4,1,"div",116),v.YNc(19,ii,2,1,"div",116),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(2);v.xp6(7),v.Q6J("ngModel",e.OnlyLedgers),v.xp6(6),v.Q6J("ngModel",e.OnlyGroups),v.xp6(5),v.Q6J("ngIf",1==e.IsUnusedLedger),v.xp6(1),v.Q6J("ngIf",0==e.IsUnusedLedger)}}function ri(e,t){1&e&&(v.TgZ(0,"span",138),v._uU(1,"Group"),v.qZA())}function oi(e,t){1&e&&(v.TgZ(0,"span",138),v._uU(1,"Ledger"),v.qZA())}function ai(e,t){if(1&e&&(v.TgZ(0,"span"),v._uU(1),v.ALo(2,"indianCurrency"),v.qZA()),2&e){const e=v.oxw(2).$implicit;v.xp6(1),v.Oqu(v.lcZ(2,1,e.drAmountSum))}}function li(e,t){1&e&&v._UZ(0,"span")}function si(e,t){if(1&e&&(v.TgZ(0,"span"),v._uU(1),v.ALo(2,"indianCurrency"),v.qZA()),2&e){const e=v.oxw(2).$implicit;v.xp6(1),v.Oqu(v.lcZ(2,1,e.crAmountSum))}}function ci(e,t){1&e&&v._UZ(0,"span")}function di(e,t){if(1&e&&(v.TgZ(0,"span"),v._uU(1),v.ALo(2,"indianCurrency"),v.qZA()),2&e){const e=v.oxw(2).$implicit;v.xp6(1),v.Oqu(v.lcZ(2,1,e.balAmountSum))}}function ui(e,t){1&e&&v._UZ(0,"span")}function gi(e,t){if(1&e&&(v.TgZ(0,"a",140),v._uU(1),v.qZA()),2&e){const e=t.index;v.s9C("href",t.$implicit.src,v.LSH),v.xp6(1),v.hij(" image",e+1," ")}}function hi(e,t){if(1&e&&(v.TgZ(0,"div"),v.YNc(1,gi,2,2,"a",139),v.qZA()),2&e){const e=v.oxw(2).$implicit;v.xp6(1),v.Q6J("ngForOf",e.Uploadimg)}}function pi(e,t){1&e&&(v.TgZ(0,"span",141),v._uU(1,"Active"),v.qZA())}function fi(e,t){1&e&&(v.TgZ(0,"span",142),v._uU(1,"InActive"),v.qZA())}function mi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",144),v.TgZ(1,"a",147),v.NdJ("click",function(){v.CHM(e);const t=v.oxw(3).$implicit;return v.oxw(3).OpenTrialBalance(t.UIDN)}),v._uU(2,"Open Trial Balance"),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(6);v.xp6(1),v.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Zi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"li",144),v.TgZ(1,"a",150),v.NdJ("clickAllowed",function(){v.CHM(e);const t=v.oxw(3).$implicit;return v.oxw(3).companyLedgerService.delete(t.UIDN)}),v._uU(2," Delete "),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(6);v.xp6(1),v.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Ti(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"ul",143),v.TgZ(1,"li",144),v.TgZ(2,"a",145),v.NdJ("click",function(){v.CHM(e);const t=v.oxw(2).$implicit;return v.oxw(3).routingScroll(t.UIDN,"")}),v._uU(3," Edit "),v.qZA(),v.qZA(),v.YNc(4,mi,3,2,"li",146),v.TgZ(5,"li",144),v.TgZ(6,"a",147),v.NdJ("click",function(){v.CHM(e);const t=v.oxw(2).$implicit;return v.oxw(3).LedgerHistory(t,1)}),v._uU(7,"Ledger's Trial Balance"),v.qZA(),v.qZA(),v.TgZ(8,"li",144),v.TgZ(9,"a",148),v.NdJ("click",function(){v.CHM(e);const t=v.oxw(2).$implicit;return v.oxw(3).routingScroll(t.UIDN,!0)}),v._uU(10," Add Group "),v.qZA(),v.qZA(),v.TgZ(11,"li",144),v.TgZ(12,"a",149),v.NdJ("click",function(){v.CHM(e);const t=v.oxw(2).$implicit;return v.oxw(3).routingScroll(t.UIDN,!1)}),v._uU(13," Add Ledger "),v.qZA(),v.qZA(),v.YNc(14,Zi,3,2,"li",146),v.qZA()}if(2&e){const e=v.oxw(2).$implicit,t=v.oxw(3);v.xp6(2),v.Q6J("SignupId",t.SignupId)("UserId",t.UserId),v.xp6(2),v.Q6J("ngIf",1==e.IsGrp),v.xp6(2),v.Q6J("SignupId",t.SignupId)("UserId",t.UserId),v.xp6(3),v.Q6J("hidden",0==e.IsGrp)("SignupId",t.SignupId)("UserId",t.UserId),v.xp6(3),v.Q6J("hidden",0==e.IsGrp)("SignupId",t.SignupId)("UserId",t.UserId),v.xp6(2),v.Q6J("ngIf",null==e.RS||""==e.RS)}}function Ai(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"tr",127),v.NdJ("keydown.enter",function(){v.CHM(e);const t=v.oxw().$implicit;return v.oxw(3).editOnArrowEvent(t.UIDN,"")})("keydown.arrowdown",function(){v.CHM(e);const t=v.oxw().index;return v.oxw(3).companyLedgerService.arrowDownEvent(t+151)})("keydown.arrowup",function(){v.CHM(e);const t=v.oxw().index;return v.oxw(3).companyLedgerService.arrowUpEvent(t+149)}),v.TgZ(1,"td"),v.TgZ(2,"div",120),v.TgZ(3,"input",128),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw().$implicit.Ick=t})("change",function(t){v.CHM(e);const i=v.oxw().$implicit;return v.oxw(3).selectSinglechange(t,i.UIDN)}),v.qZA(),v._UZ(4,"label",129),v.qZA(),v.qZA(),v.TgZ(5,"td"),v._uU(6),v.qZA(),v.TgZ(7,"td"),v._uU(8),v.qZA(),v.TgZ(9,"td"),v.YNc(10,ri,2,0,"span",130),v.YNc(11,oi,2,0,"span",130),v.qZA(),v.TgZ(12,"td"),v._uU(13),v.ALo(14,"indianCurrency"),v.qZA(),v.TgZ(15,"td"),v._uU(16),v.ALo(17,"indianCurrency"),v.qZA(),v.TgZ(18,"td"),v.YNc(19,ai,3,3,"span",5),v.YNc(20,li,1,0,"span",5),v.qZA(),v.TgZ(21,"td"),v.YNc(22,si,3,3,"span",5),v.YNc(23,ci,1,0,"span",5),v.qZA(),v.TgZ(24,"td"),v.YNc(25,di,3,3,"span",5),v.YNc(26,ui,1,0,"span",5),v.qZA(),v.TgZ(27,"td"),v.YNc(28,hi,2,1,"div",5),v.qZA(),v.TgZ(29,"td"),v.YNc(30,pi,2,0,"span",131),v.YNc(31,fi,2,0,"span",132),v.qZA(),v.TgZ(32,"td",133),v.TgZ(33,"div",134),v.TgZ(34,"button",135),v._UZ(35,"i",136),v.qZA(),v.YNc(36,Ti,15,12,"ul",137),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(),t=e.index,i=e.$implicit;v.s9C("tabindex",t+150),v.xp6(3),v.MGl("id","item_",t,""),v.Q6J("checked",i.Ick)("ngModel",i.Ick),v.xp6(1),v.MGl("for","item_",t,""),v.xp6(1),v.Udp("padding-left",15*i.Level,"px"),v.ekj("boldfont",1==i.IsGrp),v.xp6(1),v.hij(" ",i.LN," "),v.xp6(2),v.Oqu(i.Cat),v.xp6(2),v.Q6J("ngIf",1==i.IsGrp),v.xp6(1),v.Q6J("ngIf",0==i.IsGrp),v.xp6(2),v.Oqu(v.lcZ(14,24,i.OB)),v.xp6(3),v.Oqu(v.lcZ(17,26,i.CB)),v.xp6(3),v.Q6J("ngIf",null!=i.drAmountSum),v.xp6(1),v.Q6J("ngIf",null==i.drAmountSum),v.xp6(2),v.Q6J("ngIf",null!=i.crAmountSum),v.xp6(1),v.Q6J("ngIf",null==i.crAmountSum),v.xp6(2),v.Q6J("ngIf",null!=i.balAmountSum),v.xp6(1),v.Q6J("ngIf",null==i.balAmountSum),v.xp6(2),v.Q6J("ngIf",null!=i.Uploadimg&&i.Uploadimg.length>0),v.xp6(2),v.Q6J("ngIf",1==i.St),v.xp6(1),v.Q6J("ngIf",0==i.St)}}function vi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"tr"),v.TgZ(1,"td"),v.TgZ(2,"a",153),v.NdJ("click",function(){const t=v.CHM(e).$implicit;return v.oxw(6).openTransaction(t.VType,t.VId,t.BId,!1)}),v._uU(3),v.qZA(),v.qZA(),v.TgZ(4,"td"),v._uU(5),v.qZA(),v.TgZ(6,"td"),v._uU(7),v.qZA(),v.TgZ(8,"td"),v._uU(9),v.ALo(10,"indianCurrency"),v.qZA(),v.TgZ(11,"td"),v._UZ(12,"dateformatter",154),v.qZA(),v.TgZ(13,"td"),v._uU(14),v.qZA(),v.TgZ(15,"td"),v._uU(16),v.ALo(17,"indianCurrency"),v.qZA(),v.TgZ(18,"td"),v._uU(19),v.ALo(20,"indianCurrency"),v.qZA(),v.TgZ(21,"td"),v._uU(22),v.qZA(),v.TgZ(23,"td"),v._uU(24),v.qZA(),v.TgZ(25,"td"),v._UZ(26,"dateformatter",155),v.qZA(),v.qZA()}if(2&e){const e=t.$implicit;v.xp6(3),v.hij(" ",e.VNo," "),v.xp6(2),v.hij(" ",e.VType," "),v.xp6(2),v.hij(" ",e.ParentGroupLedger," "),v.xp6(2),v.hij(" ",v.lcZ(10,11,e.OBalance)," "),v.xp6(3),v.s9C("dateValue",e.VDate),v.xp6(2),v.hij(" ",e.Narr," "),v.xp6(2),v.hij(" ",v.lcZ(17,13,e.VDrAmt)," "),v.xp6(3),v.hij(" ",v.lcZ(20,15,e.VCrAmt)," "),v.xp6(3),v.hij(" ",e.ActionModule," "),v.xp6(2),v.hij(" ",e.UserName," "),v.xp6(2),v.s9C("dateValue",e.MD)}}function xi(e,t){if(1&e&&(v.ynx(0),v.TgZ(1,"tr"),v.TgZ(2,"td",151),v.TgZ(3,"table",152),v.TgZ(4,"tr"),v.TgZ(5,"th"),v._uU(6,"VoucherNo"),v.qZA(),v.TgZ(7,"th"),v._uU(8,"VoucherType"),v.qZA(),v.TgZ(9,"th"),v._uU(10,"Parent"),v.qZA(),v.TgZ(11,"th"),v._uU(12,"OpeningBalance"),v.qZA(),v.TgZ(13,"th"),v._uU(14,"VoucherDate"),v.qZA(),v.TgZ(15,"th"),v._uU(16,"Narration"),v.qZA(),v.TgZ(17,"th"),v._uU(18,"DrAmount"),v.qZA(),v.TgZ(19,"th"),v._uU(20,"CrAmount"),v.qZA(),v.TgZ(21,"th"),v._uU(22,"ActionModule"),v.qZA(),v.TgZ(23,"th"),v._uU(24,"Modified-By"),v.qZA(),v.TgZ(25,"th"),v._uU(26,"Modified/Created DateTime"),v.qZA(),v.qZA(),v.YNc(27,vi,27,17,"tr",125),v.qZA(),v.qZA(),v.qZA(),v.BQk()),2&e){const e=v.oxw(2).$implicit;v.xp6(27),v.Q6J("ngForOf",e.Remarks)}}function Ii(e,t){if(1&e&&(v.ynx(0),v.YNc(1,xi,28,1,"ng-container",5),v.BQk()),2&e){const e=v.oxw().$implicit;v.xp6(1),v.Q6J("ngIf",null!=e.Remarks&&e.Remarks.length>0)}}function Li(e,t){if(1&e&&(v.ynx(0),v.YNc(1,Ai,37,28,"tr",126),v.YNc(2,Ii,2,1,"ng-container",5),v.BQk()),2&e){const e=t.$implicit,i=v.oxw(3);v.xp6(1),v.Q6J("ngIf",1==e.IsGrp&&1==i.OnlyGroups||0==i.OnlyGroups),v.xp6(1),v.Q6J("ngIf",1==e.Expd)}}function wi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"table",118),v.TgZ(1,"thead",119),v.TgZ(2,"tr"),v.TgZ(3,"th"),v.TgZ(4,"div",120),v.TgZ(5,"input",121),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw(2).selectedAll=t})("change",function(t){return v.CHM(e),v.oxw(2).selectAllchange(t)}),v.qZA(),v._UZ(6,"label",122),v.qZA(),v.qZA(),v.TgZ(7,"th"),v._uU(8,"Ledger "),v.qZA(),v.TgZ(9,"th"),v._uU(10,"Category"),v.qZA(),v.TgZ(11,"th"),v._uU(12,"Ledger Type"),v.qZA(),v.TgZ(13,"th"),v._uU(14,"Opening Balance"),v.qZA(),v.TgZ(15,"th"),v._uU(16,"Current Balance"),v.qZA(),v.TgZ(17,"th"),v._uU(18,"Dabit "),v.qZA(),v.TgZ(19,"th"),v._uU(20,"Credit "),v.qZA(),v.TgZ(21,"th"),v._uU(22,"Balance"),v.qZA(),v.TgZ(23,"th"),v._uU(24,"Image"),v.qZA(),v.TgZ(25,"th"),v._uU(26,"Status"),v.qZA(),v.TgZ(27,"th"),v._uU(28,"Actions"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(29,"tbody",123,124),v.YNc(31,Li,3,2,"ng-container",125),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(2);v.xp6(5),v.Q6J("checked",e.selectedAll)("ngModel",e.selectedAll),v.xp6(26),v.Q6J("ngForOf",e.ledgerData)}}function bi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",156),v.TgZ(1,"table",157),v.TgZ(2,"thead",119),v.TgZ(3,"tr"),v.TgZ(4,"th"),v.TgZ(5,"div",120),v.TgZ(6,"input",121),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw(2).selectedAll=t})("change",function(t){return v.CHM(e),v.oxw(2).selectAllchange(t)}),v.qZA(),v._UZ(7,"label",122),v.qZA(),v.qZA(),v.TgZ(8,"th"),v._uU(9,"Ledger "),v.qZA(),v.TgZ(10,"th"),v._uU(11,"Category"),v.qZA(),v.TgZ(12,"th"),v._uU(13,"Ledger Type"),v.qZA(),v.TgZ(14,"th"),v._uU(15,"Opening Balance"),v.qZA(),v.TgZ(16,"th"),v._uU(17,"Current Balance"),v.qZA(),v.TgZ(18,"th"),v._uU(19,"Image"),v.qZA(),v.TgZ(20,"th"),v._uU(21,"Status"),v.qZA(),v.TgZ(22,"th"),v._uU(23,"Actions"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw(2);v.xp6(6),v.Q6J("checked",e.selectedAll)("ngModel",e.selectedAll)}}function Ci(e,t){if(1&e&&(v.TgZ(0,"div",103),v.YNc(1,ni,20,4,"div",104),v.TgZ(2,"div"),v.YNc(3,wi,32,3,"table",105),v.qZA(),v.YNc(4,bi,24,2,"div",106),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.Q6J("ngIf",0==(e.companyLedgerService.isMobile||e.companyLedgerService.IsMobileview)),v.xp6(2),v.Q6J("ngIf",e.ledgerData.length>0),v.xp6(1),v.Q6J("ngIf",e.ledgerData.length>0)}}function qi(e,t){1&e&&(v.TgZ(0,"span",138),v._uU(1,"Group"),v.qZA())}function Si(e,t){1&e&&(v.TgZ(0,"span",138),v._uU(1,"Ledger"),v.qZA())}function Mi(e,t){if(1&e&&(v.TgZ(0,"a",173),v._UZ(1,"i",174),v._uU(2,"Group "),v.qZA()),2&e){const e=v.oxw().$implicit,t=v.oxw(2);v.MGl("rLink","/transactions/ledgeradd/",e.UIDN,"/true"),v.Q6J("SignupId",t.SignupId)("UserId",t.UserId)}}function yi(e,t){if(1&e&&(v.TgZ(0,"a",175),v._UZ(1,"i",174),v._uU(2,"Ledger "),v.qZA()),2&e){const e=v.oxw().$implicit,t=v.oxw(2);v.MGl("rLink","/transactions/ledgeradd/",e.UIDN,"/false"),v.Q6J("SignupId",t.SignupId)("UserId",t.UserId)}}function Ni(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"ion-card",163),v.NdJ("click",function(){const t=v.CHM(e).$implicit;return t.Ick=!t.Ick}),v.TgZ(1,"div"),v.TgZ(2,"ion-row"),v.TgZ(3,"ion-col"),v.TgZ(4,"div",164),v.TgZ(5,"h5"),v._uU(6),v.qZA(),v.qZA(),v.qZA(),v.TgZ(7,"ion-col",165),v.YNc(8,qi,2,0,"span",130),v.YNc(9,Si,2,0,"span",130),v.qZA(),v.qZA(),v.TgZ(10,"ion-row"),v.TgZ(11,"ion-col",166),v.YNc(12,Mi,3,3,"a",167),v.YNc(13,yi,3,3,"a",168),v.qZA(),v.TgZ(14,"ion-col",165),v.TgZ(15,"a",169),v.NdJ("click",function(){const t=v.CHM(e).$implicit;return v.oxw(2).routingScroll(t.UIDN,"")}),v._UZ(16,"ion-icon",170),v.qZA(),v.TgZ(17,"a",171),v.NdJ("clickAllowed",function(){const t=v.CHM(e).$implicit;return v.oxw(2).companyLedgerService.delete(t.UIDN)}),v._UZ(18,"ion-icon",172),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=t.$implicit,i=v.oxw(2);v.ekj("rowselected",e.Ick),v.xp6(4),v.Udp("padding-left",5*e.Level,"px"),v.ekj("boldfont",1==e.IsGrp),v.xp6(2),v.Oqu(e.LN),v.xp6(2),v.Q6J("ngIf",1==e.IsGrp),v.xp6(1),v.Q6J("ngIf",0==e.IsGrp),v.xp6(3),v.Q6J("ngIf",1==e.IsGrp),v.xp6(1),v.Q6J("ngIf",1==e.IsGrp),v.xp6(2),v.Q6J("SignupId",i.SignupId)("UserId",i.UserId),v.xp6(2),v.Q6J("SignupId",i.SignupId)("UserId",i.UserId)}}function Di(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",158),v.TgZ(1,"ion-content"),v.TgZ(2,"ion-refresher",159),v.NdJ("ionRefresh",function(t){return v.CHM(e),v.oxw().doRefresh(t)}),v._UZ(3,"ion-refresher-content",160),v.qZA(),v.TgZ(4,"ion-virtual-scroll",161),v.YNc(5,Ni,19,15,"ion-card",162),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw();v.xp6(4),v.Q6J("items",e.ledgerData)}}function _i(e,t){1&e&&(v.TgZ(0,"ion-card",177),v.TgZ(1,"ion-row"),v.TgZ(2,"ion-col"),v._UZ(3,"ion-skeleton-text",178),v.qZA(),v.TgZ(4,"ion-col",179),v._UZ(5,"ion-skeleton-text",178),v.qZA(),v.qZA(),v.TgZ(6,"ion-row"),v.TgZ(7,"ion-col",166),v._UZ(8,"ion-skeleton-text",178),v.qZA(),v.TgZ(9,"ion-col",179),v._UZ(10,"ion-skeleton-text",178),v.qZA(),v.qZA(),v.qZA())}function Ui(e,t){if(1&e&&(v.TgZ(0,"div"),v.YNc(1,_i,11,0,"ion-card",176),v.qZA()),2&e){const e=v.oxw();v.xp6(1),v.Q6J("ngForOf",e.companyLedgerService.noImageRepeat)}}function ki(e,t){1&e&&(v.TgZ(0,"tr"),v.TgZ(1,"td",182),v._UZ(2,"ion-skeleton-text",181),v.qZA(),v.TgZ(3,"td"),v._UZ(4,"ion-skeleton-text",181),v.qZA(),v.TgZ(5,"td"),v._UZ(6,"ion-skeleton-text",181),v.qZA(),v.TgZ(7,"td"),v._UZ(8,"ion-skeleton-text",181),v.qZA(),v.TgZ(9,"td"),v._UZ(10,"ion-skeleton-text",181),v.qZA(),v.TgZ(11,"td"),v._UZ(12,"ion-skeleton-text",181),v.qZA(),v.TgZ(13,"td"),v._UZ(14,"ion-skeleton-text",181),v.qZA(),v.TgZ(15,"td",133),v._UZ(16,"ion-skeleton-text",181),v.qZA(),v.qZA())}function Ji(e,t){if(1&e&&(v.TgZ(0,"div"),v.TgZ(1,"table",180),v.TgZ(2,"thead",119),v.TgZ(3,"tr"),v.TgZ(4,"th"),v._UZ(5,"ion-skeleton-text",181),v.qZA(),v.TgZ(6,"th"),v._UZ(7,"ion-skeleton-text",181),v.qZA(),v.TgZ(8,"th"),v._UZ(9,"ion-skeleton-text",181),v.qZA(),v.TgZ(10,"th"),v._UZ(11,"ion-skeleton-text",181),v.qZA(),v.TgZ(12,"th"),v._UZ(13,"ion-skeleton-text",181),v.qZA(),v.TgZ(14,"th"),v._UZ(15,"ion-skeleton-text",181),v.qZA(),v.TgZ(16,"th"),v._UZ(17,"ion-skeleton-text",181),v.qZA(),v.TgZ(18,"th"),v._UZ(19,"ion-skeleton-text",181),v.qZA(),v.qZA(),v.qZA(),v.TgZ(20,"tbody",123),v.YNc(21,ki,17,0,"tr",125),v.qZA(),v.qZA(),v.qZA()),2&e){const e=v.oxw();v.xp6(21),v.Q6J("ngForOf",e.companyLedgerService.noImageRepeat)}}function Vi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",183),v.TgZ(1,"div",184),v.TgZ(2,"div",185),v.NdJ("click",function(){return v.CHM(e),v.oxw().exportheader(1)}),v._UZ(3,"i",186),v.qZA(),v.TgZ(4,"div",187),v.NdJ("click",function(){return v.CHM(e),v.oxw().exportheader(2)}),v._UZ(5,"i",188),v.qZA(),v.TgZ(6,"div",189),v.NdJ("click",function(){return v.CHM(e),v.oxw().toggleExcelImport()}),v._UZ(7,"i",190),v.qZA(),v.TgZ(8,"div",191),v.NdJ("click",function(){return v.CHM(e),v.oxw().exportheader(3)}),v._UZ(9,"i",192),v.qZA(),v.TgZ(10,"div",193),v._UZ(11,"i",194),v.qZA(),v.TgZ(12,"button",195),v.TgZ(13,"span"),v._uU(14,"L"),v.qZA(),v.qZA(),v.TgZ(15,"button",196),v.TgZ(16,"span"),v._uU(17,"G"),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw();v.xp6(12),v.Q6J("SignupId",e.SignupId)("UserId",e.UserId),v.xp6(3),v.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Ri(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",183),v.TgZ(1,"div",184),v.TgZ(2,"button",197),v.NdJ("click",function(){return v.CHM(e),v.oxw().UnusedLedger()}),v._UZ(3,"i",198),v.qZA(),v.TgZ(4,"div",185),v.NdJ("click",function(){return v.CHM(e),v.oxw().exportheader(1)}),v._UZ(5,"i",186),v.qZA(),v.TgZ(6,"div",187),v.NdJ("click",function(){return v.CHM(e),v.oxw().exportheader(2)}),v._UZ(7,"i",188),v.qZA(),v.TgZ(8,"div",199),v.NdJ("click",function(){return v.CHM(e),v.oxw().exportheader(3)}),v._UZ(9,"i",192),v.qZA(),v.TgZ(10,"button",200),v.NdJ("click",function(){return v.CHM(e),v.oxw().MultipleVoucherDelete()}),v._UZ(11,"i",201),v.qZA(),v.TgZ(12,"div",193),v._UZ(13,"i",194),v.qZA(),v.TgZ(14,"button",195),v.TgZ(15,"span"),v._uU(16,"L"),v.qZA(),v.qZA(),v.TgZ(17,"button",196),v.TgZ(18,"span"),v._uU(19,"G"),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw();v.xp6(14),v.Q6J("SignupId",e.SignupId)("UserId",e.UserId),v.xp6(3),v.Q6J("SignupId",e.SignupId)("UserId",e.UserId)}}function Qi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",202),v.TgZ(1,"div",203),v.TgZ(2,"div",14),v.TgZ(3,"h4",15),v._uU(4),v.qZA(),v.TgZ(5,"i",204),v.NdJ("click",function(){v.CHM(e);const t=v.oxw();return t.filterService.changeFilterWithbottomfilter(!0,!0,"Account List"),t.onTransactionSubmit(null)}),v.qZA(),v.qZA(),v.TgZ(6,"div",18),v.TgZ(7,"app-account-addedit",205),v.NdJ("TransactionredirectAction",function(t){return v.CHM(e),v.oxw().onTransactionSubmit(t)}),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw();v.xp6(4),v.Oqu(e.VoucherType),v.xp6(3),v.Q6J("TransactionredirectOnCancel",!1)("IsDuplicate",e.Duplicate)("VoucherType",e.VoucherType)("VoucherId",e.VoucherId)}}function Fi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div"),v.TgZ(1,"strong",206),v._uU(2,"To Date :"),v.qZA(),v.TgZ(3,"input",207,208),v.NdJ("selected",function(t){return v.CHM(e),v.oxw().onToDateSelect(t)}),v.qZA(),v.qZA()}if(2&e){const e=v.oxw();v.xp6(3),v.Q6J("startDate",e._Todate)}}function Hi(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",202),v.TgZ(1,"div",13),v.TgZ(2,"div",14),v.TgZ(3,"h4",15),v._uU(4,"Ledger History"),v.qZA(),v.TgZ(5,"button",16),v.NdJ("click",function(){return v.CHM(e),v.oxw().onLedgHistoryHide()}),v.TgZ(6,"span",17),v._uU(7,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(8,"div",18),v._UZ(9,"app-ledgerhistory",209),v.qZA(),v._UZ(10,"div",67),v.qZA(),v.qZA()}if(2&e){const e=v.oxw();v.xp6(9),v.Q6J("LedgId",e._LedgerId)("IsCallasPopup",!0)}}function Ei(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"a"),v._uU(1),v.qZA(),v.TgZ(2,"a",92),v.TgZ(3,"i",93),v.NdJ("click",function(){const t=v.CHM(e).item;return v.oxw().OpenLedgerHistoryPopUp(t.UIDN)}),v.qZA(),v.qZA()}if(2&e){const e=t.item;v.xp6(1),v.Oqu(e.LN),v.xp6(1),v.Q6J("hidden",1==e.IsGrp)}}function Oi(e,t){1&e&&v._uU(0),2&e&&v.hij(" ",t.item.LN," ")}function Pi(e,t){if(1&e&&(v.TgZ(0,"a"),v._uU(1),v.qZA(),v.TgZ(2,"a",211),v._UZ(3,"i",212),v.qZA()),2&e){const e=t.item,i=v.oxw(2);v.xp6(1),v.Oqu(e.LN),v.xp6(1),v.Q6J("SignupId",i.SignupId)("UserId",i.UserId)}}function $i(e,t){1&e&&(v.YNc(0,Oi,1,1,"ng-template",210),v.YNc(1,Pi,4,3,"ng-template",39))}function Gi(e,t){if(1&e&&(v.TgZ(0,"div",220),v._uU(1," Total "),v.TgZ(2,"b"),v._uU(3),v.qZA(),v._uU(4," inquiry(s) imported And We have found total "),v.TgZ(5,"b"),v._uU(6),v.qZA(),v._uU(7," duplicate inquiry(s). You may download already existed records "),v.qZA()),2&e){const e=v.oxw(2);v.xp6(3),v.Oqu(e.importeddataAPI.length-e.RepeatcontactFromAPI.length),v.xp6(3),v.Oqu(e.RepeatcontactFromAPI.length)}}function Bi(e,t){1&e&&(v.TgZ(0,"thead",119),v.TgZ(1,"tr"),v.TgZ(2,"th",221),v._uU(3,"COMMENTS"),v.qZA(),v.TgZ(4,"th",222),v._uU(5,"LEDGER NAME"),v.qZA(),v.TgZ(6,"th",223),v._uU(7,"PARENT LEDGER NAME"),v.qZA(),v.TgZ(8,"th",222),v._uU(9,"OPENING BALANCE"),v.qZA(),v.TgZ(10,"th",222),v._uU(11,"LEDGER TYPE"),v.qZA(),v.TgZ(12,"th",222),v._uU(13,"AFFECTEDDATE"),v.qZA(),v.TgZ(14,"th",222),v._uU(15,"AADHAR NO"),v.qZA(),v.TgZ(16,"th",222),v._uU(17,"CUSTOMER FULL NAME"),v.qZA(),v.TgZ(18,"th",222),v._uU(19,"CUSTOMER ADDRESS"),v.qZA(),v.TgZ(20,"th",222),v._uU(21,"CONTACT NO"),v.qZA(),v.TgZ(22,"th",222),v._uU(23,"EMAIL"),v.qZA(),v.TgZ(24,"th",222),v._uU(25,"PAN NO"),v.qZA(),v.qZA(),v.qZA())}function Yi(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"tr"),v.TgZ(2,"td",224),v._uU(3),v.qZA(),v.TgZ(4,"td"),v.TgZ(5,"input",225),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.LN=t}),v.qZA(),v.qZA(),v.TgZ(6,"td"),v.TgZ(7,"ng-select",226,227),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.PI=t}),v.qZA(),v.qZA(),v.TgZ(9,"td"),v.TgZ(10,"input",228),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.OB=t}),v.qZA(),v.qZA(),v.TgZ(11,"td"),v.TgZ(12,"input",225),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.LT=t}),v.qZA(),v.qZA(),v.TgZ(13,"td"),v.TgZ(14,"input",229,230),v.NdJ("selected",function(t){const i=v.CHM(e),n=i.index,r=i.$implicit;return v.oxw(2).AffectedDateSelect(t,n,r)}),v.qZA(),v.qZA(),v.TgZ(16,"td"),v.TgZ(17,"input",225),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.AdharNo=t}),v.qZA(),v.qZA(),v.TgZ(18,"td"),v.TgZ(19,"input",225),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.FullNm=t}),v.qZA(),v.qZA(),v.TgZ(20,"td"),v.TgZ(21,"input",225),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.Addr=t}),v.qZA(),v.qZA(),v.TgZ(22,"td"),v.TgZ(23,"input",225),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.CNO=t}),v.qZA(),v.qZA(),v.TgZ(24,"td"),v.TgZ(25,"input",225),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.Eml=t}),v.qZA(),v.qZA(),v.TgZ(26,"td"),v.TgZ(27,"input",225),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(2).ValidateImportRow(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.PanNo=t}),v.qZA(),v.qZA(),v.qZA(),v.BQk()}if(2&e){const e=t.$implicit,i=t.index,n=v.oxw(2);v.xp6(1),v.ekj("negative",e.invalidProp)("positive",e.RepeatContactProp),v.xp6(2),v.hij(" ",e.comments," "),v.xp6(2),v.MGl("name","LN_",i,""),v.MGl("id","LN_",i,""),v.Q6J("ngModel",e.LN),v.xp6(2),v.MGl("id","PN_",i,""),v.MGl("name","PN_",i,""),v.Q6J("items",n.GroupLedgers)("ngModel",e.PI)("loading",n.companyLedgerService.loading),v.xp6(3),v.MGl("name","OB_",i,""),v.MGl("id","OB_",i,""),v.Q6J("ngModel",e.OB),v.xp6(2),v.MGl("name","LT_",i,""),v.MGl("id","LT_",i,""),v.Q6J("ngModel",e.LT),v.xp6(2),v.MGl("name","AffDt_",i,""),v.MGl("id","AffDt_",i,""),v.Q6J("startDate",e.AffDt),v.xp6(3),v.MGl("name","AdharNo_",i,""),v.MGl("id","AdharNo_",i,""),v.Q6J("ngModel",e.AdharNo),v.xp6(2),v.MGl("name","FullNm_",i,""),v.MGl("id","FullNm_",i,""),v.Q6J("ngModel",e.FullNm),v.xp6(2),v.MGl("name","Addr_",i,""),v.MGl("id","Addr_",i,""),v.Q6J("ngModel",e.Addr),v.xp6(2),v.MGl("name","CNO_",i,""),v.MGl("id","CNO_",i,""),v.Q6J("ngModel",e.CNO),v.xp6(2),v.MGl("name","Eml_",i,""),v.MGl("id","Eml_",i,""),v.Q6J("ngModel",e.Eml),v.xp6(2),v.MGl("name","PanNo_",i,""),v.MGl("id","PanNo_",i,""),v.Q6J("ngModel",e.PanNo)}}function ji(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",213),v.TgZ(1,"h5"),v._uU(2),v.qZA(),v.YNc(3,Gi,8,2,"div",214),v.TgZ(4,"virtual-scroller",215,216),v.NdJ("vsUpdate",function(){return v.CHM(e),v.oxw().changeDetectorRef.detectChanges()}),v.TgZ(6,"table",217),v.YNc(7,Bi,26,0,"thead",218),v.TgZ(8,"tbody",123,124),v.YNc(10,Yi,28,40,"ng-container",219),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.MAs(5),t=v.oxw(),i=v.MAs(138);v.xp6(2),v.HOy("Total Records: ",t.importeddataAPI.length," | Valid Records:",t.importeddataAPI.length-t.inValidEntry," | Invalid Records: ",t.inValidEntry," | Total Unique Records: ",t.importeddataAPI.length-t.uniqueEntry," "),v.xp6(1),v.Q6J("ngIf",t.RepeatcontactFromAPI.length>0),v.xp6(1),v.Q6J("executeRefreshOutsideAngularZone",!0)("items",t.importeddataAPI)("parentScroll",i),v.xp6(3),v.Q6J("ngIf",t.importeddataAPI.length>0),v.xp6(3),v.Q6J("ngForOf",e.viewPortItems)("ngForTrackBy",t.ImportTrackByFunction)}}const Ki=function(e){return{"is-invalid":e}};let zi=(()=>{class e{constructor(e,t,i,n,r,o,a,l,s,c,u){this.changeDetectorRef=e,this.filterService=t,this.companyLedgerService=i,this.natureofTranService=n,this.LedgerhisService=r,this.inventoryService=o,this.route=a,this.router=l,this.alertService=s,this.location=c,this.alert=u,this.popupwindow="",this.isList=!0,this.isCollapsed=!0,this.isScrollEnabled=!0,this.OnlyGroups=!1,this.showTrailBal=!1,this.OnlyLedgers=!1,this.httpfunction=new m.r,this.ledgerData=[],this.isNativeApp=!1,this._sgId=0,this.selectedAll=!1,this.isMultipleLedgerDelete=!1,this.noDataImage=!1,this.GroupLedgers=[],this.GroupLedgersWithoutSelectedItem=[],this.isRoundOffSelected=!1,this.isResevredgroup=!1,this.isIndirectIncome=!1,this.isFixedAssets=!1,this.IsStockLedger=!1,this.IsUnusedLedger=!1,this.TotalUnusedLEdger=0,this.Filter=new Rt.Jw,this._chkOpening=!1,this._LedgerId=0,this.drAmountSum=0,this.crAmountSum=0,this.balAmountSum=0,this.IsImportHidden=!0,this.isSubmited=!1,this.importeddataAPI=[],this.inValidEntry=[],this.uniqueEntry=[],this.RepeatcontactFromAPI=[],this.showLedegrHistoryModal=!1,this.showTransactionModal=!1,this.VoucherType="",this.VoucherId=0,this.currentScrollPosition=0,this.Duplicate=!1,this.SignupId=this.companyLedgerService.getSignupId,this.UserId=this.companyLedgerService.GetUserId,this.companyLedgerService.GetAlldatawithsub(!0),this.companyLedgerService.isGetSubscribe=!0,this.subscription=this.companyLedgerService.resultObs.subscribe(()=>{if(this.ledgerData=JSON.parse(JSON.stringify(this.companyLedgerService.result)),this.GroupLedgers=this.companyLedgerService.result.filter(e=>1==e.IsGrp&&2!=e.St),""!=this.httpfunction.getStorage("_filterData")){let t=JSON.parse(this.httpfunction.getStorage("_filterData"));if(null!=t){var e=t.find(e=>"CompanyLedger"==e.Module);(null!=e||null!=e)&&(this.currentLedger=e.SearchFilter,this.FilterData())}}}),this.companyLedgerService.singleresult=new d.dJ,this.parentLedger=null,this.companyLedgerService.singleresult.St=kt.D.Active,this.companyLedgerService.singleresult.PI=0,this.companyLedgerService.singleresult.CI=this.companyLedgerService.getCompanyId,this.companyLedgerService.singleresult.Cat="",this._Todate=new Date,this.companyLedgerService.ExportColumn=[{title:"Ledger",dataKey:"LN",size:260},{title:"Category",dataKey:"Cat",size:100},{title:"Opening Balance",dataKey:"OB",size:100},{title:"Current Balance",dataKey:"CB",size:100}],this.companyLedgerService.ExportName="CompanyLedger_List",this.companyLedgerService.ExportCompanyName=this.companyLedgerService.getCompanyData.CN}onPopState(e){this.isList||(this.isList=!this.isList)}cancel(){this.httpfunction.scrolltop(),this.isScrollEnabled=!0}doRefresh(e){this.filterService.updatedata(!0,"Chart Of Accounts"),this.companyLedgerService.refreshEvent=e.target,this.FilterData()}ngOnInit(){setTimeout(()=>{this.companyLedgerService.arrowDownEvent(150)},800),setTimeout(()=>{this.filterService.changeFilterWithbottomfilter(!1,!1,"Chart Of Accounts"),this.companyLedgerService.arrowDownEvent(this.companyLedgerService.selectedRowIndex)},200),this.SignupId=this.companyLedgerService.getSignupId,this.UserId=this.companyLedgerService.GetUserId,this.httpfunction.scrolltop(),this.isScrollEnabled=!0,this.companyLedgerService.refreshEvent=null,setTimeout(()=>{null!=this.searchControl&&this.searchControl.focus()},200);let e=this;if(null!=this.transactionModal&&(this.transactionModal.onEsc=function(){e.showTransactionModal=!1,e.transactionModal.hide(),document.scrollingElement.scrollTop=e.currentScrollPosition}),null!=this._LedgerHistoryModal){let e=this;this._LedgerHistoryModal.onEsc=function(){e._LedgerHistoryModal.hide(),document.scrollingElement.scrollTop=e.currentScrollPosition,this._LedgerId=0}}this.httpfunction.IsMobileview()||(document.onkeydown=this.OnKeydown.bind(this)),this.GroupLedgers=this.companyLedgerService.result.filter(e=>1==e.IsGrp&&2!=e.St)}goback(){this.location.back()}routingScroll(e,t){scrollposition=document.scrollingElement.scrollTop,this.router.navigate(""===t?["/transactions/ledgeredit/"+e]:["/transactions/ledgeradd/"+e+"/"+t])}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}showTrialBal(){this.ledgerData.forEach(e=>{this.LedgerhisService.LedgerHistoryById(e.UIDN).subscribe(t=>{e.drAmountSum=t.data.reduce((e,t)=>e+t.VDrAmt,0),e.crAmountSum=t.data.reduce((e,t)=>e+t.VCrAmt,0),e.balAmountSum=e.drAmountSum-e.crAmountSum})})}LedgerHistory(e,t){e.Expd?setTimeout(function(){e.Expd=!e.Expd},1e3):(e.Expd=!e.Expd,this.LedgerHistoryById(e,t))}LedgerHistoryById(e,t){null!=e.UIDN&&e.UIDN>0&&(this.LedgerhisService.showMessage=!1,null!=e.Remarks&&e.Remarks.length>0||this.LedgerhisService.LedgerHistoryById(e.UIDN).subscribe(i=>{1==t?(e.drAmountSum=i.data.reduce((e,t)=>e+t.VDrAmt,0),e.crAmountSum=i.data.reduce((e,t)=>e+t.VCrAmt,0),e.balAmountSum=e.drAmountSum-e.crAmountSum):e.Remarks=i.data}))}showGroupsOnly(){this.httpfunction.IsMobileview()||this.showMobileGroupsOnly()}showMobileGroupsOnly(){this.ledgerData=this.OnlyGroups?this.companyLedgerService.result.filter(null!=this.currentLedger&&this.currentLedger.UIDN>0?e=>1==e.IsGrp&&(e.UIDN==this.currentLedger.UIDN||e.ancestor.includes(this.currentLedger.UIDN.toString())):e=>1==e.IsGrp):null!=this.currentLedger&&this.currentLedger.UIDN>0?this.companyLedgerService.result.filter(e=>e.UIDN==this.currentLedger.UIDN||e.ancestor.includes(this.currentLedger.UIDN.toString())):this.companyLedgerService.result}showLedgerOnly(){this.httpfunction.IsMobileview()||this.showMobileLedgersOnly()}showMobileLedgersOnly(){this.ledgerData=this.OnlyLedgers?this.companyLedgerService.result.filter(null!=this.currentLedger&&this.currentLedger.UIDN>0?e=>0==e.IsGrp&&(e.UIDN==this.currentLedger.UIDN||e.ancestor.includes(this.currentLedger.UIDN.toString())):e=>0==e.IsGrp):null!=this.currentLedger&&this.currentLedger.UIDN>0?this.companyLedgerService.result.filter(e=>e.UIDN==this.currentLedger.UIDN||e.ancestor.includes(this.currentLedger.UIDN.toString())):this.companyLedgerService.result}FilterData(){if(window.scrollTo(0,0),null!=this.currentLedger&&this.currentLedger.UIDN>0){var e=this.companyLedgerService.result.filter(e=>e.UIDN==this.currentLedger.UIDN||e.ancestor.includes(this.currentLedger.UIDN.toString()));this.filterService.fillLocalData(e[0],"CompanyLedger")}else this.filterService.fillLocalData("","CompanyLedger");this.showMobileGroupsOnly(),document.scrollingElement.scrollTop=scrollposition,scrollposition=0,this.companyLedgerService.hidesearch()}OnKeydown(e){var t=e.key||e.keyCode;("g"==t||"F1"==t)&&e.altKey&&(this.OnlyGroups=!this.OnlyGroups),"p"==t&&e.altKey&&this.exportheader(1),"s"==t&&e.altKey&&this.exportheader(2),"e"==t&&e.altKey&&e.ctrlKey&&this.exportheader(3)}OnCancel(){this._chkOpening=!1,this._ExportLedgModal.hide()}onToDateSelect(e){this._Todate=e}exportheader(e){let t="All";null!=this.currentLedger&&null!=this.currentLedger&&(t=this.currentLedger.LN),this.companyLedgerService.filterHeader="  Ledger : "+t+" ",this.companyLedgerService.Export(e)}OnExportSubmit(){let e=new Z.p;e.chkOpening=this._chkOpening,e.Todate=this._Todate,e.CompanyId=this.companyLedgerService.getCompanyId,e.SignupId=this.companyLedgerService.getSignupId,this.companyLedgerService.page=1,this.companyLedgerService.ExportLedger(e).subscribe(e=>{var t=new Date,i=new Blob([e.data],{type:"text/xml"});(0,Jt.saveAs)(i,"LedgerExport_"+t.toISOString()+".xml")})}exportForTally(){this._ExportLedgModal.show(),this._SearchModal.hide()}openTransaction(e,t,i,n){i>0&&null!=i&&this.router.navigate(["/marketing/bookingform/"+i]),""==t&&(t=0),this.currentScrollPosition=document.scrollingElement.scrollTop,this.VoucherType=e,this.showTransactionModal=!0,this.VoucherId=t,this.Duplicate=n,this.transactionModal.show()}onTransactionSubmit(e){(null==e||e.isHide)&&(this.showTransactionModal=!1,this.transactionModal.hide()),document.scrollingElement.scrollTop=this.currentScrollPosition}OpenLedgerHistoryPopUp(e){this.currentScrollPosition=document.scrollingElement.scrollTop,this._LedgerId=e,this.showLedegrHistoryModal=!0,this._LedgerHistoryModal.show()}onLedgHistoryHide(){this.showLedegrHistoryModal=!1,this._LedgerHistoryModal.hide(),document.scrollingElement.scrollTop=this.currentScrollPosition,this._LedgerId=0}preventpopup(e){e.stopPropagation()}toggleDropdown(){$("#adv-search").dropdown("hide")}advSearchM(){this._SearchModal.show()}ClearFilter(){this.currentLedger=null,this.OnlyGroups=null,this.showTrailBal=null,this.FilterData()}editOnArrowEvent(e,t){this.routingScroll(e,t)}selectAllchange(e){this.ledgerData.forEach(function(t){t.Ick=e.target.checked});var t=this.ledgerData.filter(e=>1==e.Ick).map(e=>e.UIDN).length;this.isMultipleLedgerDelete=0!=t}selectSinglechange(e,t){const i=e.target.checked,n=e=>{this.ledgerData.filter(t=>t.PI===e).forEach(e=>{e.Ick=i,e.IsGrp&&n(e.UIDN)})},r=this.ledgerData.find(e=>e.UIDN===t);r&&(r.Ick=i,r.IsGrp&&n(r.UIDN));var o=this.ledgerData.filter(e=>1==e.Ick).length;this.isMultipleLedgerDelete=0!=o,this.selectedAll=this.companyLedgerService.result.length==o}MultipleVoucherDelete(){var e=this.ledgerData.filter(e=>1==e.Ick).map(e=>e.UIDN);e.length>0?this.httpfunction.IsMobileview()?this.alertService.showMobileConfirm("Confirm Delete","Are you sure you want to delete this record","No","Delete").then(t=>{if(null!=t&&1==t.data)for(let i=0;i<e.length;i++)this.companyLedgerService.deleteMob(e[i])}):this.alertService.showconfirm("Confirm","Are you sure you want to delete this record",["Yes","No"],null).subscribe(t=>{null!=t&&"Yes"==t.answer&&this.companyLedgerService.MultipleVoucherdelete(e).subscribe(()=>{this.FilterData();for(let i=0;i<e.length;i++){var t=this.ledgerData.findIndex(t=>t.UIDN==e[i]);t>-1&&this.ledgerData.splice(t,1)}})}):this.alertService.showError("Error","Please select atleast one record")}ChangeGroup(){var e;e=this.ledgerData.filter(e=>1==e.Ick).map(e=>e.UIDN),this.Filter.LedId=e,this.Filter.ParentLedgerId=this.parentLedger.UIDN,e.length>0?this.companyLedgerService.GroupChange(this.Filter).subscribe(e=>{if(e.data.m_Item2>0){this._modalChangeGroup.hide(),this.httpfunction.getStorage("_legData"+this.companyLedgerService.getCompanyId+"_"+this.companyLedgerService.getSignupId)&&this.httpfunction.removeItem("_legData"+this.companyLedgerService.getCompanyId+"_"+this.companyLedgerService.getSignupId);for(var t={},i=0;i<e.data.m_Item1.length;i++)null==t[e.data.m_Item1[i].PI]&&(t[e.data.m_Item1[i].PI]=[]),t[e.data.m_Item1[i].PI].push(e.data.m_Item1[i]);this.companyLedgerService.result=this.companyLedgerService.hierarhySort(t,0,[]),this.companyLedgerService.totalItems=this.companyLedgerService.result.length,this.companyLedgerService.pageWithoutLoad=this.companyLedgerService.totalItems/this.companyLedgerService.pageSize,this.httpfunction.setStorage("_legData"+this.companyLedgerService.getCompanyId+"_"+this.companyLedgerService.getSignupId,JSON.stringify(this.companyLedgerService.result)),this.FilterData()}},()=>{}):this.alertService.showError("Error","Please select atleast one record to change Group")}openChangeModal(){if(this.ledgerData.filter(e=>1==e.Ick).length>0){var e=this.ledgerData.filter(e=>1==e.Ick&&2!=e.St).map(e=>e.PI);this.GroupLedgersWithoutSelectedItem=this.GroupLedgers.filter(t=>!e.includes(t.UIDN)),this._modalChangeGroup.show(),event.stopPropagation(),event.preventDefault()}else this.alertService.showError("Error","Please select atleast one record")}parentSelectionChange(e){if(this.isRoundOffSelected=!1,null==this.companyLedgerService.singleresult.RS||""==this.companyLedgerService.singleresult.RS||null==this.companyLedgerService.singleresult.RS)if(null==e||null==e)this.isParentSelected=!1,this.companyLedgerService.singleresult.Cat="",this.companyLedgerService.singleresult.IsBank=!1,this.companyLedgerService.singleresult.IsCash=!1,this.companyLedgerService.singleresult.IsSD=!1,this.companyLedgerService.singleresult.IsSC=!1,this.companyLedgerService.singleresult.IsPU=!1,this.companyLedgerService.singleresult.IsSL=!1,this.companyLedgerService.singleresult.isTL=!1,this.companyLedgerService.singleresult.IsBWOn=!1;else{this.isParentSelected=!0;var t=this.companyLedgerService.result.filter(e=>"Stock-in-hand"==e.RS);if("Stock-in-hand"==e.RS)this.IsStockLedger=!0;else if("Stock-in-hand"!=e.RS)if(t.length>0)for(let i=0;i<e.ancestor.length;i++){if(e.ancestor[i]==this.companyLedgerService.result.filter(e=>"Indirect Expenses"==e.RS)[0].UIDN&&(this.isRoundOffSelected=!0),e.ancestor[i]==t[0].UIDN){this.IsStockLedger=!0;break}this.IsStockLedger=!1,this.isIndirectIncome=!1;for(let t=0;t<e.ancestor.length;t++)e.ancestor[t]==this.companyLedgerService.result.filter(e=>"Indirect Incomes"==e.RS)[0].UIDN&&(this.isIndirectIncome=!0);this.isFixedAssets=!1;for(let t=0;t<e.ancestor.length;t++)e.ancestor[t]==this.companyLedgerService.result.filter(e=>"Fixed Assets"==e.RS)[0].UIDN&&(this.isFixedAssets=!0)}else this.IsStockLedger=!1;else this.IsStockLedger=!1;this.companyLedgerService.singleresult.Cat=e.Cat,this.companyLedgerService.singleresult.IsBank=e.IsBank,this.companyLedgerService.singleresult.IsCash=e.IsCash,this.companyLedgerService.singleresult.IsSD=e.IsSD,this.companyLedgerService.singleresult.IsSC=e.IsSC,this.companyLedgerService.singleresult.IsPU=e.IsPU,this.companyLedgerService.singleresult.IsSL=e.IsSL,this.companyLedgerService.singleresult.isTL=e.isTL,this.companyLedgerService.singleresult.IsBWOn=e.IsBWOn,(e.IsSC||e.IsSD)&&!e.IsGrp&&(this.companyLedgerService.singleresult.RT="Regular"),e.IsPU?(this.transactiontype=this.natureofTranService.result.filter(e=>0==e.IsSP),this.companyLedgerService.singleresult.NTId=this.transactiontype.filter(e=>"Not Applicable"==e.NA)[0].UIDN):e.IsSL&&(this.transactiontype=this.natureofTranService.result.filter(e=>1==e.IsSP),this.companyLedgerService.singleresult.NTId=this.transactiontype.filter(e=>"Not Applicable"==e.NA)[0].UIDN)}}UnusedLedger(){this.IsUnusedLedger=!this.IsUnusedLedger,0==this.IsUnusedLedger?this.FilterData():this.companyLedgerService.GetAllUnusedLedger().subscribe(e=>{this.FilterData();var t=e.data.m_Item1.map(e=>e.UIDN);this.ledgerData=this.ledgerData.filter(({UIDN:e})=>t.includes(e)),this.TotalUnusedLEdger=e.data.m_Item2})}OpenTrialBalance(e){this.router.navigate(["reports/trialbalance/"+e])}toggleExcelImport(){this._myImageModal.show(),this.IsImportHidden=!this.IsImportHidden}CloseImagePopup(){this._myImageModal.hide()}onExcelAdd(e){this.excelfileData=[];for(let t=0;t<e.length;t++){let i=new A.Q;i.name=e[t].name,i.operationType=0,i.src=e[t].src,i.CompanyId=this.companyLedgerService.getCompanyId,i.SignupId=this.companyLedgerService.getSignupId,i.FileLength=e[t].size,i.ModifiedDate=new Date,i.CreatedDate=new Date,i.CreatedBy=this.companyLedgerService.userid,i.modifyBy=this.companyLedgerService.userid,this.excelfileData.push(i)}}onExcelSubmit(){null!=this.excelfileData&&this.excelfileData.length>0?(this.companyLedgerService.ImportExcel(this.excelfileData).subscribe(e=>{if(null==e.data.m_Item1)return this.alert.showError("Error","Excel column names are incorrect. Please double check your excel column name with predefined format."),void(this.isSubmited=!0);""!=e.data.m_Item1&&null!=e.data.m_Item1&&(this.importeddataAPI=e.data.m_Item1,this.inValidEntry=this.importeddataAPI.filter(e=>1==e.invalidProp).length,this.uniqueEntry=this.importeddataAPI.filter(e=>1==e.RepeatContactProp).length,this._myInqImportedDataViewModal.show(),this.isSubmited=!0),this.excelfileData=[],this.IsImportHidden=!this.IsImportHidden},()=>{this.excelfileData=[],this.IsImportHidden=!this.IsImportHidden}),this.SiteIdUpload=[],this._myImageModal.hide(),this.IsImportHidden=!this.IsImportHidden):this.alertService.showError("Error","Please select atleast one File")}ValidateImportRow(e){e.comments="",(null==e.LN||""==e.LN)&&(e.comments+="Invalid ledger name \n"),(null==e.PN||""==e.PN)&&(e.comments+="Invalid parent name \n"),null==e.OB&&(e.comments+="Invalid opening balance \n"),(null==e.LT||""==e.LT)&&(e.comments+="Invalid ledger type \n"),(null==e.AffDt||""==e.AffDt)&&(e.comments+="Invalid Affected Date \n"),e.invalidProp=""!=e.comments,this.inValidEntry=null,this.inValidEntry=this.importeddataAPI.filter(e=>1==e.invalidProp).length,this.uniqueEntry=null,this.uniqueEntry=this.importeddataAPI.filter(e=>1==e.RepeatContactProp).length}ValidateAffectedDate(e,t){null==e&&(t.AffDt=null),this.ValidateImportRow(t)}AffectedDateSelect(e,t,i){this.importeddataAPI[t].AffDt=e,this.ValidateImportRow(i)}LedgerImportContinue(){var e=this.importeddataAPI.filter(e=>1==e.invalidProp);e.length>0?this.alert.showError("Error","Please modify grid records. we still have "+e.length+" invalid records"):this.importeddataAPI.length>0?(this.RepeatcontactFromAPI=[],this.companyLedgerService.ImportDatafromGrid(this.importeddataAPI).subscribe(e=>{e.data.length>0?this.RepeatcontactFromAPI=e.data:(this._myImageModal.hide(),this._myInqImportedDataViewModal.hide(),this.alert.showSuccess("Error","Ledger(s) Imported successfully"))},()=>{this.alert.showError("Error","Error while File import.Please Correct Sheet")})):this.alert.showError("Error","Ledger Can't imported due to Missing required fields.")}ImportTrackByFunction(e){return e.Index}}return e.\u0275fac=function(t){return new(t||e)(v.Y36(v.sBO),v.Y36(x.i),v.Y36(o.Q),v.Y36(Qt.F),v.Y36(Vt.I),v.Y36(u.V),v.Y36(L.gz),v.Y36(L.F0),v.Y36(b.Rq),v.Y36(n.Ye),v.Y36(b.Rq))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-companyledger-list"]],viewQuery:function(e,t){if(1&e&&(v.Gf(Ft,5),v.Gf(Ht,5),v.Gf(Et,7,l.w9),v.Gf(Ot,7),v.Gf(Pt,7),v.Gf($t,5),v.Gf(Gt,7),v.Gf(Bt,5),v.Gf(Yt,5),v.Gf(jt,7)),2&e){let e;v.iGM(e=v.CRH())&&(t.form=e.first),v.iGM(e=v.CRH())&&(t._modalChangeGroup=e.first),v.iGM(e=v.CRH())&&(t.searchControl=e.first),v.iGM(e=v.CRH())&&(t.transactionModal=e.first),v.iGM(e=v.CRH())&&(t._ExportLedgModal=e.first),v.iGM(e=v.CRH())&&(t._SearchModal=e.first),v.iGM(e=v.CRH())&&(t._LedgerHistoryModal=e.first),v.iGM(e=v.CRH())&&(t.virtualScroll=e.first),v.iGM(e=v.CRH())&&(t._myImageModal=e.first),v.iGM(e=v.CRH())&&(t._myInqImportedDataViewModal=e.first)}},hostBindings:function(e,t){1&e&&v.NdJ("popstate",function(e){return t.onPopState(e)},!1,v.Jf7)},features:[v._Bn([Vt.I,o.Q])],decls:148,vars:28,consts:[[1,"card"],["class","customsearch",4,"ngIf"],["class","customsearchM",4,"ngIf"],["class","table-responsive","id","tableContainer",4,"ngIf"],["id","tableContainerbody","class","tableContainerbodymobile",4,"ngIf"],[4,"ngIf"],["class","add-panel",3,"toggleAction",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["TransactionModal","bs-modal"],["class","modal-dialog fullview modal-lg","role","document",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modalNew","fade",2,"width","90%"],["ExportLedgModal","bs-modal"],["role","document",1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"content"],[1,"c-switch","c-switch-pill","c-switch-primary","float-left","mr-3","mb-3"],["type","checkbox",1,"c-switch-input",3,"checked","change"],[1,"c-switch-slider"],[1,"modal-footer","mt-3",2,"padding-top","50px"],["type","button",1,"btn","btn-dark",3,"click"],["type","button",1,"btn","btn-primary","waves-effect",3,"click"],["LedgerHistoryModal","bs-modal"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","SearchModal","aria-hidden","true",1,"modal","fade",2,"z-index","99999"],["SearchModal","bs-modal"],["role","document",1,"container-fluid","p-0",2,"height","100%","background-color","white"],[1,"modal-content",2,"height","100%"],["role","form",3,"ngSubmit"],["ffilter","ngForm"],[1,"container-fluid"],[1,"row","mt-2"],[1,"col-md-6","col-sm-12"],["for","Ledger"],["selectOnTab","true","name","Ledger1","bindLabel","LN","placeholder","Select Ledger/Group",3,"virtualScroll","items","ngModel","loading","ngModelChange"],["Ledger1","ngModel"],["ng-option-tmp",""],["for","customSwitch1"],[1,"c-switch","c-switch-pill","c-switch-primary"],["type","checkbox","name","OnlyGroups","id","OnlyGroups",1,"c-switch-input",3,"ngModel","ngModelChange"],[1,"navbar","fixed-bottom","navbar-expand-sm","navbar-dark","bg-light"],[1,"navbar-nav","ml-auto","d-flex","flex-row-reverse","bd-highlight"],[1,"nav-item","active"],["type","button",1,"btn","btn-primary","pull-right",3,"click"],[1,"fas","fa-search","mr-2"],[1,"nav-item","active","mr-2"],["bsModal","","data-backdrop","false","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modalNew","fade",2,"width","90%"],["myModal","bs-modal"],["novalidate","",3,"ScrollToInvalid","ngSubmit"],["frmSite","ngForm"],[1,"form-group","col-md-12","p-0"],[1,"md-form","form-group","col-sm-12","p-0"],["selectOnTab","true","name","ParentGroup","bindLabel","LN","placeholder","Select Group",3,"virtualScroll","disabled","ngClass","required","items","ngModel","loading","change","ngModelChange"],["grpled","","ParentGroup","ngModel"],["ng-header-tmp",""],[1,"modal-footer"],["type","submit",1,"btn","btn-primary","text-left"],["ImageModal","bs-modal"],["frmImage","ngForm"],[1,"container"],[1,"input-group"],["target","_blank","href","https://api.accountbook24.com/sample/CompanyLedgerImport.xlsx",1,"col-sm-2"],["maxFiles","1","required","","maxSize","2","fileExt","xls, xlsx",3,"filelist","uploadStatus"],["Importexcel",""],[1,"modal-footer","mt-3"],["type","submit",1,"btn","btn-primary"],["bsModal","","tabindex","-1","role","dsialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"fullModal","fade",2,"width","100%"],["myInqImportedDataViewModal","bs-modal"],["role","document",1,"modal-dialog1","modal-md"],["importcontainer",""],["class","card-body col-md-12","id","tableContainer",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"customsearch"],[3,"submit"],[1,"c-header-nav"],[1,"mb-3"],[1,"c-header-back",3,"click"],[1,"c-icon","c-icon-lg","cil-arrow-left"],[1,"mr-1"],["appendTo","body","selectOnTab","true","name","Ledger1","bindLabel","LN","placeholder","Select Ledger/Group",1,"maxpanel",3,"virtualScroll","items","ngModel","loading","ngModelChange"],[1,"mb-2"],["type","button",1,"btn","btnSmW","btn-primary",3,"click"],[1,"cil-search","btn-icon","mr-2"],[1,"none"],[1,"ml-1","pb-2"],["href","javascript:void(0)",1,"mb-2","font-weight-bold",3,"click"],["class","ml-1 pb-2",4,"ngIf"],["class","mx-2 mb-3",4,"ngIf"],[1,"ml-2","pb-2"],["title","History","placement","bottom",1,"pl-2","d-none",3,"hidden"],[1,"fas","fa-history","text-primary","display-6",3,"click"],["href","javascript:void(0)","accesslevel","Edit","mname","Led",1,"mb-2","font-weight-bold","text-info",3,"appRole","SignupId","UserId","click"],[1,"mx-2","mb-3"],["type","button","accesslevel","Delete","mname","Led",1,"btn","btn-link","text-danger","font-weight-bold","mt-2","pr-3","pl-0",3,"appRole","SignupId","UserId","clickAllowed"],[1,"customsearchM"],[1,"mr-1","mb-2","ml-2"],["name","chevron-back",3,"click"],["name","search","href","javascript:void(0)",3,"click"],[1,"mb-3","mt-1","LeftLi","text-center"],[1,"col","Font16","pl-1"],["id","tableContainer",1,"table-responsive"],["class","card-header p-1 pt-2","id","formHeader",4,"ngIf"],["class","table table-left table-bordered table-striped",3,"fxHeader",4,"ngIf"],["id","fxheaderDiv","class","table-responsive fxheaderDiv",4,"ngIf"],["id","formHeader",1,"card-header","p-1","pt-2"],[1,"row"],[1,"col-md-5","col-sm-12","PageNameFsize"],[1,"col-md-2","col-sm-12"],[1,"c-switch","c-switch-pill","c-switch-primary","float-right"],["type","checkbox","name","OnlyLedgers","id","OnlyLedgers",1,"c-switch-input",3,"ngModel","change","ngModelChange"],[1,"mb-2","float-right","mr-2","font-weight-bold","sg"],["type","checkbox","name","OnlyGroups","id","OnlyGroups",1,"c-switch-input",3,"ngModel","change","ngModelChange"],[1,"col-md-3","col-sm-12"],["class","mx-2 text-wrap text-right pr-4",4,"ngIf"],[1,"mx-2","text-wrap","text-right","pr-4"],[1,"table","table-left","table-bordered","table-striped",3,"fxHeader"],["id","tableContainerHead"],[1,"form-check"],["type","checkbox","id","item_All",1,"form-check-input",3,"checked","ngModel","ngModelChange","change"],["for","item_All",1,"form-check-label"],["id","tableContainerbody"],["container",""],[4,"ngFor","ngForOf"],["autofocus","",3,"tabindex","keydown.enter","keydown.arrowdown","keydown.arrowup",4,"ngIf"],["autofocus","",3,"tabindex","keydown.enter","keydown.arrowdown","keydown.arrowup"],["type","checkbox",1,"form-check-input",3,"checked","ngModel","id","ngModelChange","change"],[1,"form-check-label",3,"for"],["class","badge badge-primary",4,"ngIf"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],[2,"width","8%"],["dropdown","","container","body",1,"btn-group","actionmenu"],["id","button-state-change","dropdownToggle","","type","button","aria-controls","dropdown-state-change",1,"border-0","waves-effect","btn-primary","btn-floating","btn-sm"],[1,"fas","fa-ellipsis-v"],["id","dropdown-state-change","class","dropdown-menu dropdown-menu-right","role","menu","aria-labelledby","button-state-change",4,"dropdownMenu"],[1,"badge","badge-primary"],["target","_blank",3,"href",4,"ngFor","ngForOf"],["target","_blank",3,"href"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["id","dropdown-state-change","role","menu","aria-labelledby","button-state-change",1,"dropdown-menu","dropdown-menu-right"],["role","menuitem"],["href","javascript:void(0)","accesslevel","Edit","mname","Led",1,"dropdown-item",3,"appRole","SignupId","UserId","click"],["role","menuitem",4,"ngIf"],["accesslevel","View","mname","Led","href","javascript:void(0)",1,"dropdown-item",3,"appRole","SignupId","UserId","click"],["href","javascript:void(0)","accesslevel","Add","mname","Led",1,"dropdown-item",3,"hidden","appRole","SignupId","UserId","click"],["accesslevel","Add","mname","Led",1,"dropdown-item",3,"hidden","appRole","SignupId","UserId","click"],["href","javascript:void(0)","accesslevel","Delete","mname","Led",1,"dropdown-item",3,"appRole","SignupId","UserId","clickAllowed"],["colspan","13"],[1,"table","table-bordered"],["target","blank",3,"click"],[3,"dateValue"],["isDate","false",3,"dateValue"],["id","fxheaderDiv",1,"table-responsive","fxheaderDiv"],["id","fxheadertable",1,"table","table-bordered","table-striped","text-center"],["id","tableContainerbody",1,"tableContainerbodymobile"],["slot","fixed",3,"ionRefresh"],["pullingText","Pull to refresh","refreshingSpinner","bubbles","refreshingText","Refreshing..."],["approxItemHeight","88px",3,"items"],[3,"rowselected","click",4,"virtualItem"],[3,"click"],[1,"text-dark"],["size","4",1,"text-right"],[1,"text-left","mr-1"],["class","btn btn-primary btn-esm btn-rounded waves-effect waves-light","href","javascript:void(0)","accesslevel","Add","mname","Led",3,"appRole","rLink","SignupId","UserId",4,"ngIf"],["href","javascript:void(0)","class","btn btn-primary btn-esm btn-rounded waves-effect waves-light ml-2","accesslevel","Add","mname","Led",3,"appRole","rLink","SignupId","UserId",4,"ngIf"],["href","javascript:void(0)","accesslevel","Edit","mname","Led",1,"card-link","text-center",3,"appRole","SignupId","UserId","click"],["name","create-outline","color","primary"],["href","javascript:void(0)","accesslevel","Delete","mname","Led",1,"card-link","text-center",3,"appRole","SignupId","UserId","clickAllowed"],["name","trash-outline","color","danger"],["href","javascript:void(0)","accesslevel","Add","mname","Led",1,"btn","btn-primary","btn-esm","btn-rounded","waves-effect","waves-light",3,"appRole","rLink","SignupId","UserId"],["aria-hidden","true",1,"fas","fa-plus","pr-2","pt-1"],["href","javascript:void(0)","accesslevel","Add","mname","Led",1,"btn","btn-primary","btn-esm","btn-rounded","waves-effect","waves-light","ml-2",3,"appRole","rLink","SignupId","UserId"],["class","skCard",4,"ngFor","ngForOf"],[1,"skCard"],["animated","",2,"width","80%"],["size","4",2,"text-align","-webkit-right"],[1,"table","table-bordered","table-striped","text-center",3,"fxHeader"],["animated","",2,"width","100%"],[2,"width","40%"],[1,"add-panel",3,"toggleAction"],["id","add-panel-switch",1,"switch","text-right"],["tooltip","Print",1,"action-button","bottom2","option","four","border-0","waves-effect","btn-amber","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-print"],["tooltip","Pdf",1,"action-button","bottom2","option","three","border-0","waves-effect","btn-purple","btn-floating",3,"click"],["aria-hidden","true",1,"far","fa-file-pdf"],["tooltip","Import",1,"action-button","bottom2","option","two","border-0","waves-effect","btn-orange","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-upload"],["tooltip","Export",1,"action-button","bottom2","option","one","border-0","waves-effect","btn-pink","btn-floating",3,"click"],["aria-hidden","true",1,"fas","fa-download"],[1,"border-0","waves-effect","btn-dark","btn-floating","btn-lg","action-button","plus","abs","bottom2"],["aria-hidden","true",1,"fas","fa-ellipsis-v"],["accesslevel","Add","mname","Led","rLink","/transactions/ledgeradd/0/false","tooltip","Add Ledger",1,"border-0","waves-effect","btn-primary","btn-floating","btn-lg","abs","bottom1",3,"appRole","SignupId","UserId"],["accesslevel","Add","mname","Led","rLink","/transactions/ledgeradd/0/true","tooltip","Add Group",1,"border-0","waves-effect","btn-primary","btn-floating",3,"appRole","SignupId","UserId"],["tooltip","UnUsed Ledger",1,"action-button","bottom2","option","five","border-0","waves-effect","btn-success","btn-floating",3,"click"],["aria-hidden","true",1,"fa","fa-briefcase"],["tooltip","Export",1,"action-button","bottom2","option","two","border-0","waves-effect","btn-pink","btn-floating",3,"click"],["tooltip","Multiple Delete",1,"action-button","bottom2","option","one","border-0","waves-effect","btn-danger","btn-floating",3,"click"],[1,"fas","fa-trash"],["role","document",1,"modal-dialog","fullview","modal-lg"],["id","voucherContent",1,"modal-content"],[1,"fas","fa-times","fa-lg",3,"click"],[3,"TransactionredirectOnCancel","IsDuplicate","VoucherType","VoucherId","TransactionredirectAction"],["id","lblTodate"],["type","text","appDatepicker","","id","ToDate","name","ToDate",1,"form-control",3,"startDate","selected"],["ToDate",""],[3,"LedgId","IsCallasPopup"],["ng-label-tmp",""],["href","javascript:void(0)","title","Edit","accesslevel","Edit","mname","Led","placement","bottom",1,"pl-1","d-none",3,"appRole","SignupId","UserId"],[1,"fas","fa-pen","text-primary","display-6"],["id","tableContainer",1,"card-body","col-md-12"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"executeRefreshOutsideAngularZone","items","parentScroll","vsUpdate"],["scrollImport",""],[1,"table","table-bordered","table-striped",3,"fxHeader"],["id","tableContainerHead",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["role","alert",1,"alert","alert-danger"],[2,"min-width","225px","white-space","pre-line"],[2,"min-width","100px"],[2,"min-width","250px"],[2,"white-space","pre-line"],["autofocus","","type","text",1,"form-control",3,"ngModel","name","id","change","ngModelChange"],["name","PN","bindLabel","LN","bindValue","UIDN","placeholder","Select GroupLedgers","required","",3,"items","ngModel","loading","id","name","change","ngModelChange"],["PN","ngModel"],["autofocus","","type","number",1,"form-control",3,"ngModel","name","id","change","ngModelChange"],["type","text","appDatepicker","","placeholder","Select Affected Date","autocomplete","none",1,"form-control",3,"startDate","name","id","selected"],["AffDt",""]],template:function(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",0),v.YNc(1,Xt,23,6,"div",1),v.YNc(2,ei,11,0,"div",2),v.YNc(3,Ci,5,3,"div",3),v.YNc(4,Di,6,1,"div",4),v.YNc(5,Ui,2,1,"div",5),v.YNc(6,Ji,22,1,"div",5),v.YNc(7,Vi,18,4,"div",6),v.YNc(8,Ri,20,4,"div",6),v.qZA(),v.TgZ(9,"div",7,8),v.YNc(11,Qi,8,5,"div",9),v.qZA(),v.TgZ(12,"div",10,11),v.TgZ(14,"div",12),v.TgZ(15,"div",13),v.TgZ(16,"div",14),v.TgZ(17,"h4",15),v._uU(18,"Exporting List of Ledgers"),v.qZA(),v.TgZ(19,"button",16),v.NdJ("click",function(){return t.OnCancel()}),v.TgZ(20,"span",17),v._uU(21,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(22,"div",18),v.TgZ(23,"div",19),v.TgZ(24,"strong"),v._uU(25,"Export closing balance as opening :"),v.qZA(),v.TgZ(26,"label",20),v.TgZ(27,"input",21),v.NdJ("change",function(){return t._chkOpening=!("1"==t._chkOpening||1==t._chkOpening)}),v.qZA(),v._UZ(28,"span",22),v.qZA(),v.YNc(29,Fi,5,1,"div",5),v.qZA(),v.TgZ(30,"div",23),v.TgZ(31,"button",24),v.NdJ("click",function(){return t.OnCancel()}),v._uU(32,"No"),v.qZA(),v.TgZ(33,"button",25),v.NdJ("click",function(){return t.OnExportSubmit()}),v._uU(34,"Yes"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(35,"div",7,26),v.YNc(37,Hi,11,2,"div",9),v.qZA(),v.TgZ(38,"div",27,28),v.TgZ(40,"div",29),v.TgZ(41,"div",30),v.TgZ(42,"div",14),v.TgZ(43,"h4",15),v._uU(44,"Advance Search "),v.qZA(),v.TgZ(45,"button",16),v.NdJ("click",function(){return t._SearchModal.hide()}),v.TgZ(46,"span",17),v._uU(47,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(48,"form",31,32),v.NdJ("ngSubmit",function(){return t.FilterData()}),v.TgZ(50,"div",33),v.TgZ(51,"div",34),v.TgZ(52,"div",35),v.TgZ(53,"label",36),v._uU(54,"Select Ledger/Group"),v.qZA(),v.TgZ(55,"ng-select",37,38),v.NdJ("ngModelChange",function(e){return t.currentLedger=e}),v.YNc(57,Ei,4,2,"ng-template",39),v.qZA(),v.qZA(),v.TgZ(58,"div",35),v.TgZ(59,"label",40),v._uU(60," Show Group"),v.qZA(),v._UZ(61,"br"),v.TgZ(62,"label",41),v.TgZ(63,"input",42),v.NdJ("ngModelChange",function(e){return t.OnlyGroups=e}),v.qZA(),v._UZ(64,"span",22),v.qZA(),v.qZA(),v.TgZ(65,"nav",43),v.TgZ(66,"ul",44),v.TgZ(67,"li",45),v.TgZ(68,"button",46),v.NdJ("click",function(){return t.FilterData(),t._SearchModal.hide()}),v._UZ(69,"i",47),v._uU(70,"Search "),v.qZA(),v.qZA(),v.TgZ(71,"li",48),v.TgZ(72,"button",24),v.NdJ("click",function(){return t.ClearFilter(),t._SearchModal.hide()}),v._uU(73," Clear Filter "),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(74,"div",49,50),v.TgZ(76,"div",12),v.TgZ(77,"div",13),v.TgZ(78,"div",14),v.TgZ(79,"h4",15),v._uU(80,"Select Group "),v.qZA(),v.TgZ(81,"button",16),v.NdJ("click",function(){return v.CHM(e),v.MAs(75).hide(),t.parentLedger=null}),v.TgZ(82,"span",17),v._uU(83,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(84,"form",51,52),v.NdJ("ngSubmit",function(){return v.CHM(e),v.MAs(85).form.valid&&t.ChangeGroup()}),v.TgZ(86,"div",18),v.TgZ(87,"div",19),v.TgZ(88,"div",53),v.TgZ(89,"div",54),v.TgZ(90,"ng-select",55,56),v.NdJ("change",function(e){return t.parentSelectionChange(e)})("ngModelChange",function(e){return t.parentLedger=e}),v.YNc(93,$i,2,0,"ng-template",57),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(94,"div",58),v.TgZ(95,"button",24),v.NdJ("click",function(){return v.CHM(e),v.MAs(75).hide(),t.parentLedger=null}),v._uU(96,"Close"),v.qZA(),v.TgZ(97,"button",59),v._uU(98," Change Site "),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(99,"div",10,60),v.TgZ(101,"div",12),v.TgZ(102,"div",13),v.TgZ(103,"div",14),v.TgZ(104,"h4",15),v._uU(105,"Import Ledger"),v.qZA(),v.TgZ(106,"button",16),v.NdJ("click",function(){return t.CloseImagePopup()}),v.TgZ(107,"span",17),v._uU(108,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(109,"form",51,61),v.NdJ("ngSubmit",function(){return v.CHM(e),v.MAs(110).form.valid&&t.onExcelSubmit()}),v.TgZ(111,"div",18),v.TgZ(112,"div",19),v.TgZ(113,"div",62),v.TgZ(114,"div",53),v.TgZ(115,"div",63),v.TgZ(116,"div",54),v.TgZ(117,"a",64),v._uU(118," Download sample "),v.qZA(),v.qZA(),v.TgZ(119,"div",54),v.TgZ(120,"app-file-upload",65,66),v.NdJ("uploadStatus",function(e){return t.onExcelAdd(e)}),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(122,"div",67),v.TgZ(123,"button",68),v._uU(124,"Upload File"),v.qZA(),v.TgZ(125,"button",24),v.NdJ("click",function(){return t.CloseImagePopup()}),v._uU(126,"Close"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(127,"div",69,70),v.TgZ(129,"div",71),v.TgZ(130,"div",13),v.TgZ(131,"div",14),v.TgZ(132,"h4",15),v._uU(133,"Imported Ledger From Sheet "),v.qZA(),v.TgZ(134,"button",16),v.NdJ("click",function(){return v.CHM(e),v.MAs(128).hide()}),v.TgZ(135,"span",17),v._uU(136,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(137,"div",18,72),v.TgZ(139,"div",53),v.TgZ(140,"form",51,61),v.NdJ("ngSubmit",function(){return v.CHM(e),v.MAs(110).form.valid}),v.YNc(142,ji,11,11,"div",73),v.qZA(),v.qZA(),v.qZA(),v.TgZ(143,"div",58),v.TgZ(144,"button",74),v.NdJ("click",function(){return t.LedgerImportContinue()}),v._uU(145,"Inquiry Import"),v.qZA(),v.TgZ(146,"button",24),v.NdJ("click",function(){return v.CHM(e),v.MAs(128).hide()}),v._uU(147,"Close"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.MAs(85),i=v.MAs(92);v.xp6(1),v.Q6J("ngIf",!t.companyLedgerService.IsMobileview),v.xp6(1),v.Q6J("ngIf",t.companyLedgerService.IsMobileview),v.xp6(1),v.Q6J("ngIf",!t.companyLedgerService.IsMobileview),v.xp6(1),v.Q6J("ngIf",t.ledgerData.length>0&&t.companyLedgerService.IsMobileview),v.xp6(1),v.Q6J("ngIf",0==t.ledgerData.length&&t.companyLedgerService.IsMobileview),v.xp6(1),v.Q6J("ngIf",0==t.ledgerData.length&&!t.companyLedgerService.IsMobileview),v.xp6(1),v.Q6J("ngIf",!t.companyLedgerService.IsMobileview),v.xp6(1),v.Q6J("ngIf",t.companyLedgerService.IsMobileview),v.xp6(3),v.Q6J("ngIf",t.showTransactionModal),v.xp6(16),v.Q6J("checked",1==t._chkOpening),v.xp6(2),v.Q6J("ngIf",1==t._chkOpening),v.xp6(8),v.Q6J("ngIf",t.showLedegrHistoryModal),v.xp6(18),v.Q6J("virtualScroll",!0)("items",t.companyLedgerService.result)("ngModel",t.currentLedger)("loading",t.companyLedgerService.loading),v.xp6(8),v.Q6J("ngModel",t.OnlyGroups),v.xp6(27),v.Q6J("virtualScroll",!0)("disabled",t.isResevredgroup)("ngClass",v.VKq(26,Ki,e.submitted&&i.invalid))("required",!t.companyLedgerService.singleresult.IsGrp)("items",t.GroupLedgersWithoutSelectedItem)("ngModel",t.parentLedger)("loading",t.companyLedgerService.loading),v.xp6(30),v.Q6J("filelist",t.excelfileData),v.xp6(22),v.Q6J("ngIf",t.isSubmited)}},directives:[n.O5,y.oB,N._Y,N.JL,N.F,l.w9,N.JJ,N.On,D.x,l.Z2,N.Wl,_.u,n.mk,N.Q7,l.A3,U.Y,M.g,I.gu,V.n,n.sg,k.TO,k.Mq,k.Hz,R.a,I.W2,I.nJ,I.Wo,I.aJ,I.Rw,I.PM,I.Nd,I.wI,I.CK,q.e,S.i9,Dt.L,F.q,H.i,l.bb,E.Vw,N.Fj,N.wV],pipes:[O.s],styles:[".boldfont[_ngcontent-%COMP%]{font-weight:bold}.positive[_ngcontent-%COMP%]{background-color:#d6f3d6!important}.negative[_ngcontent-%COMP%]{background-color:#ffeff7!important}"]}),e})();var Wi=i(80762);let Xi=(()=>{class e{constructor(e,t,i){this.reportService=e,this.alert=t,this.router=i,this.ShowTally=!1,this.showfilter=!0,this.scrolleddata=0,this.previousButton="Cancel",this.ledgerresult=[]}ngOnInit(){}onSubmit(){this.companyLedgerService.Saveimport(this.companyLedgerService.result).subscribe(e=>{this.alert.showSuccess("Success","All Ledgers imported successfully"),this.showfilter=!1,this.excelfileData=[],this.showfilter=!0,this.router.navigate(["/transactions/ledgerList"]),this.scrolleddata=0},e=>{this.alert.showError("Error","There is some error while importing file. Please try again or contact administrator"),this.excelfileData=[],this.showfilter=!0})}expand(e){e.isDisplay?this.companyLedgerService.result.filter(t=>t.PI==e.UIDN&&0==t.IsGrp).forEach(e=>e.isDisplay=!1):this.companyLedgerService.result.filter(t=>t.PI==e.UIDN&&0==t.IsGrp).forEach(e=>e.isDisplay=!0),e.isDisplay=!e.isDisplay}onExcelAdd(e){this.excelfileData=[];for(let t=0;t<e.length;t++){let i=new A.Q;i.name=e[t].name,i.operationType=0,i.ModifiedDate=new Date,i.CreatedDate=new Date,i.CreatedBy=this.reportService.userid,i.modifyBy=this.reportService.userid,i.CompanyId=this.reportService.getCompanyId,i.SignupId=this.reportService.getSignupId,i.FileLength=null==e[t].PK_Id?e[t].size:e[t].FileLength,i.src=e[t].src,this.excelfileData.push(i)}this.reportService.ImportbankStatement(this.excelfileData).subscribe(e=>{this.excelfileData=[],this.alert.showSuccess("Success","All vouchers imported successfully"),this.router.navigate(["/transactions/daybook"])},e=>{this.alert.showError("Error","Error while voucher import.Please contact administrator"),this.excelfileData=[],this.showfilter=!0,this.scrolleddata=0})}}return e.\u0275fac=function(t){return new(t||e)(v.Y36(Wi.r),v.Y36(b.Rq),v.Y36(L.F0))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-bankstatement"]],features:[v._Bn([Wi.r])],decls:18,vars:1,consts:[[1,"col-sm-12","nopadding"],[1,"animated","fadeIn"],[1,"row"],[1,"col-lg-12"],[1,"card"],["id","tableFilter",1,"card-header"],[1,"col-sm-12"],["for","Importexcel",2,"font-weight","bold"],[1,"input-group"],["maxFiles","1","maxSize","2","fileExt","xls, xlsx",2,"width","100%",3,"filelist","uploadStatus"],["Importexcel",""],["target","_blank","href","https://api.accountbook24.com/sample/AllLedger.xlsx"],["href","javascript:void(0)",3,"click"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"div",2),v.TgZ(3,"div",3),v.TgZ(4,"div",4),v.TgZ(5,"div",5),v.TgZ(6,"div",2),v.TgZ(7,"div",6),v.TgZ(8,"label",7),v._uU(9,"Upload Voucher file"),v.qZA(),v.TgZ(10,"div",8),v.TgZ(11,"app-file-upload",9,10),v.NdJ("uploadStatus",function(e){return t.onExcelAdd(e)}),v.qZA(),v.qZA(),v.TgZ(13,"a",11),v._uU(14,"Download sample file"),v.qZA(),v._uU(15,"\xa0\xa0\xa0 "),v.TgZ(16,"a",12),v.NdJ("click",function(){return t.ShowTally=!t.ShowTally}),v._uU(17,"Show Steps to Export Ledgers from Tally "),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&e&&(v.xp6(11),v.Q6J("filelist",t.excelfileData))},directives:[U.Y],styles:[""]}),e})();var en=i(33433),tn=i(75477),nn=i(65178);const rn=["f"],on=["voucherrow"],an=["vtype"],ln=["RefModal"];function sn(e,t){1&e&&(v.TgZ(0,"ng-option",28),v._uU(1," Purchase"),v.qZA())}function cn(e,t){1&e&&(v.TgZ(0,"ng-option",29),v._uU(1," Receipt"),v.qZA())}function dn(e,t){1&e&&(v.TgZ(0,"ng-option",30),v._uU(1," Payment"),v.qZA())}function un(e,t){1&e&&(v.TgZ(0,"ng-option",31),v._uU(1,"Credit Note"),v.qZA())}function gn(e,t){1&e&&(v.TgZ(0,"ng-option",32),v._uU(1,"Debit Note"),v.qZA())}function hn(e,t){1&e&&(v.TgZ(0,"ng-option",33),v._uU(1," Receipt Note"),v.qZA())}function pn(e,t){1&e&&(v.TgZ(0,"ng-option",34),v._uU(1," Delivery Note"),v.qZA())}function fn(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"required"),v.qZA())}function mn(e,t){if(1&e&&(v.TgZ(0,"div",35),v.YNc(1,fn,2,0,"div",36),v.qZA()),2&e){v.oxw();const e=v.MAs(9);v.xp6(1),v.Q6J("ngIf",e.errors.required)}}function Zn(e,t){1&e&&v._uU(0),2&e&&v.hij(" ",t.item.LN," ")}function Tn(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"required"),v.qZA())}function An(e,t){if(1&e&&(v.TgZ(0,"div",35),v.YNc(1,Tn,2,0,"div",36),v.qZA()),2&e){v.oxw();const e=v.MAs(25);v.xp6(1),v.Q6J("ngIf",e.errors.required)}}function vn(e,t){1&e&&v._uU(0),2&e&&v.hij(" ",t.item.LN," ")}function xn(e,t){1&e&&v.YNc(0,vn,1,1,"ng-template",22)}function In(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"a",67),v.NdJ("click",function(){v.CHM(e);const t=v.oxw().index,i=v.oxw().index;return v.oxw(2).openReferencepopup(i,t)}),v.TgZ(1,"span"),v._uU(2),v.qZA(),v._uU(3),v.TgZ(4,"strong"),v._uU(5),v.qZA(),v.qZA()}if(2&e){const e=t.$implicit;v.xp6(2),v.hij(" ",e.Ref_Type," "),v.xp6(1),v.hij("-",e.Ref_Tag,"-- "),v.xp6(2),v.AsE(" ",e.Balance," ",e.AmtType," ")}}function Ln(e,t){if(1&e&&(v.TgZ(0,"a"),v._uU(1),v.qZA()),2&e){const e=t.item;v.xp6(1),v.Oqu(e.LN)}}function wn(e,t){if(1&e){const e=v.EpF();v.ynx(0),v.TgZ(1,"tr"),v.TgZ(2,"td",46),v.TgZ(3,"div"),v.TgZ(4,"input",47,48),v.NdJ("selectedindex",function(t){return v.CHM(e),v.oxw(3).onVoucherDateSelect(t)}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(6,"td",46),v.TgZ(7,"div"),v.TgZ(8,"ng-select",49,50),v.NdJ("ngModelChange",function(t){return v.CHM(e).$implicit.LedDet=t})("ngModelChange",function(){v.CHM(e);const t=v.oxw().index,i=v.oxw(2);return i.calculateBank(t),i.finalcalculation(t)}),v.YNc(10,xn,1,0,"ng-template",51),v.qZA(),v.qZA(),v.TgZ(11,"div",52),v.YNc(12,In,6,4,"a",53),v.qZA(),v.qZA(),v.TgZ(13,"td",54),v.TgZ(14,"a",55),v.NdJ("click",function(){const t=v.CHM(e).index,i=v.oxw().index;return v.oxw(2).openReferencepopup(i,t)}),v._uU(15," Reference "),v.qZA(),v.qZA(),v.TgZ(16,"td",46),v.TgZ(17,"input",56,57),v.NdJ("ngModelChange",function(t){return v.CHM(e).$implicit.DrAmt=t})("change",function(){v.CHM(e);const t=v.oxw().index;return v.oxw(2).finalcalculation(t)}),v.qZA(),v.qZA(),v.TgZ(19,"td",58),v.TgZ(20,"ng-select",59,60),v.NdJ("ngModelChange",function(t){return v.CHM(e).$implicit.TaxLedger=t})("change",function(){v.CHM(e);const t=v.oxw().index;return v.oxw(2).finalcalculation(t)}),v.YNc(22,Ln,2,1,"ng-template",61),v.qZA(),v.qZA(),v.TgZ(23,"td",46),v.TgZ(24,"input",62,57),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw().$implicit.Narr=t}),v.qZA(),v.qZA(),v.TgZ(26,"td",63),v._uU(27),v.qZA(),v.TgZ(28,"td",64),v.TgZ(29,"a",65),v.NdJ("click",function(){v.CHM(e);const t=v.oxw().index;return v.oxw(2).deleteLedger(t)}),v._UZ(30,"i",66),v.qZA(),v.qZA(),v.qZA(),v.BQk()}if(2&e){const e=t.$implicit,i=v.oxw(),n=i.index,r=i.$implicit,o=v.oxw(2);v.xp6(4),v.MGl("name","ChkDt_",n,""),v.MGl("id","ChkDt_",n,""),v.Q6J("tabindex",e.TabIndex)("startDate",r.VDt)("index",n),v.xp6(4),v.MGl("name","Ledger_",e.Index,""),v.Q6J("tabIndex",e.TabIndex)("virtualScroll",!0)("items",o.ToLedger)("ngModel",e.LedDet)("loading",o.companyLedgerService.loading),v.xp6(4),v.Q6J("ngForOf",o.getreference(e.LedDet,n)),v.xp6(2),v.Q6J("tabIndex",e.TabIndex),v.xp6(3),v.MGl("name","amt__",e.Index,""),v.MGl("id","amt__",e.Index,""),v.Q6J("tabIndex",e.TabIndex)("ngModel",e.DrAmt),v.xp6(3),v.MGl("name","TaxLedger_",e.Index,""),v.Q6J("tabIndex",e.TabIndex)("multiple",!0)("items",o.TaxLedger)("ngModel",e.TaxLedger)("loading",o.companyLedgerService.loading),v.xp6(4),v.MGl("name","Narr__",e.Index,""),v.MGl("id","Narr__",e.Index,""),v.Q6J("tabIndex",e.TabIndex)("ngModel",r.Narr),v.xp6(3),v.hij(" ",r.TotalAmt," "),v.xp6(2),v.Q6J("tabIndex",e.TabIndex)}}function bn(e,t){if(1&e&&(v.ynx(0),v.YNc(1,wn,31,29,"ng-container",44),v.BQk()),2&e){const e=t.$implicit;v.xp6(1),v.Q6J("ngForOf",e.VDet)}}function Cn(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",37),v.TgZ(1,"div",38),v.TgZ(2,"table",39),v.TgZ(3,"thead"),v.TgZ(4,"tr"),v.TgZ(5,"th",40),v._uU(6," Voucher Date"),v.qZA(),v.TgZ(7,"th",40),v._uU(8," Select Account"),v.qZA(),v.TgZ(9,"th",41),v._uU(10," Reference"),v.qZA(),v.TgZ(11,"th",42),v.TgZ(12,"span"),v._uU(13,"Amount"),v.qZA(),v.qZA(),v.TgZ(14,"th",42),v._uU(15,"Tax"),v.qZA(),v.TgZ(16,"th",42),v._uU(17,"Narration"),v.qZA(),v.TgZ(18,"th",42),v._uU(19,"Total Amount"),v.qZA(),v.TgZ(20,"th",41),v._uU(21,"Actions"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(22,"tbody",null,43),v.YNc(24,bn,2,1,"ng-container",44),v.qZA(),v.qZA(),v.qZA(),v.TgZ(25,"div"),v.TgZ(26,"input",45),v.NdJ("click",function(){return v.CHM(e),v.oxw().adddNewTransaction()}),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw();v.xp6(24),v.Q6J("ngForOf",e.VoucherMasters),v.xp6(2),v.Q6J("tabIndex",500)}}function qn(e,t){1&e&&(v.TgZ(0,"div",4),v.TgZ(1,"div",68),v.TgZ(2,"button",69,70),v._uU(4," Save "),v.qZA(),v.qZA(),v.qZA())}function Sn(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"Ref. type is required"),v.qZA())}function Mn(e,t){if(1&e&&(v.TgZ(0,"div",35),v.YNc(1,Sn,2,0,"div",36),v.qZA()),2&e){v.oxw();const e=v.MAs(3);v.xp6(1),v.Q6J("ngIf",e.errors.required)}}function yn(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"required"),v.qZA())}function Nn(e,t){if(1&e&&(v.TgZ(0,"div",35),v.YNc(1,yn,2,0,"div",36),v.qZA()),2&e){v.oxw();const e=v.MAs(2);v.xp6(1),v.Q6J("ngIf",e.errors.required)}}const Dn=function(e){return{"is-invalid":e}};function _n(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"td"),v.TgZ(1,"input",104,105),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw().$implicit.Ref_Tag=t}),v.qZA(),v.YNc(3,Nn,2,1,"div",17),v.qZA()}if(2&e){const e=v.MAs(2),t=v.oxw(),i=t.index,n=t.$implicit;v.oxw(3);const r=v.MAs(2);v.xp6(1),v.MGl("name","refTag__",i,""),v.Q6J("ngClass",v.VKq(5,Dn,r.submitted&&e.invalid))("disabled","AgainstRef"==n.Ref_Type||"OnAccount"==n.Ref_Type)("ngModel",n.Ref_Tag),v.xp6(2),v.Q6J("ngIf",r.submitted&&e.invalid)}}function Un(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"td"),v.TgZ(1,"input",106,107),v.NdJ("selected",function(t){return v.CHM(e),v.oxw().$implicit.DueDate=t}),v.qZA(),v.qZA()}if(2&e){const e=v.MAs(2),t=v.oxw(),i=t.index,n=t.$implicit;v.oxw(3);const r=v.MAs(2);v.xp6(1),v.MGl("name","refdate__",i,""),v.MGl("id","refdate__",i,""),v.Q6J("disabled","AgainstRef"==n.Ref_Type||"OnAccount"==n.Ref_Type)("ngClass",v.VKq(5,Dn,r.submitted&&e.invalid))("startDate",n.DueDate)}}function kn(e,t){if(1&e&&v._uU(0),2&e){const e=t.item;v.HOy(" ",e.Ref_Type,"- ",e.Ref_Tag,"- ",e.Dr>0?e.Dr:e.Cr,"",e.Dr>0?"Dr":"Cr"," ")}}function Jn(e,t){if(1&e&&(v._uU(0),v.TgZ(1,"b"),v._uU(2," Available Balance "),v.qZA(),v._uU(3)),2&e){const e=t.item;v.HOy(" ",e.Ref_Type,"- ",e.Ref_Tag,"- ",e.Dr>0?e.Dr:e.Cr,"",e.Dr>0?"Dr":"Cr"," - "),v.xp6(3),v.AsE("-",e.OrgBalance>0?e.OrgBalance:-1*e.OrgBalance,"",e.OrgBalance>0?"Dr":"Cr"," ")}}function Vn(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"ng-select",110,111),v.NdJ("ngModelChange",function(t){return v.CHM(e),v.oxw(2).$implicit.Agnst_Ref_Id=t})("change",function(t){v.CHM(e);const i=v.oxw(2).$implicit;return v.oxw(4).onAgainstRefChange(t,i)}),v.YNc(2,kn,1,4,"ng-template",22),v.YNc(3,Jn,4,6,"ng-template",61),v.qZA()}if(2&e){const e=v.oxw(2),t=e.index,i=e.$implicit,n=v.oxw(4);v.MGl("name","agReferences",t,""),v.Q6J("items",n.LedagainstRefList)("ngModel",i.Agnst_Ref_Id)}}function Rn(e,t){if(1&e&&(v.TgZ(0,"td",108),v.YNc(1,Vn,4,3,"ng-select",109),v.qZA()),2&e){const e=v.oxw().$implicit;v.xp6(1),v.Q6J("ngIf","AgainstRef"==e.Ref_Type)}}function Qn(e,t){1&e&&(v.TgZ(0,"div"),v._uU(1,"required"),v.qZA())}function Fn(e,t){if(1&e&&(v.TgZ(0,"div",35),v.YNc(1,Qn,2,0,"div",36),v.qZA()),2&e){v.oxw();const e=v.MAs(18);v.xp6(1),v.Q6J("ngIf",e.errors.required)}}function Hn(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"tr",90),v.TgZ(1,"td"),v.TgZ(2,"ng-select",91,92),v.NdJ("ngModelChange",function(t){return v.CHM(e).$implicit.Ref_Type=t}),v.TgZ(4,"ng-option",93),v._uU(5,"New Ref"),v.qZA(),v.TgZ(6,"ng-option",94),v._uU(7,"OnAccount"),v.qZA(),v.TgZ(8,"ng-option",95),v._uU(9,"Advance"),v.qZA(),v.TgZ(10,"ng-option",96),v._uU(11,"AgainstRef"),v.qZA(),v.qZA(),v.YNc(12,Mn,2,1,"div",17),v.qZA(),v.YNc(13,_n,4,7,"td",36),v.YNc(14,Un,3,7,"td",36),v.YNc(15,Rn,2,1,"td",97),v.TgZ(16,"td"),v.TgZ(17,"input",98,99),v.NdJ("change",function(){const t=v.CHM(e).$implicit;return v.oxw(4).onReferenceAmountChange(t)})("ngModelChange",function(t){return v.CHM(e).$implicit.Balance=t}),v.qZA(),v.YNc(19,Fn,2,1,"div",17),v.qZA(),v.TgZ(20,"td"),v.TgZ(21,"ng-select",100),v.NdJ("ngModelChange",function(t){return v.CHM(e).$implicit.AmtType=t}),v.TgZ(22,"ng-option",101),v._uU(23,"DR"),v.qZA(),v.TgZ(24,"ng-option",102),v._uU(25,"CR"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(26,"td"),v.TgZ(27,"a",103),v.NdJ("click",function(){const t=v.CHM(e).$implicit;return v.oxw(4).RemoveReference(t.Index)}),v._UZ(28,"i",66),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=t.$implicit,i=t.index,n=v.MAs(3),r=v.MAs(18);v.oxw(3);const o=v.MAs(2);v.xp6(2),v.MGl("name","rafdrp",i,""),v.Q6J("disabled","AgainstRef"!=e.Ref_Type&&e.UIDN>0)("ngModel",e.Ref_Type)("ngClass",v.VKq(14,Dn,o.submitted&&n.invalid)),v.xp6(10),v.Q6J("ngIf",o.submitted&&n.invalid),v.xp6(1),v.Q6J("ngIf","AgainstRef"!=e.Ref_Type),v.xp6(1),v.Q6J("ngIf","AgainstRef"!=e.Ref_Type),v.xp6(1),v.Q6J("ngIf","AgainstRef"==e.Ref_Type),v.xp6(2),v.MGl("name","Refamt__",i,""),v.Q6J("ngModel",e.Balance)("ngClass",v.VKq(16,Dn,o.submitted&&r.invalid)),v.xp6(2),v.Q6J("ngIf",o.submitted&&r.invalid),v.xp6(2),v.MGl("name","AmtType__",i,""),v.Q6J("ngModel",e.AmtType)}}function En(e,t){if(1&e&&(v.TgZ(0,"table",87,88),v.TgZ(2,"thead"),v.TgZ(3,"tr"),v.TgZ(4,"th"),v._uU(5,"Ref. Method"),v.qZA(),v.TgZ(6,"th"),v._uU(7,"Ref. Tag"),v.qZA(),v.TgZ(8,"th"),v._uU(9,"Due Date"),v.qZA(),v.TgZ(10,"th"),v._uU(11,"Amount"),v.qZA(),v.TgZ(12,"th"),v._uU(13,"Dr/Cr"),v.qZA(),v.TgZ(14,"th"),v._uU(15,"Action"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(16,"tbody"),v.YNc(17,Hn,29,18,"tr",89),v.qZA(),v.qZA()),2&e){const e=v.oxw(3);v.xp6(17),v.Q6J("ngForOf",e.getreferenceforpopup())}}function On(e,t){if(1&e&&(v.TgZ(0,"div",85),v.YNc(1,En,18,1,"table",86),v.qZA()),2&e){const e=v.oxw(2);v.xp6(1),v.Q6J("ngIf",!e.companyLedgerService.IsMobileview)}}function Pn(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",71),v.TgZ(1,"form",72,73),v.NdJ("ngSubmit",function(){v.CHM(e);const t=v.MAs(2),i=v.oxw();return t.form.valid&&i.Savereference()}),v.TgZ(3,"div",74),v.TgZ(4,"div",75),v.TgZ(5,"h4",76),v._uU(6,"Add/Edit Reference "),v.qZA(),v.TgZ(7,"button",77),v.NdJ("click",function(){v.CHM(e);const t=v.oxw(),i=v.MAs(32);return t.showReferencepopup=!1,i.hide()}),v.TgZ(8,"span",78),v._uU(9,"\xd7"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(10,"div",79),v.YNc(11,On,2,1,"div",80),v.TgZ(12,"button",81),v.NdJ("click",function(){return v.CHM(e),v.oxw().addNewreference()}),v._uU(13,"Add new row"),v.qZA(),v.qZA(),v.TgZ(14,"div",82),v.TgZ(15,"button",83),v._uU(16,"Save Changes"),v.qZA(),v.TgZ(17,"button",84),v.NdJ("click",function(){v.CHM(e);const t=v.oxw(),i=v.MAs(32);return t.showReferencepopup=!1,i.hide()}),v._uU(18,"Close"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){const e=v.oxw();v.xp6(11),v.Q6J("ngIf",e.curReference.length>0)}}const $n=[],Gn=[{path:"",data:{title:"Transactions"},children:[{path:"challan",component:Nt,data:{title:"Challan List",ViewType:"View",component:"ChallanListComponent"},canActivate:[en.i]},{path:"challan/:label",component:Nt,data:{title:"Challan List - Billwise",ViewType:"View",component:"ChallanListComponent"},canActivate:[en.i]},{path:"challan/:id",component:Q.N,data:{title:"Add/Edit Challan",ViewType:"View",component:"ChallanAddeditComponent"},canActivate:[en.i]},{path:"daybook",component:_t.C,data:{title:"Day Book",ViewType:"View",component:"AccountListComponent"},canActivate:[en.i]},{path:"ledger",component:_t.C,data:{title:"Ledger Report",ViewType:"View",component:"AccountListComponent"},canActivate:[en.i]},{path:"group",component:_t.C,data:{title:"Group Report",ViewType:"View",component:"AccountListComponent"},canActivate:[en.i]},{path:"finalize",component:_t.C,data:{title:"Finalize Report",ViewType:"View",component:"AccountListComponent"},canActivate:[en.i]},{path:"restorevoucher",component:_t.C,data:{title:"voucher History",ViewType:"View",component:"AccountListComponent"},canActivate:[en.i]},{path:"hiddenvoucher",component:_t.C,data:{title:"Hidden Vouchers",ViewType:"View",component:"AccountListComponent"},canActivate:[en.i]},{path:"daybook/:ledgerid",component:_t.C,data:{title:"DayBook",ViewType:"View",component:"AccountListComponent"},canActivate:[en.i]},{path:"accountadd",component:(()=>{class e{constructor(e,t,i,n){this.accountService=e,this.companyLedgerService=t,this.alertService=i,this.router=n,this.vouchertypeclass="",this.taxledgerDetails=[],this.VoucherMasters=[],this.FinalVoucherMasters=[],this.VoucherIndex=0,this.AccountText="Select Ledger",this.httpfunction=new m.r,this.bankDetails=[],this.curReference=[],this.allagainstRefList=[],this.modalReferenceIndex=0,this.showReferencepopup=!1,this.modalDrAmt=0,this.modalCrAmt=0,this.VoucherId=0,this.Total="0.0 Dr",this.TotalTax="0.0 Dr",this.GrandTotal="0.0 Dr",this.RoundOFFTotal="0.0 Dr",this.Totalroundoff=0,this.IsRoundOff=!1,this.ReferendeIndex=0,this.modalLedger=null,this.LedagainstRefList=[],this.IsShowLedger=!1}ngOnInit(){null!=this.serachcontrol&&null!=this.serachcontrol&&this.serachcontrol.focus(),this.companyLedgerService.GetAllledaccount(!0);var e=new c.VN,t=new c.eK;t.TabIndex=t.Index+21,e.VDet=[],e.VDet.push(t),this.VoucherMasters.push(e),this.Refsubscription=this.accountService.resultObs.subscribe(()=>{this.allagainstRefList=this.allagainstRefList.concat(this.accountService.result),this.setcurrentreference()})}ngOnDestroy(){null!=this.Refsubscription&&this.Refsubscription.unsubscribe()}setcurrentreference(){this.LedagainstRefList=JSON.parse(JSON.stringify(this.allagainstRefList.filter(e=>e.L_Id==this.curReferenceedger&&e.VoucherMaster_PK_Id!=this.VoucherId)));for(let t=0;t<this.LedagainstRefList.length;t++){const i=this.LedagainstRefList[t];i.Balance<0&&(i.Balance=-1*i.Balance),i.OrgBalance=i.Balance;var e=this.getreferenceforpopup().filter(e=>e.Agnst_VoucherMst_Id==i.voucherMasterId&&e.Agnst_Ref_Id==i.UIDN);null!=e&&null!=e&&e.length>0&&(i.OrgBalance+=e[0].Dr>0?e[0].Dr:e[0].Cr,e[0].OrgBalance=i.OrgBalance)}}getreferenceforpopup(){return this.curReference.filter(e=>1!=e.operationType)}adddNewTransaction(){if(!this.httpfunction.IsMobileview()){let i=this.VoucherMasters.length-1;if(null!=this.VoucherMasters[i].VDet[0].LedDet&&null!=this.VoucherMasters[i].VDet[0].LedDet&&null!=this.VoucherMasters[i].VDet[0].DrAmt&&null!=this.VoucherMasters[i].VDet[0].DrAmt&&0!=this.VoucherMasters[i].VDet[0].DrAmt){this.VoucherIndex=this.VoucherIndex+1;var e=new c.VN,t=new c.eK;t.Index=this.VoucherIndex,t.TabIndex=this.VoucherIndex+21,e.VDet=[],e.VDet.push(t),this.VoucherMasters.push(e)}}}isNumeric(e){return null!=e&&/^[-+]?(\d+|\d+\.\d*|\d*\.\d+)$/.test(e.toString())}getNumeric(e){return this.isNumeric(e)?(e=parseFloat(e),parseFloat(e.toFixed(2))):parseFloat("0")}SelectVoucherType(){this.accountVoucherType.toLowerCase()==d.$f.Purchase.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.DebitNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.ReceiptNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase()?this.AccountText="Party Name":this.accountVoucherType.toLowerCase()==d.$f.Sales.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.CreditNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.DeliveryNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()?this.AccountText="Customer":this.accountVoucherType.toLowerCase()==d.$f.Receipt.toLowerCase()?this.AccountText="Receipt In Account":this.accountVoucherType.toLowerCase()==d.$f.Payment.toLowerCase()?this.AccountText="Payment From":this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()?this.AccountText="Deposit To":this.accountVoucherType.toLowerCase()==d.$f.Contra.toLowerCase()&&(this.AccountText="Deposit In");let e=JSON.parse(this.httpfunction.getStorage("VoucherType"));this.IsShowLedger=e.filter(e=>e.NA.toUpperCase()==this.accountVoucherType.toUpperCase())[0].IsShowLed,this.getFromLedger(),this.getToLedger(),this.getTaxLedger()}getFromLedger(){this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DeliveryNote.toLocaleLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()?(this.FromLedger=this.companyLedgerService.result.filter(e=>1==e.IsSL&&0==e.IsGrp&&1==e.St),this.IsShowLedger&&(this.FromLedger=this.companyLedgerService.result.filter(e=>0==e.IsGrp&&1==e.St))):this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.ReceiptNote.toLocaleLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase()?(this.FromLedger=this.companyLedgerService.result.filter(e=>1==e.IsPU&&0==e.IsGrp&&1==e.St),this.IsShowLedger&&(this.FromLedger=this.companyLedgerService.result.filter(e=>0==e.IsGrp&&1==e.St))):this.accountVoucherType.toLocaleLowerCase()==d.$f.Payment.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Receipt.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Contra.toLocaleLowerCase()?this.FromLedger=this.companyLedgerService.result.filter(e=>(1==e.IsBank||1==e.IsCash)&&0==e.IsGrp&&1==e.St):this.accountVoucherType.toLocaleLowerCase()==d.$f.Journal.toLocaleLowerCase()&&(this.FromLedger=this.companyLedgerService.result.filter(e=>0==e.IsGrp&&1==e.St))}getToLedger(){this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DeliveryNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.SalesOrder.toLocaleLowerCase()?this.ToLedger=this.companyLedgerService.result.filter(e=>(1==e.IsBank||1==e.IsCash||1==e.IsSD)&&0==e.IsGrp&&1==e.St):this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.ReceiptNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.PurchaseOrder.toLocaleLowerCase()?this.ToLedger=this.companyLedgerService.result.filter(e=>(1==e.IsBank||1==e.IsCash||1==e.IsSC)&&0==e.IsGrp&&1==e.St):this.accountVoucherType.toLocaleLowerCase()==d.$f.Payment.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Receipt.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Journal.toLocaleLowerCase()?this.ToLedger=this.companyLedgerService.result.filter(e=>0==e.IsGrp&&1==e.St):this.accountVoucherType.toLocaleLowerCase()==d.$f.Contra.toLocaleLowerCase()&&(this.ToLedger=this.companyLedgerService.result.filter(e=>(1==e.IsBank||1==e.IsCash)&&0==e.IsGrp&&1==e.St))}getTaxLedger(){this.TaxLedger=this.companyLedgerService.result.filter(e=>1==e.isTL&&0==e.IsGrp&&1==e.St)}getreference(e,t){if(null!=e)return null!=e&&null!=this.VoucherMasters[t]&&null!=this.VoucherMasters[t].referencemaster?this.VoucherMasters[t].referencemaster.filter(t=>t.L_Id==e.UIDN&&1!=t.operationType):null}openReferencepopup(e,t){if(this.curReferenceedger=null,this.curReference=[],-1==e)if(this.httpfunction.IsMobileview())if(this.accountVoucherType.toLowerCase()!=d.$f.Contra.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.Purchase.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.Sales.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.DebitNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.CreditNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.DeliveryNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.ReceiptNote.toLowerCase()){if(null==this.modalLedger||null==this.modalLedger)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.modalLedger.UIDN}else{if(null==this.companyLedgerService.singleresult)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.companyLedgerService.singleresult.UIDN}else{if(null==this.companyLedgerService.singleresult)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.companyLedgerService.singleresult.UIDN}else if(e>-1)if(this.httpfunction.IsMobileview())if(this.accountVoucherType.toLowerCase()!=d.$f.Contra.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.Purchase.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.Sales.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.DebitNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.CreditNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.DeliveryNote.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.ReceiptNote.toLowerCase()){if(null==this.modalLedger||null==this.modalLedger)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.modalLedger.UIDN}else{if(null==this.companyLedgerService.singleresult)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.companyLedgerService.singleresult.UIDN}else{if(null==this.VoucherMasters[e].VDet[t].LedDet||null==this.VoucherMasters[e].VDet[t].LedDet)return void this.alertService.showInfo("Error","Please select ledger to add/against reference");this.curReferenceedger=this.VoucherMasters[e].VDet[t].LedDet.UIDN}null!=this.VoucherMasters[e].referencemaster&&this.VoucherMasters[e].referencemaster.length>0?this.httpfunction.IsMobileview()?e>-1?(this.curReference=JSON.parse(JSON.stringify(this.VoucherMasters[e].referencemaster.filter(t=>t.L_Id==this.curReferenceedger&&t.Index==e))),null!=this.curReference&&this.curReference.length>0||this.addNewreference()):this.addNewreference():(this.curReference=JSON.parse(JSON.stringify(this.VoucherMasters[e].referencemaster.filter(e=>e.L_Id==this.curReferenceedger))),null!=this.curReference&&this.curReference.length>0||this.addNewreference()):this.addNewreference(),0==this.allagainstRefList.filter(e=>e.L_Id==this.curReferenceedger&&e.VoucherMaster_PK_Id!=this.VoucherId).length&&(this.accountService.filterArg=new Rt.Jw,this.accountService.filterArg.LedgerId=this.curReferenceedger,this.accountService.filterArg.voucherMasterId=this.VoucherId,this.accountService.isGetSubscribe=!0,this.accountService.GetAgainstRefDetail()),this.modalReferenceIndex=e,this.showReferencepopup=!0,this.httpfunction.IsMobileview()||this.RefModal.show()}onAgainstRefChange(e,t){null!=t.Agnst_Ref_Id&&this.curReference.filter(t=>1!=t.operationType&&t.Agnst_Ref_Id==e.UIDN).length>1?(this.alertService.showError("Error","This reference is already in use as against reference. Please select another reference"),setTimeout(()=>{t.Agnst_Ref_Id=null,t.OrgBalance=0,t.Agnst_VoucherMst_Id=null},250)):(t.Balance=e.Balance,t.OrgBalance=e.OrgBalance,t.Agnst_VoucherMst_Id=e.VoucherMaster_PK_Id,t.AmtType=e.Cr>0?"Dr":"Cr")}Savereference(){let e=!0;var t=[];if(this.httpfunction.IsMobileview()){if(null!=this.VoucherMasters[this.modalReferenceIndex].referencemaster&&this.VoucherMasters[this.modalReferenceIndex].referencemaster.length>0)if(-1==this.modalReferenceIndex){var i=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id==this.curReferenceedger);let e=this.curReference.concat(i||[]);this.curReference=e}else if(this.modalReferenceIndex>-1){var n=this.VoucherMasters[this.modalReferenceIndex].referencemaster.findIndex(e=>e.Index==this.modalReferenceIndex);this.VoucherMasters[this.modalReferenceIndex].referencemaster[n]=this.curReference[0],this.curReference=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>void 0!==e)}if(this.curReference.length>0){let i=this.curReference.length;null!=this.VoucherMasters[this.modalReferenceIndex].referencemaster&&this.VoucherMasters[this.modalReferenceIndex].referencemaster.length>0&&-1==this.modalReferenceIndex&&(t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id!=this.curReferenceedger));for(let n=0;n<i;n++){if("Dr"==this.curReference[n].AmtType?(this.curReference[n].Dr=this.getNumeric(this.curReference[n].Balance),this.curReference[n].Cr=0):(this.curReference[n].Cr=this.getNumeric(this.curReference[n].Balance),this.curReference[n].Dr=0),"AgainstRef"==this.curReference[n].Ref_Type){let t=this.getNumeric(this.curReference[n].OrgBalance);t<0&&(t*=-1),this.getNumeric(this.curReference[n].Balance)>t&&(e=!1)}t.push(this.curReference[n])}this.modalDrAmt=this.TotalAmount,this.VoucherMasters[this.modalReferenceIndex].referencemaster=t}else t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id!=this.curReferenceedger),this.VoucherMasters[this.modalReferenceIndex].referencemaster=t}else if(this.curReference.length>0){let i=this.curReference.length;null!=this.VoucherMasters[this.modalReferenceIndex].referencemaster&&this.VoucherMasters[this.modalReferenceIndex].referencemaster.length>0&&(t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id!=this.curReferenceedger));for(let n=0;n<i;n++){if("Dr"==this.curReference[n].AmtType?(this.curReference[n].Dr=this.getNumeric(this.curReference[n].Balance),this.curReference[n].Cr=0):(this.curReference[n].Cr=this.getNumeric(this.curReference[n].Balance),this.curReference[n].Dr=0),"AgainstRef"==this.curReference[n].Ref_Type){let t=this.getNumeric(this.curReference[n].OrgBalance);t<0&&(t*=-1),this.getNumeric(this.curReference[n].Balance)>t&&(e=!1)}t.push(this.curReference[n])}this.VoucherMasters[this.modalReferenceIndex].referencemaster=t}else t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id!=this.curReferenceedger),this.VoucherMasters[this.modalReferenceIndex].referencemaster=t;e?(this.showReferencepopup=!1,this.httpfunction.IsMobileview()||this.RefModal.hide(),this.calculateAmount(this.modalReferenceIndex),this.finalcalculation(this.modalReferenceIndex),this.httpfunction.IsMobileview()||setTimeout(()=>{},200)):this.alertService.showError("Error","Against reference should not have more amount than the outstanding amount")}calculateAmount(e){if(null!=this.VoucherMasters[this.modalReferenceIndex].referencemaster&&null!=this.VoucherMasters[this.modalReferenceIndex].referencemaster){let r=null;if(this.httpfunction.IsMobileview())if(null!=this.modalLedger&&null!=this.modalLedger){r=this.modalLedger;var t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id==this.modalLedger.UIDN&&1!=e.operationType)}else r=this.companyLedgerService.singleresult,t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id==r.UIDN&&1!=e.operationType);else null!=this.VoucherMasters[e]&&this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&e.LedDet.UIDN==this.curReferenceedger).length>0?(r=this.VoucherMasters[e].VDet.filter(e=>e.LedDet.UIDN==this.curReferenceedger)[0],t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id==r.LedDet.UIDN&&1!=e.operationType)):(r=this.companyLedgerService.singleresult,t=this.VoucherMasters[this.modalReferenceIndex].referencemaster.filter(e=>e.L_Id==r.UIDN&&1!=e.operationType));var i=0,n=0;for(let e=0;e<t.length;e++)n+=t[e].Dr,i+=t[e].Cr;r.DrAmt=n-i,r.DrAmt<0&&(r.DrAmt=-1*r.DrAmt),this.httpfunction.IsMobileview()&&(this.modalDrAmt=r.DrAmt),this.httpfunction.IsMobileview()?null!=this.VoucherMasters[e]&&this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&e.LedDet.UIDN==this.curReferenceedger).length>0||((this.accountVoucherType.toLowerCase()==d.$f.DebitNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.CreditNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Sales.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Purchase.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase())&&this.VoucherMasters[e].VDet.length>0&&null!=this.VoucherMasters[e].VDet&&(this.VoucherMasters[e].VDet[0].DrAmt=r.DrAmt),this.modalDrAmt=r.DrAmt,this.modalDrAmt<0&&(this.modalDrAmt=-1*r.DrAmt)):null!=this.VoucherMasters[e]&&this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&e.LedDet.UIDN==this.curReferenceedger).length>0||(this.VoucherMasters[e].VDet[0].DrAmt=r.DrAmt)}else{var r=0,o=null;null!=(o=this.VoucherMasters[e])&&null!=o&&(r=o.Disc,o.DrAmt=this.getNumeric(o.actqty*o.rate),null!=r&&(o.DrAmt=this.getNumeric(o.DrAmt-o.DrAmt*r/100)),o.DrAmt<0&&(o.DrAmt=-1*o.DrAmt))}}onReferenceAmountChange(e){"NewRef"==e.Ref_Type&&(e.Balance<e.Dr-e.OrgBalance||e.Balance<e.Cr-e.OrgBalance)&&(this.alertService.showError("Error","You can not reduce amount which is already paid as against reference"),e.Balance=e.Dr>0?e.Dr:e.Cr)}addNewreference(){let e=new nn.eS;e.Ref_Type=tn.l.NewRef,e.L_Id=this.curReferenceedger,e.AmtType=this.accountVoucherType.toLowerCase()==d.$f.Sales.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.DebitNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.DeliveryNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Payment.toLowerCase()?"Dr":this.accountVoucherType.toLowerCase()==d.$f.Purchase.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.CreditNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.ReceiptNote.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Receipt.toLowerCase()?"Cr":"Dr",e.operationType=0,this.ReferendeIndex=this.ReferendeIndex+1,e.Index=this.ReferendeIndex,this.curReference.push(e)}calculateBank(e){var t=new Array,i=null;let n=0;if(this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()){if(null==this.VoucherMasters[e].VDet||null==this.VoucherMasters[e].VDet)return}else if(null==this.companyLedgerService.singleresult||null==this.companyLedgerService.singleresult)return;if(this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()){if(this.VoucherMasters[e].VDet[0].LedDet.IsBank){for(let t=0;t<this.VoucherMasters[e].VDet.length;t++)n+=this.getNumeric(this.VoucherMasters[e].VDet[t].DrAmt);(r=new c.eK).LId=this.companyLedgerService.singleresult.UIDN,r.L_Name=this.companyLedgerService.singleresult.LN,r.LedDet=new d.dJ,r.LedDet.UIDN=this.companyLedgerService.singleresult.UIDN,r.LedDet.LN=this.companyLedgerService.singleresult.LN,r.LedDet.IsBank=this.companyLedgerService.singleresult.IsBank,n>0?r.DrAmt=n:(r.CrAmt=n,r.CrAmt<0&&(r.CrAmt=-1*r.CrAmt)),null!=this.VoucherMasters[e].VDet[0].TaxLedger&&null!=this.VoucherMasters[e].VDet[0].TaxLedger&&this.VoucherMasters[e].VDet[0].TaxLedger.length>0&&(r.TaxLedger=this.VoucherMasters[e].VDet[0].TaxLedger),t.push(JSON.parse(JSON.stringify(r)))}}else if(this.companyLedgerService.singleresult.IsBank){for(let t=0;t<this.VoucherMasters[e].VDet.length;t++)n+=this.getNumeric(this.VoucherMasters[e].VDet[t].DrAmt);var r;(r=new c.eK).LId=this.companyLedgerService.singleresult.UIDN,r.L_Name=this.companyLedgerService.singleresult.LN,r.LedDet=new d.dJ,r.LedDet.UIDN=this.companyLedgerService.singleresult.UIDN,r.LedDet.LN=this.companyLedgerService.singleresult.LN,r.LedDet.IsBank=this.companyLedgerService.singleresult.IsBank,n>0?r.DrAmt=n:(r.CrAmt=n,r.CrAmt<0&&(r.CrAmt=-1*r.CrAmt)),t.push(JSON.parse(JSON.stringify(r)))}i=this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()?JSON.parse(JSON.stringify(this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt&&1==e.LedDet.IsBank))):JSON.parse(JSON.stringify(this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt)));for(let c=0;c<i.length;c++)i[c].DrAmt<0?(i[c].DrAmt=-1*i[c].DrAmt,i[c].CrAmt=0):(i[c].CrAmt=i[c].DrAmt,i[c].DrAmt=0);if((t=t.concat(i?JSON.parse(JSON.stringify(i)):[])).length>0){this.VoucherMasters[e].bankDetails=[],this.bankDetails=[];for(var o=0;o<t.length;o++){let i=0;var a=0,l=null;if((t[o].DrAmt>0||t[o].CrAmt>0)&&1==t[o].LedDet.IsBank&&(i=2,a=t[o].LedDet.UIDN,l=t[o].LedDet.LN),i>0){var s=null;if(2==i){if(s=new Array,0==t[o].DrAmt||null==t[o].DrAmt){if(this.accountVoucherType.toLowerCase()==d.$f.Contra.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Payment.toLowerCase())var u=t.filter(e=>e.LedDet.UIDN!=a&&e.DrAmt>0)[0];else u=t.filter(e=>e.LedDet.UIDN!=a&&0==e.LedDet.IsBank&&e.DrAmt>0)[0];null!=u&&null!=u&&s.push(u)}else null!=(u=this.accountVoucherType.toLowerCase()==d.$f.Contra.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Payment.toLowerCase()?t.filter(e=>e.LedDet.UIDN!=a&&e.CrAmt>0)[0]:this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()?t.filter(e=>e.LedDet.UIDN!=a&&e.DrAmt>0)[0]:this.accountVoucherType?t.filter(e=>null==e.InventoryDetails).filter(e=>e.LedDet.UIDN!=a)[0]:t.filter(e=>e.LedDet.UIDN!=a&&0==e.LedDet.IsBank&&e.CrAmt>0)[0])&&null!=u&&s.push(u);let i=new c.eK;var g=t[o];let n=0;if(i.DrAmt=this.getNumeric(g.DrAmt),null!=g.TaxLedger&&null!=g.TaxLedger)for(let e=0;e<g.TaxLedger.length;e++)1==g.TaxLedger[e].IsInclusive?(n+=this.getNumeric(g.DrAmt*g.TaxLedger[e].TR/100),i.DrAmt=i.DrAmt-this.getNumeric(g.DrAmt*g.TaxLedger[e].TR/100)):i.DrAmt=i.DrAmt+this.getNumeric(g.DrAmt*g.TaxLedger[e].TR/100);for(var h=0;h<s.length;h++){var p=this.bankDetails.filter(e=>e.BLId==a&&e.LId==s[h].LedDet.UIDN);let i=this.getNumeric(0==t[o].DrAmt||null==t[o].DrAmt?0:t[o].DrAmt),r=this.getNumeric(0==t[o].DrAmt||null==t[o].DrAmt?t[o].CrAmt:0);if(null!=s[h].TaxLedger&&null!=s[h].TaxLedger)for(let e=0;e<s[h].TaxLedger.length;e++)0==r?1==s[h].TaxLedger[e].IsInclusive?(n+=this.getNumeric(s[h].CrAmt*s[h].TaxLedger[e].TR/100),i-=this.getNumeric(s[h].CrAmt*s[h].TaxLedger[e].TR/100)):i+=this.getNumeric(s[h].CrAmt*s[h].TaxLedger[e].TR/100):1==s[h].TaxLedger[e].IsInclusive?(n+=this.getNumeric(s[h].DrAmt*s[h].TaxLedger[e].TR/100),r-=this.getNumeric(s[h].DrAmt*s[h].TaxLedger[e].TR/100)):r+=this.getNumeric(s[h].DrAmt*s[h].TaxLedger[e].TR/100);if(p.length>0)p[0].Led_Dr=this.getNumeric(p[0].Led_Dr)+this.getNumeric(i);else{let t=new c.oy;if(t.BankName="",t.TType="Cheque/DD",this.httpfunction.IsMobileview()&&(t.TType="0"),t.ChkDt=new Date,t.ChkNo="",t.BRecoDt=null,null!=this.VoucherMasters[e].bankDetails&&null!=this.VoucherMasters[e].bankDetails){var f=this.VoucherMasters[e].bankDetails.filter(e=>e.BLId==a&&e.LId==s[h].LedDet.UIDN);0==f.length&&(f=this.VoucherMasters[e].bankDetails.filter(e=>(e.BLId==a||e.LId==s[h].LedDet.UIDN)&&e.Led_Dr==i)),0==f.length&&(f=this.VoucherMasters[e].bankDetails.filter(e=>(e.BLId==a||e.LId==s[h].LedDet.UIDN)&&e.Led_Dr==s[h].DrAmt)),f.length>0&&(t.BankName=f[0].BankName,t.TType=f[0].TType,t.ChkDt=f[0].ChkDt,t.ChkNo=f[0].ChkNo,t.BRecoDt=f[0].BRecoDt,f[0].Led_Dr=i)}t.InclusiveAmount=n,t.BLId=a,t.BL_Name=l,t.LId=s[h].LedDet.UIDN,t.L_Name=s[h].LedDet.LN,this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()?(t.Led_Dr=parseFloat(r.toFixed(2)),t.Led_Cr=parseFloat(i.toFixed(2))):(t.Led_Dr=parseFloat(i.toFixed(2)),t.Led_Cr=parseFloat(r.toFixed(2))),t.bankTabIndex=this.bankDetails.length+1010,this.bankDetails.push(t),this.VoucherMasters[e].bankDetails=this.bankDetails}}}}}}}DebitOrCreditByCategory(e,t){let i="";if(this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()&&1==t)return"CREDIT";if(this.accountVoucherType.toLowerCase()==d.$f.Journal.toLowerCase()&&0==t)return"DEBIT";if(this.accountVoucherType.toLowerCase()==d.$f.DebitNote.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.Sales.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.DeliveryNote.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()&&0==t)return"DEBIT";if(this.accountVoucherType.toLowerCase()==d.$f.DebitNote.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.Sales.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.DeliveryNote.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.SalesOrder.toLowerCase()&&1==t)return"CREDIT";if(this.accountVoucherType.toLowerCase()==d.$f.CreditNote.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.Purchase.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.ReceiptNote.toLowerCase()&&0==t||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase()&&0==t)return"CREDIT";if(this.accountVoucherType.toLowerCase()==d.$f.CreditNote.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.Purchase.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.ReceiptNote.toLowerCase()&&1==t||this.accountVoucherType.toLowerCase()==d.$f.PurchaseOrder.toLowerCase()&&1==t)return"DEBIT";i=this.accountVoucherType.toLowerCase()==d.$f.Receipt.toLowerCase()||this.accountVoucherType.toLowerCase()==d.$f.Contra.toLowerCase()?"Increase":"Decrease",t&&(i="Decrease"==i?"Increase":"Decrease");var n="";if("Increase"==i)switch(e){case"Assets":case"Expenses":n="DEBIT";break;case"Liability":case"Income":n="CREDIT"}else switch(e){case"Assets":case"Expenses":n="CREDIT";break;case"Liability":case"Income":n="DEBIT"}return n}finalcalculation(e){if(null==this.companyLedgerService.singleresult||null==this.companyLedgerService.singleresult)return;var t=this.VoucherMasters[e].VDet.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt);let i=0,n=0,r=0,o=0,a=0;for(let l=0;l<t.length;l++){let e=null;e=this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()?this.DebitOrCreditByCategory(this.VoucherMasters[l].VDet[0].L_Cat,!0):this.DebitOrCreditByCategory(this.companyLedgerService.singleresult.Cat,!0);let s=0,c=0;if(t[l].LedDet.isTL?"DEBIT"==e?this.getNumeric(t[l].DrAmt)<0?r+=this.getNumeric(-1*t[l].DrAmt):o+=this.getNumeric(t[l].DrAmt):this.getNumeric(t[l].DrAmt)<0?o+=this.getNumeric(-1*t[l].DrAmt):r+=this.getNumeric(t[l].DrAmt):"DEBIT"==e?this.getNumeric(t[l].DrAmt)<0?(c=this.getNumeric(-1*t[l].DrAmt),i+=this.getNumeric(c)):(s=this.getNumeric(t[l].DrAmt),n+=this.getNumeric(s)):this.getNumeric(t[l].DrAmt)<0?(s=this.getNumeric(-1*t[l].DrAmt),n+=this.getNumeric(s)):(c=this.getNumeric(t[l].DrAmt),i+=this.getNumeric(c)),null!=t[l].TaxLedger&&null!=t[l].TaxLedger)for(let i=0;i<t[l].TaxLedger.length;i++)s>0&&(o+=this.getNumeric(s*t[l].TaxLedger[i].TR/100),t[l].TaxLedger[i].IsInclusive&&(a+=this.getNumeric(s*t[l].TaxLedger[i].TR/100))),c>0&&(r+=this.getNumeric(c*t[l].TaxLedger[i].TR/100),t[l].TaxLedger[i].IsInclusive&&(a+=this.getNumeric(c*t[l].TaxLedger[i].TR/100)));let u=n-i,g=o-r;this.Total=u>0?parseFloat((u-1*a).toString()).toFixed(2)+" Dr":parseFloat((-1*u-1*a).toString()).toFixed(2)+" Cr",this.TotalTax=g>0?parseFloat((1*g).toString()).toFixed(2)+" Dr":parseFloat((-1*g*1).toString()).toFixed(2)+" Cr",this.GrandTotal=u+g>0?this.Totalroundoff>0?parseFloat((1*(u+g-a-this.Totalroundoff)).toString()).toFixed(2)+" Dr":parseFloat((1*(u+g-this.Totalroundoff-a)).toString()).toFixed(2)+" Dr":this.Totalroundoff>0?parseFloat((1*(-1*(u+g)-a-this.Totalroundoff)).toString()).toFixed(2)+" Cr":parseFloat((1*(-1*(u+g)-this.Totalroundoff-a)).toString()).toFixed(2)+" Cr"}this.VoucherMasters[e].TotalAmt=Number(this.GrandTotal.replace("Cr","").replace("Dr","")),this.calculateBank(e)}onVoucherDateSelect(e){this.VoucherMasters[e.index].VDt=e.startDate}IsvalidDate(e){if(null!=this.VoucherMasters[e].VDt&&null!=this.VoucherMasters[e].VDt){var t=this.httpfunction.getCompanyvariale();return!(moment(t.StDt).format("YYYY-MM-DD")>moment(this.VoucherMasters[e].VDt).format("YYYY-MM-DD")&&(this.alertService.showError("Error","Voucher date must be greater than a company creation date: "+moment(this.companyLedgerService.getCompanyData.StDt).format("YYYY-MM-DD")+"."),1))}return!1}GenerateTableLedger(e,t){if(0==t){this.taxledgerDetails=[];var i=new c.eK;let t=null;return t=this.DebitOrCreditByCategory(this.comapny_LedgerAccount.Cat,!0),i.isMainled=!1,i.LId=e.LedDet.UIDN,i.L_Name=e.LedDet.LN,i.L_PId=e.LedDet.PI,i.L_Cat=e.LedDet.Cat,i.L_anc=e.LedDet.ancestor,i.CrAmt=e.DrAmt,i.deletedreference=e.deletedreference,i.TT=e.TT,i.TTA=e.TTA,i.challan=e.challan,i.IsBank=e.LedDet.IsBank,i.TCN=e.TCN,"DEBIT"==t?(i.CrAmt=0,i.DrAmt=this.getNumeric(e.DrAmt),this.getNumeric(e.DrAmt)<0&&(i.CrAmt=-1*this.getNumeric(e.DrAmt),i.DrAmt=0)):(i.DrAmt=0,i.CrAmt=this.getNumeric(e.DrAmt),this.getNumeric(e.DrAmt)<0&&(i.DrAmt=-1*this.getNumeric(e.DrAmt),i.CrAmt=0)),i.InventoryId=0,i.Quantity=0,i.UnitCost=0,i.IsTax=!1,null!=e.TaxLedger&&null!=e.TaxLedger&&e.TaxLedger.length>0?(i.TaxLedger=e.TaxLedger,i.TaxLedgerId=0,i.TaxRate=0):(i.TaxLedgerId=0,i.TaxRate=0),this.taxledgerDetails.push(i),this.taxledgerDetails}if(this.taxledgerDetails=[],null!=e.TaxLedger&&null!=e.TaxLedger){for(let t=0;t<e.TaxLedger.length;t++){let i=null;i=this.DebitOrCreditByCategory(this.comapny_LedgerAccount.Cat,!0);var n=new c.eK;n.isMainled=!1,n.IsTax=!0,n.LId=e.TaxLedger[t].UIDN,n.L_Name=e.TaxLedger[t].LN,n.L_PId=e.TaxLedger[t].PI,n.L_Cat=e.TaxLedger[t].Cat,n.L_anc=e.TaxLedger[t].ancestor,n.TaxLedgerId=e.TaxLedger[t].UIDN,n.TaxRate=e.TaxLedger[t].TR,n.isInclusive=e.TaxLedger[t].IsInclusive,null!=e.InventoryDetails&&null!=e.InventoryDetails&&(n.InventoryId=e.InventoryDetails.UIDN),"DEBIT"==i?(n.DrAmt=parseFloat((e.DrAmt*e.TaxLedger[t].TR/100).toFixed(2)),n.CrAmt=0):(n.CrAmt=parseFloat((e.DrAmt*e.TaxLedger[t].TR/100).toFixed(2)),n.DrAmt=0),this.taxledgerDetails.push(n)}return this.taxledgerDetails}return null}deleteLedger(e){this.VoucherMasters.splice(e,1)}RemoveReference(e){var t=this.curReference.findIndex(t=>t.Index==e);if(this.httpfunction.IsMobileview())if(0==this.curReference[t].operationType){var i=this.VoucherMasters[this.modalReferenceIndex].referencemaster.findIndex(e=>e.Index==this.modalReferenceIndex);this.VoucherMasters[this.modalReferenceIndex].referencemaster.splice(i,1),this.curReference.splice(t,1)}else"NewRef"==this.curReference[t].Ref_Type&&this.curReference[t].Balance>this.curReference[t].OrgBalance?this.alertService.showError("Error","This reference already have against reference. Please delete against reference first"):(i=this.VoucherMasters[this.modalReferenceIndex].referencemaster.findIndex(e=>e.Index==this.modalReferenceIndex),this.VoucherMasters[this.modalReferenceIndex].referencemaster[i].operationType=1,this.curReference[t].operationType=1);else 0==this.curReference[t].operationType?this.curReference.splice(t,1):"NewRef"==this.curReference[t].Ref_Type&&this.curReference[t].Balance>this.curReference[t].OrgBalance?this.alertService.showError("Error","This reference already have against reference. Please delete against reference first"):this.curReference[t].operationType=1;this.calculateAmount(this.modalReferenceIndex),this.finalcalculation(this.modalReferenceIndex)}onSubmit(){this.form.valid&&this.formvalid()}formvalid(){this.FinalVoucherMasters=[];let e=1;for(let t=0;t<this.VoucherMasters.length;t++)this.IsvalidDate(t)?this.form.valid&&(null!=this.VoucherMasters[t].VDt&&this.VoucherMasters[t].VDet.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt).length>0?(this.FinalVoucherMasters[t]=new c.VN,this.AddUpdateVoucher(t),e=0):(e+=1,this.alertService.showInfo("Info","Please enter proper detail in account."))):(e+=1,this.alertService.showInfo("Info","Please enter proper detail in account."));0==e&&this.accountService.addQuickVoucher(this.FinalVoucherMasters).subscribe(e=>{this.router.navigate(["/transactions/daybook"])},()=>{})}AddVoucher(e){this.accountService.waitforMessage=!1,this.accountService.isPopUpMessage=!1,this.accountVoucherType.toLowerCase()!=d.$f.Contra.toLowerCase()&&this.accountVoucherType.toLowerCase()!=d.$f.Payment.toLowerCase()&&(this.FinalVoucherMasters[e].VDet=this.FinalVoucherMasters[e].VDet.sort((e,t)=>e.isMainled===t.isMainled?0:e.isMainled?-1:1)),this.FinalVoucherMasters[e].referencemaster=this.VoucherMasters[e].referencemaster}AddUpdateVoucher(e){let t=null,i=[];this.comapny_LedgerAccount=null;let n=this.VoucherMasters[e].VDet;this.accountVoucherType.toLocaleLowerCase()==d.$f.Sales.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.CreditNote.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.Purchase.toLocaleLowerCase()||this.accountVoucherType.toLocaleLowerCase()==d.$f.DebitNote.toLocaleLowerCase()?(t=n.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt&&0!=e.DrAmt),this.comapny_LedgerAccount=n.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt&&0!=e.DrAmt)[0].LedDet,i=i.concat(t?JSON.parse(JSON.stringify(t)):[]),i[0].LedDet=this.companyLedgerService.singleresult):(i=n.filter(e=>null!=e.LedDet&&null!=e.LedDet&&null!=e.DrAmt&&null!=e.DrAmt&&0!=e.DrAmt),this.comapny_LedgerAccount=this.companyLedgerService.singleresult),this.FinalVoucherMasters[e].VT=this.accountVoucherType,this.FinalVoucherMasters[e].Narr=this.VoucherMasters[e].Narr,this.FinalVoucherMasters[e].VDt=this.VoucherMasters[e].VDt,this.FinalVoucherMasters[e].VDet=[];var r=new c.eK;r.LId=this.comapny_LedgerAccount.UIDN,r.L_Name=this.comapny_LedgerAccount.LN,r.L_PId=this.comapny_LedgerAccount.PI,r.L_Cat=this.comapny_LedgerAccount.Cat,r.L_anc=this.comapny_LedgerAccount.ancestor,r.challan=this.comapny_LedgerAccount.challan,r.TaxLedgerId=0,r.TaxRate=0,r.InventoryId=0,r.Quantity=0,r.UnitCost=0,r.IsTax=!1,r.isMainled=!0,r.IsBank=this.comapny_LedgerAccount.IsBank;let o=!0;for(let l=0;l<i.length;l++){let t=this.GenerateTableLedger(i[l],!1);if(this.FinalVoucherMasters[e].STA=null==i[l].State?JSON.parse(this.httpfunction.getStorage("_company")).Ste:i[l].State,null!=i[l].TaxLedger&&null!=i[l].TaxLedger&&(this.taxxxledger=this.GenerateTableLedger(i[l],!0),null!=t[0].TaxLedger))for(let e=0;e<t[0].TaxLedger.length;e++)t[0].TaxLedger[e].IsInclusive&&(t[0].DrAmt>0?t[0].DrAmt=t[0].DrAmt-this.getNumeric(t[0].DrAmt*t[0].TaxLedger[e].TR/100):t[0].CrAmt=t[0].CrAmt-this.getNumeric(t[0].CrAmt*t[0].TaxLedger[e].TR/100));if(null!=i[l].TaxLedger&&null!=i[l].TaxLedger&&null!=this.taxxxledger&&null!=this.taxxxledger)for(let i=0;i<this.taxxxledger.length;i++)this.taxxxledger[i].TaxLedgerId=t[0].LId,this.FinalVoucherMasters[e].VDet.push(this.taxxxledger[i]);if(null==t){o=!1;break}this.FinalVoucherMasters[e].VDet.push(t[0])}var a=this.FinalVoucherMasters[e].VDet.find(e=>1==e.isMainled);if(null==a&&null==a)for(let l=0;l<this.FinalVoucherMasters[e].VDet.length;l++)if(null==this.FinalVoucherMasters[e].VDet){o=!1;break}if(0==i.length&&(o=!1),o){let t=0,i=0,n=null;if(n=this.DebitOrCreditByCategory(this.comapny_LedgerAccount.Cat,!1),"DEBIT"==n){for(let i=0;i<this.FinalVoucherMasters[e].VDet.length;i++)t+=parseFloat(this.FinalVoucherMasters[e].VDet[i].CrAmt.toFixed(2)),t-=parseFloat(this.FinalVoucherMasters[e].VDet[i].DrAmt.toFixed(2));t=parseFloat(t.toFixed(2)),t>0?(r.CrAmt=0,r.DrAmt=t):(r.DrAmt=0,r.CrAmt=-1*t)}else{for(let t=0;t<this.FinalVoucherMasters[e].VDet.length;t++)i+=parseFloat(this.FinalVoucherMasters[e].VDet[t].DrAmt.toFixed(2)),i-=parseFloat(this.FinalVoucherMasters[e].VDet[t].CrAmt.toFixed(2));i=parseFloat(i.toFixed(2)),t>0?(r.DrAmt=0,r.CrAmt=i):(r.CrAmt=0,r.DrAmt=-1*i)}this.FinalVoucherMasters[e].VDet.push(r);for(let r=0;r<this.FinalVoucherMasters[e].VDet.length;r++)parseFloat(this.FinalVoucherMasters[e].VDet[r].DrAmt.toFixed(2))<0?(this.FinalVoucherMasters[e].VDet[r].CrAmt=-1*parseFloat(this.FinalVoucherMasters[e].VDet[r].DrAmt.toFixed(2)),this.FinalVoucherMasters[e].VDet[r].DrAmt=0):parseFloat(this.FinalVoucherMasters[e].VDet[r].CrAmt.toFixed(2))<0&&(this.FinalVoucherMasters[e].VDet[r].DrAmt=-1*parseFloat(this.FinalVoucherMasters[e].VDet[r].CrAmt.toFixed(2)),this.FinalVoucherMasters[e].VDet[r].CrAmt=0);t=0,i=0;for(let r=0;r<this.FinalVoucherMasters[e].VDet.length;r++)i+=parseFloat(this.FinalVoucherMasters[e].VDet[r].DrAmt.toFixed(2)),t+=parseFloat(this.FinalVoucherMasters[e].VDet[r].CrAmt.toFixed(2));t=parseFloat(t.toFixed(2)),i=parseFloat(i.toFixed(2)),t!=i?this.alertService.showError("Error","Debit and Credit amount is not matched, Please select proper Account."):(this.FinalVoucherMasters[e].ActionId=0,this.AddBankdetails(e))}else this.alertService.showError("Error","Please enter proper debit or credit amount for reference.")}AddBankdetails(e){let t=!1;var i=this.VoucherMasters[e].bankDetails;for(let r=0;r<i.length;r++){let o=i[r],a=o.Led_Cr>0?o.Led_Cr:o.Led_Dr;var n=this.FinalVoucherMasters[e].VDet.filter(e=>e.LId==o.BLId);let l=0;for(let t=0;t<n.length;t++)if(l+=n[t].CrAmt>0?null==o.InclusiveAmount&&null==o.InclusiveAmount?this.getNumeric(n[t].CrAmt):this.getNumeric(n[t].CrAmt)-o.InclusiveAmount:null==o.InclusiveAmount&&null==o.InclusiveAmount?this.getNumeric(n[t].DrAmt):this.getNumeric(n[t].DrAmt)-o.InclusiveAmount,null!=n[t].TaxLedger&&null!=n[t].TaxLedger)for(let i=0;i<n[t].TaxLedger.length;i++){let r=null,o=null;o=n[t].TaxLedger[i],r=this.FinalVoucherMasters[e].VDet.filter(e=>e.LId==o.UIDN&&e.TaxLedgerId==n[t].LId&&1==e.IsTax)[0],n[t].CrAmt>0?r.isInclusive?l-=this.getNumeric(r.CrAmt):l+=this.getNumeric(r.CrAmt):r.isInclusive?l-=this.getNumeric(r.DrAmt):l+=this.getNumeric(r.DrAmt)}if(a!=l){t=!0;break}}t?this.alertService.showError("Error","Bank amount is not matched with the voucher amount. Please enter proper amount"):(this.FinalVoucherMasters[e].bankDetails=this.VoucherMasters[e].bankDetails,this.finalSave(e))}finalSave(e){this.FinalVoucherMasters[e].CI=this.accountService.getCompanyId,this.FinalVoucherMasters[e].SI=this.accountService.getSignupId;let t=this.httpfunction.getStorage("_roledata");t&&"null"!=t&&null!=t&&JSON.parse(this.httpfunction.getStorage("_roledata"));let i=JSON.parse(this.httpfunction.getStorage("_company"));null!=i.CL&&null!=i&&i.CL.length>0&&(this.FinalVoucherMasters[e].logoname=i.CL[0].name),this.AddVoucher(e)}}return e.\u0275fac=function(t){return new(t||e)(v.Y36(s.B),v.Y36(o.Q),v.Y36(b.Rq),v.Y36(L.F0))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-account"]],viewQuery:function(e,t){if(1&e&&(v.Gf(rn,5),v.Gf(on,5),v.Gf(an,7,l.w9),v.Gf(ln,7)),2&e){let e;v.iGM(e=v.CRH())&&(t.form=e.first),v.iGM(e=v.CRH())&&(t.ITableRef=e.first),v.iGM(e=v.CRH())&&(t.serachcontrol=e.first),v.iGM(e=v.CRH())&&(t.RefModal=e.first)}},features:[v._Bn([o.Q])],decls:34,vars:27,consts:[[3,"ngClass"],[1,"card"],["name","form","novalidate","",3,"ScrollToInvalid","ngSubmit"],["f","ngForm"],[1,"row"],[1,"md-form","col-4"],["for","Voucher"],["autofocus","","selectOnTab","true","name","vtype","id","vtype","placeholder","Select Voucher",3,"tabIndex","ngClass","ngModel","ngModelChange","change"],["vtype","ngModel"],["value","Sales"],["value","Purchase",4,"ngIf"],["value","Receipt",4,"ngIf"],["value","Payment",4,"ngIf"],["value","Credit Note",4,"ngIf"],["value","Debit Note",4,"ngIf"],["value","Receipt Note",4,"ngIf"],["value","Delivery Note",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"col-4"],["for","AccountText"],["selectOnTab","true","dropdownPosition","bottom","required","","name","FLedger","bindLabel","LN",3,"tabIndex","virtualScroll","items","ngModel","ngClass","loading","placeholder","ngModelChange"],["led","","FLedger","ngModel"],["ng-label-tmp",""],["class","col-md-12 p-0",4,"ngIf"],["class","row",4,"ngIf"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalRef","aria-hidden","true",1,"modalNew","fade"],["RefModal","bs-modal"],["class","modal-lg","role","document","id","myModalRef",4,"ngIf"],["value","Purchase"],["value","Receipt"],["value","Payment"],["value","Credit Note"],["value","Debit Note"],["value","Receipt Note"],["value","Delivery Note"],[1,"invalid-feedback"],[4,"ngIf"],[1,"col-md-12","p-0"],[1,"my-custom-scrollbar"],[1,"table","table-bordered","table-account"],[1,"text-left"],["scope","col",1,"text-center"],["scope","col",1,"text-left"],["voucherrow",""],[4,"ngFor","ngForOf"],["type","button","value","Add Item",1,"btn","btn-primary","btn-sm","lighten-3",3,"tabIndex","click"],["scope","row",1,"text-left"],["autofocus","","type","text","appDatepicker","","placeholder","Select Voucher Date",1,"form-control",3,"tabindex","name","startDate","index","id","selectedindex"],["ChkDt",""],["autofocus","","dropdownPosition","bottom","bindLabel","LN","placeholder","Select Account","selectOnTab","true","appendTo","body",1,"maxpanel",3,"tabIndex","virtualScroll","items","name","ngModel","loading","ngModelChange"],["toled",""],["ng-header-tmp",""],[1,"clearfix","text-left","ml-2","font-italic","font-weight-light"],["href","javascript:void(0)",3,"click",4,"ngFor","ngForOf"],["scope","row",1,"text-center"],["href","javascript:void(0)",1,"btn","btn-link",3,"tabIndex","click"],["type","number","placeholder","Enter Amount","pattern","^-?\\s*(?:\\d+|\\d*\\.\\d+)?\\s*$",1,"form-control",2,"min-width","75px",3,"tabIndex","name","ngModel","id","ngModelChange","change"],["dramt",""],["scope","row"],["selectOnTab","true","appendTo","body","dropdownPosition","bottom","bindLabel","LN","placeholder","Select Tax Account",1,"maxpanel",2,"min-width","140px",3,"tabIndex","multiple","items","name","ngModel","loading","ngModelChange","change"],["toTax",""],["ng-option-tmp",""],["type","text","placeholder","Enter Narration",1,"form-control",2,"min-width","75px",3,"tabIndex","name","ngModel","id","ngModelChange"],["scope","row",1,"text-left","pt-1","pl-2",2,"min-width","75px"],["scope","row",1,"text-center",2,"background","white"],["href","javascript:void(0)","title","Delete Ledger","placement","bottom",2,"text-decoration","none",3,"tabIndex","click"],[1,"fas","fa-trash","text-danger","mr-1"],["href","javascript:void(0)",3,"click"],["id","formbtnContainer",1,"col-sm-12","p-0","text-right"],["tabindex","1020","type","submit","name","btnsubmit","id","btnsubmit",1,"btn","btn-primary"],["btnsubmit",""],["role","document","id","myModalRef",1,"modal-lg"],["role","form",3,"ngSubmit"],["frefitem","ngForm"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","table-responsive refTable",4,"ngIf"],["type","button",1,"btn","btn-link","p-0","m-0",3,"click"],[1,"modal-footer"],["type","submit",1,"btn","btn-sm","btn-primary"],["type","button",1,"btn","btn-sm","btn-dark",3,"click"],[1,"table-responsive","refTable"],["class","table table-account table-bordered",4,"ngIf"],[1,"table","table-account","table-bordered"],["refTable",""],["class","md-form",4,"ngFor","ngForOf"],[1,"md-form"],["required","","appendTo","body","placeholder","Select Ref Type",2,"width","130px",3,"name","disabled","ngModel","ngClass","ngModelChange"],["RefType","ngModel"],["value","NewRef"],["value","OnAccount"],["value","Advance"],["value","AgainstRef"],["colspan","2",4,"ngIf"],["type","number","required","","placeholder","Enter Amount",1,"accText","form-control",2,"width","130px",3,"name","ngModel","ngClass","change","ngModelChange"],["Refamt","ngModel"],["placeholder","Select","appendTo","body",2,"min-width","65px",3,"name","ngModel","ngModelChange"],["value","Dr"],["value","Cr"],["href","javascript:void(0)",2,"text-decoration","none",3,"click"],["type","text","required","","placeholder","Reference Tag",1,"form-control","accText",2,"min-width","130px",3,"ngClass","disabled","name","ngModel","ngModelChange"],["refTag","ngModel"],["type","text","appDatepicker","","autocomplete","none",1,"form-control","readonlydate",2,"width","85px",3,"disabled","ngClass","startDate","name","id","selected"],["refdate",""],["colspan","2"],["style","min-width:200px;","selectOnTab","true","appendTo","body","bindLabel","SN","placeholder","Select Reference","bindValue","UIDN",3,"items","name","ngModel","ngModelChange","change",4,"ngIf"],["selectOnTab","true","appendTo","body","bindLabel","SN","placeholder","Select Reference","bindValue","UIDN",2,"min-width","200px",3,"items","name","ngModel","ngModelChange","change"],["agReferences",""]],template:function(e,t){if(1&e){const e=v.EpF();v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"form",2,3),v.NdJ("ngSubmit",function(){return v.CHM(e),v.MAs(3).form.valid&&t.onSubmit()}),v.TgZ(4,"div",4),v.TgZ(5,"div",5),v.TgZ(6,"label",6),v._uU(7," Voucher"),v.qZA(),v.TgZ(8,"ng-select",7,8),v.NdJ("ngModelChange",function(e){return t.accountVoucherType=e})("change",function(){return t.SelectVoucherType()}),v.TgZ(10,"ng-option",9),v._uU(11," Sales"),v.qZA(),v.YNc(12,sn,2,0,"ng-option",10),v.YNc(13,cn,2,0,"ng-option",11),v.YNc(14,dn,2,0,"ng-option",12),v.YNc(15,un,2,0,"ng-option",13),v.YNc(16,gn,2,0,"ng-option",14),v.YNc(17,hn,2,0,"ng-option",15),v.YNc(18,pn,2,0,"ng-option",16),v.qZA(),v.YNc(19,mn,2,1,"div",17),v.qZA(),v.TgZ(20,"div",18),v.TgZ(21,"label",19),v._uU(22,"Select Ledger"),v.qZA(),v.TgZ(23,"ng-select",20,21),v.NdJ("ngModelChange",function(e){return t.companyLedgerService.singleresult=e}),v.YNc(26,Zn,1,1,"ng-template",22),v.qZA(),v.YNc(27,An,2,1,"div",17),v.qZA(),v.qZA(),v.TgZ(28,"div",4),v.YNc(29,Cn,27,2,"div",23),v.qZA(),v.YNc(30,qn,5,0,"div",24),v.qZA(),v.qZA(),v.TgZ(31,"div",25,26),v.YNc(33,Pn,19,1,"div",27),v.qZA(),v.qZA()}if(2&e){const e=v.MAs(3),i=v.MAs(9),n=v.MAs(25);v.Q6J("ngClass",t.vouchertypeclass),v.xp6(8),v.Q6J("tabIndex",1)("ngClass",v.VKq(23,Dn,e.submitted&&i.invalid))("ngModel",t.accountVoucherType),v.xp6(4),v.Q6J("ngIf","CRM"!=t.accountService.getCompanyData.Type),v.xp6(1),v.Q6J("ngIf","CRM"!=t.accountService.getCompanyData.Type),v.xp6(1),v.Q6J("ngIf","CRM"!=t.accountService.getCompanyData.Type),v.xp6(1),v.Q6J("ngIf","CRM"!=t.accountService.getCompanyData.Type),v.xp6(1),v.Q6J("ngIf","CRM"!=t.accountService.getCompanyData.Type),v.xp6(1),v.Q6J("ngIf","Trading"==t.accountService.getCompanyData.Type),v.xp6(1),v.Q6J("ngIf","Trading"==t.accountService.getCompanyData.Type),v.xp6(1),v.Q6J("ngIf",e.submitted&&i.invalid),v.xp6(4),v.s9C("placeholder",t.AccountText),v.Q6J("tabIndex",2)("virtualScroll",!0)("items",t.FromLedger)("ngModel",t.companyLedgerService.singleresult)("ngClass",v.VKq(25,Dn,e.submitted&&n.invalid))("loading",t.companyLedgerService.loading),v.xp6(4),v.Q6J("ngIf",e.submitted&&n.invalid),v.xp6(2),v.Q6J("ngIf",!t.accountService.IsMobileview),v.xp6(1),v.Q6J("ngIf",!t.accountService.isMobile),v.xp6(3),v.Q6J("ngIf",t.showReferencepopup)}},directives:[n.mk,N._Y,N.JL,N.F,_.u,l.w9,D.x,N.JJ,N.On,l.xv,n.O5,N.Q7,l.bb,y.oB,n.sg,F.q,l.A3,N.wV,N.Fj,N.c5,l.Z2],styles:[""]}),e})(),data:{title:"Add Transaction",ViewType:"View",component:"AccountComponent"},canActivate:[en.i]},{path:"accountaddedit/:id",component:Dt.L,data:{title:"Add Transaction",ViewType:"View",component:"AccountAddeditComponent"},canActivate:[en.i]},{path:"account/:Type",component:Dt.L,data:{title:"Add Transaction",ViewType:"View",component:"AccountAddeditComponent"},canActivate:[en.i]},{path:"account/:Type/:Id",component:Dt.L,data:{title:"Edit Transaction",ViewType:"View",component:"AccountAddeditComponent"},canActivate:[en.i]},{path:"ledgerList",component:zi,data:{title:"Ledger List",ViewType:"View",component:"CompanyledgerListComponent"},canActivate:[en.i]},{path:"ledgeradd/:parentid/:group",component:Ut.k,data:{title:"Add/Edit Ledger",ViewType:"View",component:"CompanyledgerAddeditComponent"},canActivate:[en.i]},{path:"ledgeredit/:cmpledgerid",component:Ut.k,data:{title:"Add/Edit Ledger",ViewType:"View",component:"CompanyledgerAddeditComponent"},canActivate:[en.i]},{path:"bankstatement",component:Xi,data:{title:"Bank Statement",ViewType:"View",component:"BankstatementComponent"},canActivate:[en.i]}]}];let Bn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v.oAB({type:e}),e.\u0275inj=v.cJS({imports:[[L.Bz.forChild(Gn)],L.Bz]}),e})();var Yn=i(26246);let jn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v.oAB({type:e}),e.\u0275inj=v.cJS({providers:[$n],imports:[[n.ez,Bn,E.Lr,I.Pc.forRoot(),Yn.p.forRoot()]]}),e})()}}]);